/*
 @preserve
 AgoraRTM Web SDK 1.5.0 - commit: v1.5.0-0-g83bd874d
 Copyright (C) 2018-2022 Agora Lab.
 This file is licensed under the AGORA, INC. SDK LICENSE AGREEMENT
 A copy of this license may be found at https://www.agora.io/en/sdk-license-agreement/
*/
"use strict";!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).AgoraRTM=t()}(this,(function(){function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oa(e){return(oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rm(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}function ja(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){function o(e){rm(s,r,i,o,a,"next",e)}function a(e){rm(s,r,i,o,a,"throw",e)}var s=e.apply(t,n);o(void 0)}))}}function ua(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cb(e,t,n){return t&&sm(e.prototype,t),n&&sm(e,n),e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ga(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hf(e,t)}function Sd(e){return(Sd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hf(e,t){return(Hf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tm(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Di(e,t,n){return(Di=tm()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),e=new(Function.bind.apply(e,r)),n&&Hf(e,n.prototype),e}).apply(null,arguments)}function If(e){var t="function"==typeof Map?new Map:void 0;return(If=function(e){function n(){return Di(e,arguments,Sd(this).constructor)}if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Hf(n,e)})(e)}function Ei(e,t){if(null==e)return{};if(null==e)var n={};else{n={};var r,i=Object.keys(e);for(r=0;r<i.length;r++){var o=i[r];0<=t.indexOf(o)||(n[o]=e[o])}}if(Object.getOwnPropertySymbols)for(r=Object.getOwnPropertySymbols(e),o=0;o<r.length;o++)i=r[o],0<=t.indexOf(i)||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i]);return n}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ha(e){var t=tm();return function(){var n=Sd(e);if(t){var r=Sd(this).constructor;n=Reflect.construct(n,arguments,r)}else n=n.apply(this,arguments);return n=!n||"object"!=typeof n&&"function"!=typeof n?z(this):n}}function Fi(e,t,n){return(Fi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sd(e)););if(e)return(t=Object.getOwnPropertyDescriptor(e,t)).get?t.get.call(n):t.value})(e,t,n||e)}function Xa(e,t){var n=Array.isArray(e)?e:void 0;if(!n)if(null==(n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"])))n=void 0;else{var r,i=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);o=!0);}catch(e){a=!0;var s=e}finally{try{o||null==n.return||n.return()}finally{if(a)throw s}}n=i}if(!(e=n||um(e,t)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return e}function W(e){var t=Array.isArray(e)?Gi(e):void 0;if(t||(t="undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"]?Array.from(e):void 0),!(e=t||um(e)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return e}function um(e,t){if(e){if("string"==typeof e)return Gi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gi(e,t)}}function Gi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ca(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function tb(e){var t={exports:{}};return e(t,t.exports),t.exports}function Ae(e){e||(e={});var t=e.ua;if(t||"undefined"==typeof navigator||(t=navigator.userAgent),t&&t.headers&&"string"==typeof t.headers["user-agent"]&&(t=t.headers["user-agent"]),"string"!=typeof t)return!1;var n=Rt.test(t)&&!St.test(t)||!!e.tablet&&Tt.test(t);return!n&&e.tablet&&e.featureDetect&&navigator&&1<navigator.maxTouchPoints&&-1!==t.indexOf("Macintosh")&&-1!==t.indexOf("Safari")&&(n=!0),n}function vm(e,t){var n,r=3>arguments.length?e:arguments[2];return Ia(e)===r?e[t]:(n=Zb.f(e,t))?ha(n,"value")?n.value:void 0===n.get?void 0:n.get.call(r):va(n=nc(e))?vm(n,t,r):void 0}function Ut(e){var t=e.charCodeAt(0)<<24,n=0|Vt(~t),r=0,i=0|e.length,o="";if(5>n&&i>=n){for(t=t<<n>>>24+n,r=1;r<n;r=r+1|0)t=t<<6|63&e.charCodeAt(r);65535>=t?o+=Td(t):1114111>=t?o+=Td(55296+((t=t-65536|0)>>10)|0,56320+(1023&t)|0):r=0}for(;r<i;r=r+1|0)o+="ï¿½";return o}function wm(){}function Wt(e){var t=0|e.charCodeAt(0);if(55296<=t&&56319>=t){var n=0|e.charCodeAt(1);if(!(n==n&&56320<=n&&57343>=n))return Td(239,191,189);if(65535<(t=(t-55296<<10)+n-56320+65536|0))return Td(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}return 127>=t?e:2047>=t?Td(192|t>>>6,128|63&t):Td(224|t>>>12,128|t>>>6&63,128|63&t)}function xm(){}function ya(){ya.init.call(this)}function Ug(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+oa(e))}function ym(e,t,n,r){Ug(n);var i=e._events;if(void 0===i)i=e._events=Object.create(null),e._eventsCount=0;else{void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events);var o=i[t]}return void 0===o?(i[t]=n,++e._eventsCount):("function"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),0<(n=void 0===e._maxListeners?ya.defaultMaxListeners:e._maxListeners)&&o.length>n&&!o.warned&&(o.warned=!0,(n=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=o.length,console&&console.warn&&console.warn(n))),e}function Xt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function zm(e,t,n){return e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},(t=Xt.bind(e)).listener=n,e.wrapFn=t}function Am(e,t,n){if(void 0===(e=e._events))return[];if(void 0===(t=e[t]))return[];if("function"==typeof t)return n?[t.listener||t]:[t];if(n)for(n=Array(t.length),e=0;e<n.length;++e)n[e]=t[e].listener||t[e];else n=Bm(t,t.length);return n}function Cm(e){var t=this._events;if(void 0!==t){if("function"==typeof(e=t[e]))return 1;if(void 0!==e)return e.length}return 0}function Bm(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function Yt(e,t,n){"function"==typeof e.on&&Dm(e,"error",t,n)}function Dm(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+oa(e));e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}function Zt(e){return e?W(e):$t((function(){return[]}),(function(e,t){return e.push(t),e}))}function Em(e,t){var n,r,i,o;return M.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=Fm(e)([Gm,Gm,function(e,t){return t}])[2],r=0;case 2:if(!(r<t.length)){a.next=17;break}if(i=t[r],!((o=n(Hi,i))instanceof Vg)){a.next=11;break}if((o=Ii(o.deref()))===Hi){a.next=10;break}return a.next=10,o;case 10:return a.abrupt("return");case 11:if(o===Hi){a.next=14;break}return a.next=14,o;case 14:r++,a.next=2;break;case 17:case"end":return a.stop()}}),au)}function Wg(e,t){return null!=t&&"function"==typeof t[Symbol.iterator]?Em(Wg(e),t):function(t){var n=t[2];return bu(t,(function(t,r){return n(t,e(r))}))}}function Xc(e){return Object.prototype.toString.call(e).slice(8,-1)}function Be(e){return"Object"===Xc(e)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function Hm(e){var t;return(t="Boolean"===Xc(e)||"Null"===Xc(e)||"Undefined"===Xc(e))||(t="Number"===Xc(e)&&!isNaN(e)),t||"String"===Xc(e)||"Symbol"===Xc(e)}function Ud(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ce(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function De(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Jf(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Xg;++t<n;)this.add(e[t])}function Ee(e){this.size=(this.__data__=new Yg(e)).size}function Fe(e,t,n,r,i,o){var a,s=1&t,u=2&t,c=4&t;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!Db(e))return e;if(r=pb(e)){if(a=cu(e),!s)return Ji(e,a)}else{var l=Kf(e),f="[object Function]"==l||"[object GeneratorFunction]"==l;if(Lf(e))return Im(e,s);if("[object Object]"==l||"[object Arguments]"==l||f&&!i){if(a=u||f?{}:Jm(e),!s)return u?du(e,eu(a,e)):fu(e,gu(a,e))}else{if(!Na[l])return i?e:{};a=hu(e,l,s)}}if(o||(o=new Ge),i=o.get(e))return i;o.set(e,a),iu(e)?e.forEach((function(r){a.add(Fe(r,t,n,r,e,o))})):ju(e)&&e.forEach((function(r,i){a.set(i,Fe(r,t,n,i,e,o))})),u=c?u?Km:Ki:u?Mf:Vd;var h=r?void 0:u(e);return ku(h||e,(function(r,i){h&&(r=e[i=r]),Lm(a,i,Fe(r,t,n,i,e,o))})),a}function Li(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;return o.has(i)?o.get(i):(r=e.apply(this,r),n.cache=o.set(i,r)||o,r)};return n.cache=new(Li.Cache||Xg),n}function Mm(e){if("string"==typeof e)return e;if(pb(e))return He(e,Mm)+"";if(Ie(e))return Nm?Nm.call(e):"";var t=e+"";return"0"==t&&1/e==-lu?"-0":t}function Mi(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=mu),i||(i=[]);++o<a;){var s=e[o];0<t&&n(s)?1<t?Mi(s,t-1,n,r,i):Ni(i,s):r||(i[i.length]=s)}return i}function Je(e,t,n,r,i){if(e===t)t=!0;else if(null==e||null==t||!Bc(e)&&!Bc(t))t=e!=e&&t!=t;else e:{var o=pb(e),a=pb(t),s=o?"[object Array]":Kf(e),u=a?"[object Array]":Kf(t),c="[object Object]"==(s="[object Arguments]"==s?"[object Object]":s);if(a="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),(u=s==u)&&Lf(e)){if(!Lf(t)){t=!1;break e}o=!0,c=!1}if(u&&!c)i||(i=new Ge),t=o||Oi(e)?Om(e,t,n,r,Je,i):nu(e,t,s,n,r,Je,i);else{if(!(1&n)&&(o=c&&Pm.call(e,"__wrapped__"),s=a&&Pm.call(t,"__wrapped__"),o||s)){e=o?e.value():e,t=s?t.value():t,i||(i=new Ge),t=Je(e,t,n,r,i);break e}if(u)t:if(i||(i=new Ge),o=1&n,s=Ki(e),a=s.length,u=Ki(t).length,a==u||o){for(u=a;u--;){var l=s[u];if(!(o?l in t:ou.call(t,l))){t=!1;break t}}if(c=i.get(e),l=i.get(t),c&&l)t=c==t&&l==e;else{c=!0,i.set(e,t),i.set(t,e);for(var f=o;++u<a;){var h=e[l=s[u]],p=t[l];if(r)var d=o?r(p,h,l,t,e,i):r(h,p,l,e,t,i);if(void 0===d?h!==p&&!Je(h,p,n,r,i):!d){c=!1;break}f||(f="constructor"==l)}c&&!f&&((n=e.constructor)!=(r=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)&&(c=!1)),i.delete(e),i.delete(t),t=c}}else t=!1;else t=!1}}return t}function Oa(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function Eb(e){return!0===(e&&e.__isLong__)}function Wd(e,t){var n;if(t){if((t=0<=(e>>>=0)&&256>e)&&(n=Qm[e]))return n;n=Pa(e,0>(0|e)?-1:0,!0),t&&(Qm[e]=n)}else{if((t=-128<=(e|=0)&&128>e)&&(n=Rm[e]))return n;n=Pa(e,0>e?-1:0,!1),t&&(Rm[e]=n)}return n}function $b(e,t){if(isNaN(e))return t?Xd:ac;if(t){if(0>e)return Xd;if(e>=Sm)return Tm}else{if(e<=-Um)return Fb;if(e+1>=Um)return Vm}return 0>e?$b(-e,t).neg():Pa(e%Ke|0,e/Ke|0,t)}function Pa(e,t,n){return new Oa(e,t,n)}function Pi(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return ac;if("number"==typeof t?(n=t,t=!1):t=!!t,2>(n=n||10)||36<n)throw RangeError("radix");var r;if(0<(r=e.indexOf("-")))throw Error("interior hyphen");if(0===r)return Pi(e.substring(1),t,n).neg();r=$b(Zg(n,8));for(var i=ac,o=0;o<e.length;o+=8){var a=Math.min(8,e.length-o),s=parseInt(e.substring(o,o+a),n);8>a?(a=$b(Zg(n,a)),i=i.mul(a).add($b(s))):i=(i=i.mul(r)).add($b(s))}return i.unsigned=t,i}function oc(e,t){return"number"==typeof e?$b(e,t):"string"==typeof e?Pi(e,t):Pa(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}function da(e,t){function n(){this.constructor=e}Qi(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Le(e){return"function"==typeof e}function Me(e){setTimeout((function(){throw e}),0)}function Ri(e){return null!==e&&"object"===oa(e)}function Wm(e){return e.reduce((function(e,t){return e.concat(t instanceof Nf?t.errors:t)}),[])}function Si(e){for(;e;){var t=e.destination,n=e.isStopped;if(e.closed||n)return!1;e=t&&t instanceof za?t:null}return!0}function td(e){return e}function Ti(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Xm(e)}function Xm(e){return 0===e.length?td:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}function Ym(e){if(e||(e=bc.Promise||Promise),!e)throw Error("no Promise impl found");return e}function Zm(){return function(e){return e.lift(new pu(e))}}function Of(e){return e?qu(e):Nb}function qu(e){return new ra((function(t){return e.schedule((function(){return t.complete()}))}))}function ud(e){return e&&"function"==typeof e.schedule}function Ui(e,t){return new ra((function(n){var r=new kb,i=0;return r.add(t.schedule((function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||r.add(this.schedule()))}))),r}))}function Pf(e,t){return t?Ui(e,t):new ra($m(e))}function wb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ud(t=e[e.length-1])?(e.pop(),Ui(e,t)):Pf(e)}function pa(e,t){return new ra(t?function(n){return t.schedule(ru,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function ru(e){e.subscriber.error(e.error)}function su(e,t){return void 0===t&&(t=0),function(n){return n.lift(new tu(e,t))}}function an(e){return e in Vi&&(delete Vi[e],!0)}function Cc(){}function Da(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new uu(e,t))}}function bn(e,t,n){if(t){if(!ud(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return bn(e,n).apply(void 0,r).pipe(Da((function(e){return cc(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i,o=this,a={context:o,subject:i,callbackFunc:e,scheduler:n};return new ra((function(r){if(n)return n.schedule(vu,0,{args:t,subscriber:r,params:a});if(!i){i=new Qf;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.next(1>=e.length?e[0]:e),i.complete()}]))}catch(e){Si(i)?i.error(e):console.warn(e)}}return i.subscribe(r)}))}}function vu(e){var t=this,n=e.args,r=e.subscriber,i=e.params;e=i.callbackFunc;var o=i.context,a=i.scheduler,s=i.subject;if(!s){s=i.subject=new Qf,i=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.add(a.schedule(wu,0,{value:1>=e.length?e[0]:e,subject:s}))};try{e.apply(o,n.concat([i]))}catch(e){s.error(e)}}this.add(s.subscribe(r))}function wu(e){var t=e.subject;t.next(e.value),t.complete()}function cn(e,t,n){if(t){if(!ud(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return cn(e,n).apply(void 0,r).pipe(Da((function(e){return cc(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new ra((function(r){var o=i.context,a=i.subject;if(n)return n.schedule(xu,0,{params:i,subscriber:r,context:o});if(!a){a=i.subject=new Qf;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];(t=e.shift())?a.error(t):(a.next(1>=e.length?e[0]:e),a.complete())}]))}catch(e){Si(a)?a.error(e):console.warn(e)}}return a.subscribe(r)}))}}function xu(e){var t=this,n=e.params,r=e.subscriber;e=e.context;var i=n.callbackFunc,o=n.args,a=n.scheduler,s=n.subject;if(!s){s=n.subject=new Qf,n=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(n=e.shift())?t.add(a.schedule(dn,0,{err:n,subject:s})):t.add(a.schedule(yu,0,{value:1>=e.length?e[0]:e,subject:s}))};try{i.apply(e,o.concat([n]))}catch(e){this.add(a.schedule(dn,0,{err:e,subject:s}))}}this.add(s.subscribe(r))}function yu(e){var t=e.subject;t.next(e.value),t.complete()}function dn(e){e.subject.error(e.err)}function en(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}function Wi(e,t,n,r,i){if(void 0===i&&(i=new zu(e,n,r)),!i.closed)return t instanceof ra?t.subscribe(i):Rf(t)(i)}function Au(e,t){return new ra((function(n){var r=new kb;return r.add(t.schedule((function(){var i=e[Ne]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}function Bu(e,t){return new ra((function(n){var r=new kb;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}function Cu(e,t){if(!e)throw Error("Iterable cannot be null");return new ra((function(n){var r,i=new kb;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[vd](),i.add(t.schedule((function(){if(!n.closed){try{var e=r.next(),t=e.value,i=e.done}catch(e){return void n.error(e)}i?n.complete():(n.next(t),this.schedule())}})))}))),i}))}function fn(e,t){if(null!=e){if(e&&"function"==typeof e[Ne])return Au(e,t);if(en(e))return Bu(e,t);if(gn(e))return Ui(e,t);if(e&&"function"==typeof e[vd]||"string"==typeof e)return Cu(e,t)}throw new TypeError((null!==e&&oa(e)||e)+" is not observable")}function Dc(e,t){return t?fn(e,t):e instanceof ra?e:new ra(Rf(e))}function Yc(e,t){if(!t.closed){if(e instanceof ra)return e.subscribe(t);try{var n=Rf(e)(t)}catch(e){t.error(e)}return n}}function Ab(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(Ab((function(n,r){return Dc(e(n,r)).pipe(Da((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new Du(e,n))})}function $g(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Ab(td,e)}function hn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return $g(1)(wb.apply(void 0,e))}function wd(e){return new ra((function(t){try{var n=e()}catch(e){return void t.error(e)}return(n?Dc(n):Of()).subscribe(t)}))}function ah(e,t){return new ra((function(n){var r=e.length;if(0===r)n.complete();else for(var i=Array(r),o=0,a=0,s=function(s){var u=Dc(e[s]),c=!1;n.add(u.subscribe({next:function(e){c||(c=!0,a++),i[s]=e},error:function(e){return n.error(e)},complete:function(){++o!==r&&c||(a===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},u=0;u<r;u++)s(u)}))}function Gb(e,t,n,r){return Le(n)&&(r=n,n=void 0),r?Gb(e,t,n).pipe(Da((function(e){return cc(e)?r.apply(void 0,e):r(e)}))):new ra((function(r){jn(e,t,(function(e){1<arguments.length?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}))}function jn(e,t,n,r,i){if(e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener){e.addEventListener(t,n,i);var o=function(){return e.removeEventListener(t,n,i)}}else if(e&&"function"==typeof e.on&&"function"==typeof e.off)e.on(t,n),o=function(){return e.off(t,n)};else if(e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener)e.addListener(t,n),o=function(){return e.removeListener(t,n)};else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var a=0,s=e.length;a<s;a++)jn(e[a],t,n,r,i)}r.add(o)}function kn(e,t,n){return n?kn(e,t).pipe(Da((function(e){return cc(e)?n.apply(void 0,e):n(e)}))):new ra((function(n){var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{var i=e(r)}catch(e){return void n.error(e)}if(Le(t))return function(){return t(r,i)}}))}function Eu(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(e){return void t.error(e)}if(!r)return void t.complete();if(t.closed)return}try{var i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function Xi(e){return!cc(e)&&0<=e-parseFloat(e)+1}function ln(e,t){return void 0===e&&(e=0),void 0===t&&(t=xd),(!Xi(e)||0>e)&&(e=0),t&&"function"==typeof t.schedule||(t=xd),new ra((function(n){return n.add(t.schedule(Fu,e,{subscriber:n,counter:0,period:e})),n}))}function Fu(e){var t=e.subscriber,n=e.counter;e=e.period,t.next(n),this.schedule({subscriber:t,counter:n+1,period:e},e)}function Ec(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];t=Number.POSITIVE_INFINITY;var n=null,r=e[e.length-1];return ud(r)?(n=e.pop(),1<e.length&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof ra?e[0]:$g(t)(Pf(e,n))}function Yi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return Nb;var n=e[0],r=e.slice(1);return 1===e.length&&cc(n)?Yi.apply(void 0,n):new ra((function(e){var t=function(){return e.add(Yi.apply(void 0,r).subscribe(e))};return Dc(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}function Gu(e){var t=e.keys,n=e.index,r=e.subscriber,i=e.subscription;if(e=e.obj,!r.closed)if(n<t.length){var o=t[n];r.next([o,e[o]]),i.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:i,obj:e}))}else r.complete()}function Hu(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}function Ob(e,t){return function(n){return n.lift(new Iu(e,t))}}function ab(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!cc(e[0]))return e[0];e=e[0]}return Pf(e,void 0).lift(new Ju)}function Ku(e){var t=e.start,n=e.index,r=e.subscriber;n>=e.count?r.complete():(r.next(t),r.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}function Zc(e,t,n){void 0===e&&(e=0);var r=-1;return Xi(t)?r=1>Number(t)?1:Number(t):ud(t)&&(n=t),ud(n)||(n=xd),new ra((function(t){var i=Xi(e)?e:+e-n.now();return n.schedule(Lu,i,{index:0,period:r,subscriber:t})}))}function Lu(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function Zi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"function"==typeof(t=e[e.length-1])&&e.pop(),Pf(e,void 0).lift(new Mu(t))}function Ya(e){return function(t){var n=new Nu(e);return t=t.lift(n),n.caught=t}}function $i(e,t){return Ab(e,t,1)}function mn(e){return void 0===e&&(e=null),function(t){return t.lift(new Ou(e))}}function Yd(e,t){void 0===t&&(t=xd);var n=e instanceof Date&&!isNaN(+e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new Pu(n,t))}}function nn(e,t){return function(n){return n.lift(new Qu(e,t))}}function Zd(e){return void 0===e&&(e=Ru),function(t){return t.lift(new Su(e))}}function Ru(){return new bh}function db(e){return function(t){return 0===e?Of():t.lift(new Tu(e))}}function ch(e){return function(t){return t.lift(new Uu(e))}}function Aa(e,t){var n=2<=arguments.length;return function(r){return r.pipe(e?Ob((function(t,n){return e(t,n,r)})):td,db(1),n?mn(t):Zd((function(){return new bh})))}}function Vu(){return function(e){return e.lift(new Wu)}}function on(e){return function(t){return 0===e?Of():t.lift(new Xu(e))}}function Sf(e){return function(t){return t.lift(new Yu(e))}}function dh(e,t){var n=!1;return 2<=arguments.length&&(n=!0),function(r){return r.lift(new Zu(e,t,n))}}function pn(e,t){return 2<=arguments.length?function(n){return Ti(dh(e,t),on(1),mn(t))(n)}:function(t){return Ti(dh((function(t,n,r){return e(t,n,r+1)})),on(1))(t)}}function $u(e,t){return function(n){var r="function"==typeof e?e:function(){return e};if("function"==typeof t)return n.lift(new av(r,t));var i=Object.create(n,bv);return i.source=n,i.subjectFactory=r,i}}function Oe(e){return function(t){return t.lift(new cv(e,t))}}function dv(){return new nb}function Pe(){return function(e){return Zm()($u(dv)(e))}}function qn(e,t,n){var r=e&&"object"===oa(e)?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n};return function(e){return e.lift(ev(r))}}function ev(e){var t,n,r=e.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,o=void 0===(r=e.windowTime)?Number.POSITIVE_INFINITY:r,a=e.refCount,s=e.scheduler,u=0,c=!1,l=!1;return function(e){if(u++,!t||c){c=!1;var r=(t=new Qe(i,o,s)).subscribe(this);n=e.subscribe({next:function(e){t.next(e)},error:function(e){c=!0,t.error(e)},complete:function(){l=!0,n=void 0,t.complete()}}),l&&(n=void 0)}else r=t.subscribe(this);this.add((function(){u--,r.unsubscribe(),r=void 0,n&&!l&&a&&0===u&&(n.unsubscribe(),t=n=void 0)}))}}function Fc(e,t){return"function"==typeof t?function(n){return n.pipe(Fc((function(n,r){return Dc(e(n,r)).pipe(Da((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new fv(e))}}function Gc(e){return function(t){return t.lift(new gv(e))}}function sa(e,t,n){return function(r){return r.lift(new hv(e,t,n))}}function iv(e,t,n){return void 0===t&&(t=xd),void 0===n&&(n=jv),function(r){return r.lift(new kv(e,t,n.leading,n.trailing))}}function lv(e){e.subscriber.clearThrottle()}function mv(e,t,n){return void 0===n&&(n=xd),function(r){var i=e instanceof Date&&!isNaN(+e),o=i?+e-n.now():Math.abs(e);return r.lift(new nv(o,i,t,n))}}function Hb(e,t){return void 0===t&&(t=xd),mv(e,pa(new Pb),t)}function ov(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new pv(e,n))}}function rn(e){(aj||e)&&(sn.abort(),e&&(sn=new AbortController),aj=e)}function tn(e,t,n,r,i){e!==t&&un(t,(function(o,a){if(i||(i=new Ge),Db(o)){o=i;var s=bj(e,a),u=bj(t,a),c=o.get(u);if(c)cj(e,a,c);else{var l=void 0===(c=r?r(s,u,a+"",e,t,o):void 0);if(l){var f=pb(u),h=!f&&Lf(u),p=!f&&!h&&Oi(u);c=u,f||h||p?pb(s)?c=s:Bc(s)&&$d(s)?c=Ji(s):h?(l=!1,c=Im(u,!0)):p?(l=!1,c=vn(u,!0)):c=[]:wn(u)||Tf(u)?(c=s,Tf(s)?c=Re(s,Mf(s)):Db(s)&&!dj(s)||(c=Jm(u))):l=!1}l&&(o.set(u,c),tn(c,u,n,r,o),o.delete(u)),cj(e,a,c)}}else void 0===(s=r?r(bj(e,a),o,a+"",e,t,i):void 0)&&(s=o),cj(e,a,s)}),Mf)}function qv(e){var t=1,n=ej;1==(1>=arguments.length?0:arguments.length-1)?"number"==typeof(1>=arguments.length?void 0:arguments[1])?t=1>=arguments.length?void 0:arguments[1]:n=1>=arguments.length?void 0:arguments[1]:2==(1>=arguments.length?0:arguments.length-1)&&(t=1>=arguments.length?void 0:arguments[1],n=2>=arguments.length?void 0:arguments[2]);var r=t||1;return function(t){return t.pipe(dh((function(t,i){var o=n.now(),a=o-e;if((t=t.filter((function(e){return e.until>a}))).length>=r){var s=t[t.length-1],u=t[0].until+e*Math.floor(t.length/r);t.push({delay:s.until<o?u-o:u-s.until,until:u,value:i})}else t.push({delay:0,until:o,value:i});return t}),[]),Da((function(e){return e[e.length-1]})),$i((function(e){var t=wb(e.value);return e.delay?t.pipe(Yd(e.delay,n)):t})))}}function rv(e,t){var n=(t=void 0===t?{protocols:xn,makeWebSocket:yn}:t).protocols,r=void 0===n?xn:n,i=void 0===(t=t.makeWebSocket)?yn:t;return new ra((function(t){var n,o=new nb,a=i(e,r),s=!1,u=!1,c=!1,l=function(e){if(n)throw s=!0,e=Error("Web socket message factory function called more than once"),t.error(e),e;return n=e.subscribe((function(e){a.send(e)})),o};return a.onopen=function(){c=!0,u?(s=!0,a.close()):t.next(l)},a.onmessage=function(e){o.next(e.data)},a.onerror=function(e){s=!0,t.error(Error(e.message))},a.onclose=function(e){s||(s=!0,u?(t.complete(),o.complete()):t.error(Error(1e3===e.code?"Normal closure":e.reason)))},function(){u=!0,n&&n.unsubscribe(),s||(s=!0,c&&a.close())}}))}function eh(){this._listeners={}}function zn(e){return"undefined"!=typeof Float32Array?function(){function t(e,t,n){o[0]=e,t[n]=a[0],t[n+1]=a[1],t[n+2]=a[2],t[n+3]=a[3]}function n(e,t,n){o[0]=e,t[n]=a[3],t[n+1]=a[2],t[n+2]=a[1],t[n+3]=a[0]}function r(e,t){return a[0]=e[t],a[1]=e[t+1],a[2]=e[t+2],a[3]=e[t+3],o[0]}function i(e,t){return a[3]=e[t],a[2]=e[t+1],a[1]=e[t+2],a[0]=e[t+3],o[0]}var o=new Float32Array([-0]),a=new Uint8Array(o.buffer),s=128===a[3];e.writeFloatLE=s?t:n,e.writeFloatBE=s?n:t,e.readFloatLE=s?r:i,e.readFloatBE=s?i:r}():function(){function t(e,t,n,r){var i=0>t?1:0;if(i&&(t=-t),0===t)e(0<1/t?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(34028234663852886e22<t)e((i<<31|2139095040)>>>0,n,r);else if(11754943508222875e-54>t)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function n(e,t,n){return n=e(t,n),e=2*(n>>31)+1,t=n>>>23&255,n&=8388607,255===t?n?NaN:1/0*e:0===t?1401298464324817e-60*e*n:e*Math.pow(2,t-150)*(n+8388608)}e.writeFloatLE=t.bind(null,An),e.writeFloatBE=t.bind(null,Bn),e.readFloatLE=n.bind(null,Cn),e.readFloatBE=n.bind(null,Dn)}(),"undefined"!=typeof Float64Array?function(){function t(e,t,n){o[0]=e,t[n]=a[0],t[n+1]=a[1],t[n+2]=a[2],t[n+3]=a[3],t[n+4]=a[4],t[n+5]=a[5],t[n+6]=a[6],t[n+7]=a[7]}function n(e,t,n){o[0]=e,t[n]=a[7],t[n+1]=a[6],t[n+2]=a[5],t[n+3]=a[4],t[n+4]=a[3],t[n+5]=a[2],t[n+6]=a[1],t[n+7]=a[0]}function r(e,t){return a[0]=e[t],a[1]=e[t+1],a[2]=e[t+2],a[3]=e[t+3],a[4]=e[t+4],a[5]=e[t+5],a[6]=e[t+6],a[7]=e[t+7],o[0]}function i(e,t){return a[7]=e[t],a[6]=e[t+1],a[5]=e[t+2],a[4]=e[t+3],a[3]=e[t+4],a[2]=e[t+5],a[1]=e[t+6],a[0]=e[t+7],o[0]}var o=new Float64Array([-0]),a=new Uint8Array(o.buffer),s=128===a[7];e.writeDoubleLE=s?t:n,e.writeDoubleBE=s?n:t,e.readDoubleLE=s?r:i,e.readDoubleBE=s?i:r}():function(){function t(e,t,n,r,i,o){var a=0>r?1:0;if(a&&(r=-r),0===r)e(0,i,o+t),e(0<1/r?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(17976931348623157e292<r)e(0,i,o+t),e((a<<31|2146435072)>>>0,i,o+n);else if(22250738585072014e-324>r)e((r/=5e-324)>>>0,i,o+t),e((a<<31|r/4294967296)>>>0,i,o+n);else{var s=Math.floor(Math.log(r)/Math.LN2);1024===s&&(s=1023),e(4503599627370496*(r*=Math.pow(2,-s))>>>0,i,o+t),e((a<<31|s+1023<<20|1048576*r&1048575)>>>0,i,o+n)}}function n(e,t,n,r,i){return t=e(r,i+t),r=e(r,i+n),e=2*(r>>31)+1,t=4294967296*(1048575&r)+t,2047===(n=r>>>20&2047)?t?NaN:1/0*e:0===n?5e-324*e*t:e*Math.pow(2,n-1075)*(t+4503599627370496)}e.writeDoubleLE=t.bind(null,An,0,4),e.writeDoubleBE=t.bind(null,Bn,4,0),e.readDoubleLE=n.bind(null,Cn,0,4),e.readDoubleBE=n.bind(null,Dn,4,0)}(),e}function An(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function Bn(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function Cn(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function Dn(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function qb(e,t){this.lo=e>>>0,this.hi=t>>>0}function Uf(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function fj(){}function sv(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function xa(){this.len=0,this.tail=this.head=new Uf(fj,0,0),this.states=null}function gj(e,t,n){t[n]=255&e}function hj(e,t){this.len=e,this.next=void 0,this.val=t}function ij(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[n++]=127&e.lo|128,e.lo>>>=7;t[n++]=e.lo}function jj(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function Hc(){kj.call(this)}function tv(e,t,n){40>e.length?na.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}function pc(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function eb(e){this.buf=e,this.pos=0,this.len=e.length}function lj(){var e=new En(0,0),t=0;if(!(4<this.len-this.pos)){for(;3>t;++t){if(this.pos>=this.len)throw pc(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,128>this.buf[this.pos++])return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;4>t;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,128>this.buf[this.pos++])return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,128>this.buf[this.pos++])return e;if(t=0,4<this.len-this.pos){for(;5>t;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,128>this.buf[this.pos++])return e}else for(;5>t;++t){if(this.pos>=this.len)throw pc(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,128>this.buf[this.pos++])return e}throw Error("invalid varint encoding")}function fh(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function Fn(){if(this.pos+8>this.len)throw pc(this,8);return new En(fh(this.buf,this.pos+=4),fh(this.buf,this.pos+=4))}function ae(e){mj.call(this,e)}function Vf(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");na.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!n}function Sa(e){return"string"==typeof e&&/^[\s\w!#$%&()+,.:;<=>?@[\]^{|}~-]{1,64}$/.test(e)&&"null"!==e}function Gn(e){try{var t=e.split(".").map((function(e){return Number(e)}))}catch(e){return!1}if(4!==t.length||0===t[0])return!1;for(e=0;e<t.length;e++){var n=t[e];if(!Number.isInteger(n)||0>n||255<n)return!1}return!0}function Hn(e,t){if(!Array.isArray(t)||0===t.length||32<t.length||t.some((function(e){return 0===e.length||32<e.length})))throw new Z("arguments is not valid",bb);if(!Sa(e))throw new Z("ID is invalid",bb)}function Wf(e){var t=e.attributes,n=e.attrSizeMap,r=e.maxAttrsCount,i=e.maxAttrValueSize;if(e=e.maxTotalSize,!Be(t))throw new Z("attributes must be an object",bb);if(Object.keys(t).length>r)throw new dc("Exceed the limit of ".concat(r," attributes"),Se);if(0===Object.keys(t).length)throw new Z("The attributes is an empty object",bb);var o=0,a=0;for(t=Object.entries(t);a<t.length;a++){var s=Xa(t[a],2),u=s[1];s=new Blob([s[0]]).size;var c=new Blob([u]).size;if(0===s||32<s)throw new Z("Invalid attribute key",bb);if(c>i)throw new dc("Invalid attribute value, over the limit of ".concat(i," bytes"),Se);if("string"!=typeof u||0===u.length)throw new Z("Invalid attribute value",bb);o+=s,o+=c}if(o>e)throw new dc("The attributes size overflow",Se);if(void 0!==n){if(Object.keys(n).length>r)throw new dc("Exceed the limit of ".concat(r," attributes"),Se);for(o=r=0,n=Object.entries(n);o<n.length;o++){if(a=(t=Xa(n[o],2))[1],0===(t=new Blob([t[0]]).size))throw new Z("Invalid attribute key",bb);if(a>i)throw new dc("Invalid attribute value, over the limit of ".concat(i," bytes"),Se);r+=t,r+=a}if(r>e)throw new dc("The attributes size overflow",Se)}}function gh(e,t){return Math.floor(Math.random()*(Math.floor(t)-Math.ceil(e)+1))+e}function hh(){var e=gh(0,4294967295),t=gh(1,4294967295);return new ma(e,t,!0)}function rb(e){return e.toString().padEnd(32,"0")}function In(e,t){return new TypeError("Unexpected ".concat(e,": ").concat(t))}function Jn(e,t){return e=e.split(".").map((function(e){return Number(e)})),t=t.split(".").map((function(e){return Number(e)})),Math.sqrt(1e3*Math.pow(e[0]-t[0],2)+100*Math.pow(e[1]-t[1],2)+10*Math.pow(e[2]-t[2],2)+1*Math.pow(e[3]-t[3],2))}function Kn(e){return e.lessThanOrEqual(Number.MAX_SAFE_INTEGER)?e.toNumber():e.toString()}function nj(e,t){t="".concat(e).concat(t||"");var n=Ln.get(t)||1;return Ln.set(t,n+1),"".concat(e).concat(n)}function Mn(e,t){var n="number"==typeof t?t:void 0!==t&&"string"!=typeof t?t.code:void 0;return t="number"!=typeof t&&"string"!=typeof t&&void 0!==t&&void 0!==t.serverCode?t.serverCode:void 0,n="".concat(void 0!==n?" Error Code ".concat(n):"").concat(void 0!==t?", server Code ".concat(t):""),e="string"==typeof e&&e?ih(e):Array.isArray(e)&&"string"==typeof e[0]&&e[0]?ih(Nn.apply(void 0,[e[0]].concat(W(e.slice(1))))):"","".concat(""===n?"":"".concat(n," - ")).concat(e)}function uv(e,t){return oj.apply(this,arguments)}function oj(){return(oj=ja(M.mark((function e(t,n){return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.aborted){e.next=2;break}return e.abrupt("return");case 2:return e.abrupt("return",new Promise((function(e){setTimeout(e,t),null==n||n.addEventListener("abort",e)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jh(e,t,n){return pj.apply(this,arguments)}function pj(){return(pj=ja(M.mark((function e(t,n,r){var i,o,a,s,u,c,l,f,h,p,d,b,v,g,y,E,m,w,_,O,A,R,I,T,k,S;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.body,o=n.headers,a=void 0===o?{}:o,s=n.timeout,u=void 0===s?1e4:s,c=n.signal,l=n.withCredentials,f=void 0!==l&&l,h=(r||{}).useBinaryResponse,p=void 0!==h&&h,(d=new XMLHttpRequest).open("POST",t,!0),d.responseType=p?"arraybuffer":"text",d.withCredentials=f,d.timeout=u,b=i instanceof FormData,v=i instanceof Uint8Array,!(1<(g=Object.keys(a).filter((function(e){return"content-type"===e.toLowerCase()}))).length)){e.next=14;break}throw new RangeError("multiple content-type");case 14:0===g.length&&(v?a["Content-Type"]="application/octet-stream":b||(a["Content-Type"]="application/json"));case 15:if("setRequestHeader"in d){e.next=46;break}return d.abort(),e.next=19,fetch(t,{body:b||v?i:JSON.stringify(i),cache:"no-cache",credentials:f?"include":"same-origin",headers:a,method:"POST",mode:"cors",referrer:"no-referrer",signal:c});case 19:if(y=e.sent,!(200<=(E=y.status)&&300>E||304===E)){e.next=31;break}if(!p){e.next=27;break}return e.next=25,y.arrayBuffer();case 25:return m=e.sent,e.abrupt("return",{status:E,responseData:m});case 27:return e.next=29,y.text();case 29:return w=e.sent,e.abrupt("return",{status:E,responseText:w});case 31:return _=new Ja(["Post XHR failure, status %d",E]),e.prev=32,e.next=35,y.text();case 35:throw O=e.sent,_.statusCode=E,_.message=O||"Request failed, status ".concat(E),_;case 41:throw e.prev=41,e.t0=e.catch(32),_.statusCode=E,_.message="Request failed, status ".concat(E),_;case 46:if(0!==Object.keys(a).length)for(A=0,R=Object.entries(a);A<R.length;A++)I=Xa(R[A],2),T=I[0],k=I[1],d.setRequestHeader(T,k);return void 0!==c&&(S=function e(){d.abort(),c.removeEventListener("abort",e)},c.addEventListener("abort",S)),b||v?d.send(i):d.send(JSON.stringify(i)),e.abrupt("return",new Promise((function(e,t){d.onload=function(){var n=d.status;if(200<=n&&300>n||304===n)e(p?{status:n,responseData:d.response}:{status:n,responseText:d.responseText});else{var r=new Ja(["Post XHR failure, status %d",n]);r.statusCode=n,r.message=d.response||"Request failed, status ".concat(d.status),t(r)}},d.ontimeout=function(e){t(new Qb(["XHR request timed out after %d ms",u],{originalError:e}))},d.onerror=function(){var e=new Ja(["Post XHR failure, status %d",d.status]);e.statusCode=d.status,e.message=d.response||"Request failed, status ".concat(d.status),t(e)},d.onabort=function(){try{t(new DOMException("The request aborted.","AbortError"))}catch(n){var e=Error("The request aborted.");e.name="AbortError",t(e)}}})));case 50:case"end":return e.stop()}}),e,null,[[32,41]])})))).apply(this,arguments)}function On(e,t){if(!Be(e))throw new Z("message object is not a plain object",t);if(void 0===e.messageType)if(e.rawMessage instanceof Uint8Array){if(e.messageType="RAW",void 0!==e.text)throw new Z("Raw messages cannot have text property. Use description instead",t)}else{if("string"!=typeof e.text)throw new Z("messageType is undefined",t);if(e.messageType="TEXT",void 0!==e.rawMessage)throw new Z("Text messages cannot have rawMessage property",t)}}function kh(e){return qj.apply(this,arguments)}function qj(){return(qj=ja(M.mark((function e(t){var n,r,i,o,a,s,u,c,l,f,h,p,d,b,v,g,y,E,m,w;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.message,r=t.peerId,i=t.toPeer,o=t.session,a=t.errorCodes,s=t.diff,u=t.logger,void 0!==o){e.next=3;break}throw new aa("The client is not logged in. Cannot do the operation",a.NOT_LOGGED_IN);case 3:if(c=!1,"TEXT"!==n.messageType||!n.text.startsWith("AgoraRTMLegacyEndcallCompatibleMessagePrefix")||!i){e.next=11;break}if(l=n.text.split("_"),f=Xa(l,3),h=f[0],p=f[1],void 0!==f[2]&&Sa(p)&&"AgoraRTMLegacyEndcallCompatibleMessagePrefix"===h){e.next=10;break}throw new Z("Message is not valid",Xf);case 10:c=!0;case 11:if(d=Date.now(),b=o.messageSentTimes.length-1,!((v=o.messageSentTimes[b])&&v+3e3<d)){e.next=18;break}o.messageSentTimes=[d],e.next=29;break;case 18:g=b;case 19:if(!(0<=g)){e.next=28;break}if(!(o.messageSentTimes[g]+3e3<d)){e.next=23;break}return o.messageSentTimes=o.messageSentTimes.slice(g+1,b+1),e.abrupt("break",28);case 23:if(!(180<=b-g+1)){e.next=25;break}throw new dc("Message sent failed, exceeded the 180 message in 3 seconds",a.TOO_OFTEN);case 25:g--,e.next=19;break;case 28:o.messageSentTimes.push(d);case 29:e.t0=n.messageType,e.next="TEXT"===e.t0?32:"RAW"===e.t0?37:39;break;case 32:if(!c){e.next=36;break}return y=n.text.split("_"),E=Xa(y,3),m=E[1],w=E[2],u.info("[rtm-API] EndCall message send api is called"),e.abrupt("return",o.sendInvitationMessage({peerId:r,type:"CallCancel",extra:w,channelId:m,callId:"0"}));case 36:return e.abrupt("return",o.sendTextMessage(n.text,r,i,1e4-s));case 37:return void 0===n.description&&(n.description=""),e.abrupt("return",o.sendRawMessage(n.rawMessage,n.description,r,i,1e4-s));case 39:throw new Z("Invalid message type",Xf);case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vv(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=e.replace(/(https?:\/\/)?(www.)?/i,"");return t||(n=n.split(".").slice(e.length-2).join(".")),-1!==n.indexOf("/")?n.split("/")[0]:n}function Ka(e){if("string"!=typeof e)return"[Sensitive Info]";var t=Math.floor(.7*e.length),n=e.length;return Pn(e,t,n,"*".repeat(n-t))}function Qn(e,t,n){function r(i){if(void 0===e)return e;if(Hm(i))return i;if(Array.isArray(i))return i.map(r);var o={},a=0;for(i=lh(i);a<i.length;a++){var s=Xa(i[a],2),u=s[0];if("string"==typeof(s=s[1])&&n.includes(u)){o[u]="string"==typeof s?Ka(s):"[Sensitive Info]";break}t.includes(u)?o[u]="[Hidden Info]":o[u]=null==s?s:n.includes(u)?"[Sensitive Info]":r(s)}return o}return Array.isArray(e)?e.map(r):r(e)}function Rn(e){return Object.getOwnPropertyNames(e).forEach((function(t){"object"==oa(t=e[t])&&null!==t&&Rn(t)})),Object.freeze(e)}function Yf(e){return new TextDecoder("utf-8").decode(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}function mh(e){return(new TextEncoder).encode(e).length}function Sn(){for(var e=0,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(t=0;t<n.length;t++)e+=n[t].length;for(e=new Uint8Array(e),r=t=0;r<n.length;r++){var i=n[r];e.set(i,t),t+=i.length}return e}function Te(e,t,n){var r=e.match(/([^?#]+)(\?[^#]*)?(#.*)?/);if(e=null==r?void 0:r[1],r=null==r?void 0:r[2]){var i;for(r=r.substr(1).split("&"),i=0;i<r.length;i++)if(r[i].split("=")[0]==t){r[i]=t+"="+encodeURIComponent(n);break}return i==r.length&&r.push(t+"="+encodeURIComponent(n)),e+"?"+r.join("&")}return e+"?"+t+"="+encodeURIComponent(n)}function Pn(e,t,n,r){return"string"!=typeof e?"[Sensitive Info]":e.substring(0,t)+r+e.substring(n)}function Zf(e){return"string"==typeof e&&0!==e.length&&"false"!==e&&"null"!==e&&"undefined"!==e}function Tn(e){var t=[];return function e(n){if(null===n||"object"!==oa(n))return n;if(-1!==t.indexOf(n))return"[Circular]";if(t.push(n),"function"==typeof n.toJSON)try{var r=e(n.toJSON());return t.pop(),r}catch(e){return"[Throws: "+(e?e.message:"?")+"]"}return Array.isArray(n)?(r=n.map(e),t.pop(),r):(r=Object.keys(n).reduce((function(t,r){e:{if(wv.call(n,r))try{var i=n[r];break e}catch(e){i="[Throws: "+(e?e.message:"?")+"]";break e}i=n[r]}return t[r]=e(i),t}),{}),t.pop(),r)}(e)}function xv(e){if(!(100<(e=String(e)).length)&&(e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e))){var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"weeks":case"week":case"w":return 6048e5*t;case"days":case"day":case"d":return 864e5*t;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*t;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*t;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t}}}function nh(e,t,n,r){return Math.round(e/n)+" "+r+(t>=1.5*n?"s":"")}function yv(e){var t=e.areas,n=e.excludedArea;if(1===t.length&&t[0]===R.GLOBAL&&n===R.CHINA)return Ue([R.OVERSEA]);if(t.includes(R.GLOBAL)){if(e=$f(oh).filter((function(e){return e!==R.GLOBAL&&e!==R.OVERSEA})),n in ag){t=ag[n];var r=[].concat(W(null!=t?t:[]),[n]);return Ue(e.filter((function(e){return!r.includes(e)})))}if(Un(n)){var i=zv(n);return Ue(e.filter((function(e){return e!==n&&e!==i})))}}if(Un(n)||n in ag)return Ue(t);throw new Z("Invalid excludedArea area config")}function fb(e,t,n){void 0===n&&(n=Object.getOwnPropertyDescriptor(e,t));var r=n.value;return n.value=function(){for(var e=this,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];this.invokeTracker.apply(this,["%s: ".concat(0<i.length?"%s with args: ".concat(i.map((function(){return"%o"}))):"%s"),this.name,t].concat(W(i.map(Ve))));try{var a=r.apply(this,i)}catch(e){throw this.logError.apply(this,["".concat(void 0!==e.code?"Error Code ".concat(e.code,": "):"","%s failed").concat(0<i.length?" with args: ".concat(i.map((function(){return"%o"}))):""),t].concat(W(i.map(Ve)))),e.originalError&&this.logError(e.originalError),this.errorTracker(e),e}var s=Date.now();return ja(M.mark((function n(){var r,o;return M.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a;case 3:r=n.sent,n.next=12;break;case 6:return n.prev=6,n.t0=n.catch(0),e.logError.apply(e,["".concat(void 0!==n.t0.code?"Error Code ".concat(n.t0.code,": "):"","%s failed").concat(0<i.length?" with args: ".concat(i.map((function(){return"%o"}))):""),t].concat(W(i.map(Ve)))),n.t0.originalError&&e.logError(n.t0.originalError),e.errorTracker(n.t0),n.abrupt("return");case 12:r!==a?void 0===r?e.resultTracker("%s promise resolves after %dms",t,Date.now()-s):e.resultTracker("%s promise resolves after %dms, result is %o",t,Date.now()-s,Ve(r)):"Object"!==Xc(r)||Be(r)?e.resultTracker("%s result is %o",t,Ve(r)):e.resultTracker("%s result is %s",t,r.name||(null===(o=r.constructor)||void 0===o?void 0:o.name));case 13:case"end":return n.stop()}}),n,null,[[0,6]])})))(),a},n}function Ic(e,t,n){void 0===n&&(n=Object.getOwnPropertyDescriptor(e,t));var r=n.value;return n.value=function(){for(var e=this,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];this.invokeTracker.apply(this,["%s: ".concat(0<i.length?"%s with args: ".concat(i.map((function(){return"%o"}))):"%s"),this.name,t].concat(i));try{var a=r.apply(this,i)}catch(e){throw this.logError.apply(this,["".concat(void 0!==e.code?"Error Code ".concat(e.code,": "):"","%s failed").concat(0<i.length?" with args: ".concat(i.map((function(){return"%o"}))):""),t].concat(i)),e.originalError&&this.logError(e.originalError),this.errorTracker(e),e}var s=Date.now();return ja(M.mark((function n(){var r,o;return M.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a;case 3:r=n.sent,n.next=12;break;case 6:return n.prev=6,n.t0=n.catch(0),e.logError.apply(e,["".concat(void 0!==n.t0.code?"Error Code ".concat(n.t0.code,": "):"","%s failed").concat(0<i.length?" with args: ".concat(i.map((function(){return"%o"}))):""),t].concat(i)),n.t0.originalError&&e.logError(n.t0.originalError),e.errorTracker(n.t0),n.abrupt("return");case 12:r!==a?void 0===r?e.resultTracker("%s promise resolves after %dms",t,Date.now()-s):e.resultTracker("%s promise resolves after %dms, result is %o",t,Date.now()-s,r):"Object"!==Xc(r)||Be(r)?e.resultTracker("%s result is %o",t,r):e.resultTracker("%s result is %s",t,r.name||(null===(o=r.constructor)||void 0===o?void 0:o.name));case 13:case"end":return n.stop()}}),n,null,[[0,6]])})))(),a},n}function Av(e,t){var n="".concat(e,"Uri");if("number"!=typeof(n=rj[n])||0===n)throw new TypeError("Got Unknown URI Name");return t=new(e=Vn[e])(t),t=e.encode(t).finish(),new Bv({uri:n,data:t})}function Wn(e,t){var n=Zf(null);return"".concat(e.split(".").join("-"),".edge.").concat(n?null:t?"sd-rtn.com":"agora.io")}function xb(e,t,n){return sj.apply(this,arguments)}function sj(){return(sj=ja(M.mark((function e(t,n,r){var i,o,a,s=arguments;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=3<s.length&&void 0!==s[3]&&s[3],o=Cv[t].encode(n).finish(),a=function(){var e=ja(M.mark((function e(n){var s,u,c,l=arguments;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(3<(u=1<l.length&&void 0!==l[1]?l[1]:0))){e.next=3;break}return e.abrupt("return");case 3:if(c=Te(c=r?"https://".concat(null!==(s=null==ca?void 0:ca.PROXY_NGINX[0])&&void 0!==s?s:"webrtc-cloud-proxy.sd-rtn.com","/rs/?h=").concat(n,"&p=443&d=events/proto-raw"):"https://".concat(n,"/events/proto-raw"),"sentTs",Math.ceil(Date.now()/1e3).toString()),c=Te(c,"id",Dv[t].toString()),!i){e.next=9;break}return e.next=9,uv(1e4);case 9:return e.next=11,jh(c,{body:o,timeout:2e4,headers:{"Content-Type":"application/octet-stream"}}).catch((function(e){return a(n,u+1)}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.prev=3,e.next=6,a((null==ca?void 0:ca.EVENT_REPORT_DOMAIN[0])||Zf(null)&&null||"webcollector-rtm.agora.io");case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(3),e.next=12,a(ca&&Xn(1<(null==ca?void 0:ca.EVENT_REPORT_DOMAIN.length)?null==ca?void 0:ca.EVENT_REPORT_DOMAIN.slice(1):null==ca?void 0:ca.EVENT_REPORT_DOMAIN)||"rtm.statscollector.sd-rtn.com");case 12:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function yb(e){return void 0===e?ma.fromNumber(0):ma.fromNumber(Date.now()-e)}function ph(e,t){return ma.fromValue(e).eq(t)}function qh(e,t){var n=void 0===t?e.val:t,r=e.isBoolean;t=e.isNumber;var i=e.oneof,o=e.len;if(2!==[r,t,i].filter((function(e){return!e})).length)throw new TypeError("invalid field type");if(void 0!==n&&(e=!1,void 0!==i&&(i=tj(i),Ev(i,ph).length===i.length&&void 0!==Fv(i,(function(e){return ph(n,e)}))&&(e=!0)),r=void 0!==r&&(0===n||1===n)&&1===o,t=void 0!==t&&n.toString(2).length<=o,!(e||r||t)))throw Error("invalid field value")}function Yn(e){return e.reduce((function(e,t){return e.concat(t instanceof rh.UnsubscriptionError?t.errors:t)}),[])}function Gv(e,t){do{2147483647==bg?bg=0:bg++}while(We.hasOwnProperty(bg));var n=bg;return We[n]={callback:e,parameters:Array.prototype.slice.call(arguments,2)},uj.postMessage({name:"setInterval",fakeId:n,time:t}),n}function Zn(e){return function(){var t=e();if(!t)throw new aa("Client is not logged in. Cannot do the operation");return t}}var Va="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},sh=function(e){return e&&e.Math==Math&&e},Q=sh("object"==typeof globalThis&&globalThis)||sh("object"==typeof window&&window)||sh("object"==typeof self&&self)||sh("object"==typeof Va&&Va)||function(){return this}()||Function("return this")(),ia=function(e){try{return!!e()}catch(e){return!0}},ta=!ia((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),$n={}.propertyIsEnumerable,ao=Object.getOwnPropertyDescriptor,cg=ao&&!$n.call({1:2},1)?function(e){return!!(e=ao(this,e))&&e.enumerable}:$n,Jc=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Hv={}.toString,qc=function(e){return Hv.call(e).slice(8,-1)},Iv="".split,dg=ia((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==qc(e)?Iv.call(e,""):Object(e)}:Object,Bb=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},Ib=function(e){return dg(Bb(e))},va=function(e){return"object"==typeof e?null!==e:"function"==typeof e},Kc=function(e,t){if(!va(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!va(r=n.call(e))||"function"==typeof(n=e.valueOf)&&!va(r=n.call(e))||!t&&"function"==typeof(n=e.toString)&&!va(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},lb=function(e){return Object(Bb(e))},Jv={}.hasOwnProperty,ha=function(e,t){return Jv.call(lb(e),t)},Xe=Q.document,th=va(Xe)&&va(Xe.createElement),bo=!ta&&!ia((function(){return 7!=Object.defineProperty(th?Xe.createElement("div"):{},"a",{get:function(){return 7}}).a})),co=Object.getOwnPropertyDescriptor,Zb={f:ta?co:function(e,t){if(e=Ib(e),t=Kc(t,!0),bo)try{return co(e,t)}catch(e){}if(ha(e,t))return Jc(!cg.call(e,t),e[t])}},Ia=function(e){if(!va(e))throw TypeError(String(e)+" is not an object");return e},eo=Object.defineProperty,mb={f:ta?eo:function(e,t,n){if(Ia(e),t=Kc(t,!0),Ia(n),bo)try{return eo(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},gb=ta?function(e,t,n){return mb.f(e,t,Jc(1,n))}:function(e,t,n){return e[t]=n,e},vj=function(e,t){try{gb(Q,e,t)}catch(n){Q[e]=t}return t},yd=Q["__core-js_shared__"]||vj("__core-js_shared__",{}),Kv=Function.toString;"function"!=typeof yd.inspectSource&&(yd.inspectSource=function(e){return Kv.call(e)});var wj=yd.inspectSource,fo=Q.WeakMap,Lv="function"==typeof fo&&/native code/.test(wj(fo)),zd=tb((function(e){(e.exports=function(e,t){return yd[e]||(yd[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.12.1",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),Mv=0,Nv=Math.random(),Ye=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Mv+Nv).toString(36)},go=zd("keys"),uh=function(e){return go[e]||(go[e]=Ye(e))},Ze={},Ov=Q.WeakMap;if(Lv||yd.state)var be=yd.state||(yd.state=new Ov),Pv=be.get,ho=be.has,Qv=be.set,xj=function(e,t){if(ho.call(be,e))throw new TypeError("Object already initialized");return t.facade=e,Qv.call(be,e,t),t},vh=function(e){return Pv.call(be,e)||{}},yj=function(e){return ho.call(be,e)};else{var $e=uh("state");Ze[$e]=!0,xj=function(e,t){if(ha(e,$e))throw new TypeError("Object already initialized");return t.facade=e,gb(e,$e,t),t},vh=function(e){return ha(e,$e)?e[$e]:{}},yj=function(e){return ha(e,$e)}}var Za={set:xj,get:vh,has:yj,enforce:function(e){return yj(e)?vh(e):xj(e,{})},getterFor:function(e){return function(t){var n;if(!va(t)||(n=vh(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Wa=tb((function(e){var t=Za.get,n=Za.enforce,r=String(String).split("String");(e.exports=function(e,t,i,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable;if(o=!!o&&!!o.noTargetGet,"function"==typeof i){"string"!=typeof t||ha(i,"name")||gb(i,"name",t);var u=n(i);u.source||(u.source=r.join("string"==typeof t?t:""))}e===Q?s?e[t]=i:vj(t,i):(a?!o&&e[t]&&(s=!0):delete e[t],s?e[t]=i:gb(e,t,i))})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||wj(this)}))})),io=function(e){return"function"==typeof e?e:void 0},Lc=function(e,t){return 2>arguments.length?io(Q[e])||io(Q[e]):Q[e]&&Q[e][t]||Q[e]&&Q[e][t]},Rv=Math.ceil,Sv=Math.floor,rc=function(e){return isNaN(e=+e)?0:(0<e?Sv:Rv)(e)},Tv=Math.min,La=function(e){return 0<e?Tv(rc(e),9007199254740991):0},Uv=Math.max,Vv=Math.min,Rb=function(e,t){return 0>(e=rc(e))?Uv(e+t,0):Vv(e,t)},jo=function(e){return function(t,n,r){t=Ib(t);var i=La(t.length);if(r=Rb(r,i),e&&n!=n){for(;i>r;)if((n=t[r++])!=n)return!0}else for(;i>r;r++)if((e||r in t)&&t[r]===n)return e||r||0;return!e&&-1}},ko=jo(!0),zj=jo(!1),lo=function(e,t){e=Ib(e);var n,r=0,i=[];for(n in e)!ha(Ze,n)&&ha(e,n)&&i.push(n);for(;t.length>r;)ha(e,n=t[r++])&&(~zj(i,n)||i.push(n));return i},wh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Wv=wh.concat("length","prototype"),ce={f:Object.getOwnPropertyNames||function(e){return lo(e,Wv)}},eg={f:Object.getOwnPropertySymbols},mo=Lc("Reflect","ownKeys")||function(e){var t=ce.f(Ia(e)),n=eg.f;return n?t.concat(n(e)):t},no=function(e,t){for(var n=mo(t),r=mb.f,i=Zb.f,o=0;o<n.length;o++){var a=n[o];ha(e,a)||r(e,a,i(t,a))}},Xv=/#|\.prototype\./,Mc=function(e,t){return(e=Yv[Zv(e)])==$v||e!=aw&&("function"==typeof t?ia(t):!!t)},Zv=Mc.normalize=function(e){return String(e).replace(Xv,".").toLowerCase()},Yv=Mc.data={},aw=Mc.NATIVE="N",$v=Mc.POLYFILL="P",bw=Zb.f,ba=function(e,t){var n,r,i,o=e.target,a=e.global,s=e.stat;if(r=a?Q:s?Q[o]||vj(o,{}):(Q[o]||{}).prototype)for(i in t){var u=t[i],c=e.noTargetGet?(n=bw(r,i))&&n.value:r[i];if(!(n=Mc(a?i:o+(s?".":"#")+i,e.forced))&&void 0!==c){if(typeof u==typeof c)continue;no(u,c)}(e.sham||c&&c.sham)&&gb(u,"sham",!0);try{Wa(r,i,u,e)}catch(e){}}},Aj=function(){var e=Ia(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Nc=ia((function(){var e=/a/y;return e.lastIndex=2,null!=e.exec("abcd")})),cw=ia((function(){var e=/^r/gy;return e.lastIndex=2,null!=e.exec("str")})),xh=RegExp.prototype.exec,dw=zd("native-string-replace",String.prototype.replace),oo=xh,Bj=(c=/a/,b=/b*/g,xh.call(c,"a"),xh.call(b,"a"),0!==c.lastIndex||0!==b.lastIndex),po=Nc||cw,Cj=void 0!==/()??/.exec("")[1],c,b;(Bj||Cj||po)&&(oo=function(e){var t,n=po&&this.sticky,r=Aj.call(this),i=this.source,o=0,a=e;if(n){-1===(r=r.replace("y","")).indexOf("g")&&(r+="g"),a=String(e).slice(this.lastIndex),0<this.lastIndex&&(!this.multiline||this.multiline&&"\n"!==e[this.lastIndex-1])&&(i="(?: "+i+")",a=" "+a,o++);var s=new RegExp("^(?:"+i+")",r)}if(Cj&&(s=new RegExp("^"+i+"$(?!\\s)",r)),Bj)var u=this.lastIndex;var c=xh.call(n?s:this,a);return n?c?(c.input=c.input.slice(o),c[0]=c[0].slice(o),c.index=this.lastIndex,this.lastIndex+=c[0].length):this.lastIndex=0:Bj&&c&&(this.lastIndex=this.global?c.index+c[0].length:u),Cj&&c&&1<c.length&&dw.call(c[0],s,(function(){for(t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(c[t]=void 0)})),c});var fg=oo;ba({target:"RegExp",proto:!0,forced:/./.exec!==fg},{exec:fg});var af=Lc("navigator","userAgent")||"",qo=Q.process,ro=qo&&qo.versions,so=ro&&ro.v8;if(so)var Ad=so.split("."),Dj=4>Ad[0]?1:Ad[0]+Ad[1];else af&&(Ad=af.match(/Edge\/(\d+)/),(!Ad||74<=Ad[1])&&(Ad=af.match(/Chrome\/(\d+)/))&&(Dj=Ad[1]));var Bd=Dj&&+Dj,Oc=!!Object.getOwnPropertySymbols&&!ia((function(){return!String(Symbol())||!Symbol.sham&&Bd&&41>Bd})),to=Oc&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,gg=zd("wks"),hg=Q.Symbol,ew=to?hg:hg&&hg.withoutSetter||Ye,Ea=function(e){return ha(gg,e)&&(Oc||"string"==typeof gg[e])||(Oc&&ha(hg,e)?gg[e]=hg[e]:gg[e]=ew("Symbol."+e)),gg[e]},fw=Ea("species"),Ej=RegExp.prototype,gw=!ia((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),uo="$0"==="a".replace(/./,"$0"),vo=Ea("replace"),wo=!!/./[vo]&&""===/./[vo]("a","$0"),hw=!ia((function(){var e=/(?:)/,t=e.exec;return e.exec=function(){return t.apply(this,arguments)},2!==(e="ab".split(e)).length||"a"!==e[0]||"b"!==e[1]})),yh=function(e,t,n,r){var i=Ea(e),o=!ia((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),a=o&&!ia((function(){var t=!1,n=/a/;return"split"===e&&((n={constructor:{}}).constructor[fw]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!o||!a||"replace"===e&&(!gw||!uo||wo)||"split"===e&&!hw){var s=/./[i],u=(n=n(i,""[e],(function(e,t,n,r,i){var a=t.exec;return a===fg||a===Ej.exec?o&&!i?{done:!0,value:s.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:uo,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:wo}))[1];Wa(String.prototype,e,n[0]),Wa(Ej,i,2==t?function(e,t){return u.call(e,this,t)}:function(e){return u.call(e,this)})}r&&gb(Ej[i],"sham",!0)},iw=Ea("match"),Fj=function(e){var t;return va(e)&&(void 0!==(t=e[iw])?!!t:"RegExp"==qc(e))},Sb=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},jw=Ea("species"),de=function(e,t){var n;return void 0===(e=Ia(e).constructor)||null==(n=Ia(e)[jw])?t:Sb(n)},xo=function(e){return function(t,n){t=String(Bb(t)),n=rc(n);var r,i=t.length;if(0>n||n>=i)return e?"":void 0;var o=t.charCodeAt(n);return 55296>o||56319<o||n+1===i||56320>(r=t.charCodeAt(n+1))||57343<r?e?t.charAt(n):o:e?t.slice(n,n+2):r-56320+(o-55296<<10)+65536}},kw=xo(!1),yo=xo(!0),Gj=function(e,t,n){return t+(n?yo(e,t).length:1)},bf=function(e,t){var n=e.exec;if("function"==typeof n){if("object"!=typeof(e=n.call(e,t)))throw TypeError("RegExp exec method returned something other than an Object or null");return e}if("RegExp"!==qc(e))throw TypeError("RegExp#exec called on incompatible receiver");return fg.call(e,t)},lw=[].push,mw=Math.min;yh("split",2,(function(e,t,n){var r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,n){var r=String(Bb(this));if(0===(n=void 0===n?4294967295:n>>>0))return[];if(void 0===e)return[r];if(!Fj(e))return t.call(r,e,n);var i,o,a,s=[],u=0;for(e=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(i=fg.call(e,r))&&!((o=e.lastIndex)>u&&(s.push(r.slice(u,i.index)),1<i.length&&i.index<r.length&&lw.apply(s,i.slice(1)),a=i[0].length,u=o,s.length>=n));)e.lastIndex===i.index&&e.lastIndex++;return u===r.length?(a||!e.test(""))&&s.push(""):s.push(r.slice(u)),s.length>n?s.slice(0,n):s}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t;return[function(t,n){var i=Bb(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,i,n):r.call(String(i),t,n)},function(e,i){var o=n(r,e,this,i,r!==t);if(o.done)return o.value;var a=Ia(e);e=String(this);var s=de(a,RegExp);if(o=a.unicode,a=new s(Nc?"^(?:"+a.source+")":a,(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(Nc?"g":"y")),0===(i=void 0===i?4294967295:i>>>0))return[];if(0===e.length)return null===bf(a,e)?[e]:[];var u=0,c=0;for(s=[];c<e.length;){a.lastIndex=Nc?0:c;var l,f=bf(a,Nc?e.slice(c):e);if(null===f||(l=mw(La(a.lastIndex+(Nc?c:0)),e.length))===u)c=Gj(e,c,o);else{if(s.push(e.slice(u,c)),s.length===i)return s;for(u=1;u<=f.length-1;u++)if(s.push(f[u]),s.length===i)return s;c=u=l}}return s.push(e.slice(u)),s}]}),Nc);var nw=/^[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*/,ow=/[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*$/,Hj=function(e){return function(t){return t=String(Bb(t)),1&e&&(t=t.replace(nw,"")),2&e&&(t=t.replace(ow,"")),t}};Hj(1),Hj(2);var Ij=Hj(3),zh=Q.parseInt,pw=/^[+-]?0[Xx]/,zo=8!==zh("\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff08")||22!==zh("\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff0x16")?function(e,t){return e=Ij(String(e)),zh(e,t>>>0||(pw.test(e)?16:10))}:zh;ba({global:!0,forced:parseInt!=zo},{parseInt:zo});var Cd=function(e,t,n){if(Sb(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},Dd=Array.isArray||function(e){return"Array"==qc(e)},qw=Ea("species"),Ah=function(e,t){if(Dd(e)){var n=e.constructor;"function"!=typeof n||n!==Array&&!Dd(n.prototype)?va(n)&&(null===(n=n[qw])&&(n=void 0)):n=void 0}return new(void 0===n?Array:n)(0===t?0:t)},Ao=[].push,Ed=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,a=7==e,s=5==e||o;return function(u,c,l,f){var h=lb(u),p=dg(h);c=Cd(c,l,3),l=La(p.length);var d,b=0;for(f=f||Ah,u=t?f(u,l):n||a?f(u,0):void 0;l>b;b++)if((s||b in p)&&(d=c(f=p[b],b,h),e))if(t)u[b]=d;else if(d)switch(e){case 3:return!0;case 5:return f;case 6:return b;case 2:Ao.call(u,f)}else switch(e){case 4:return!1;case 7:Ao.call(u,f)}return o?-1:r||i?i:u}},ee=Ed(0),Bo=Ed(1),Co=Ed(2),rw=Ed(3),sw=Ed(4),Do=Ed(5),tw=Ed(6);Ed(7);var uw=Ea("species"),ig=function(e){return 51<=Bd||!ia((function(){var t=[];return(t.constructor={})[uw]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},vw=ig("filter");ba({target:"Array",proto:!0,forced:!vw},{filter:function(e){return Co(this,e,1<arguments.length?arguments[1]:void 0)}});var $c=Object.keys||function(e){return lo(e,wh)},ww=ia((function(){$c(1)}));ba({target:"Object",stat:!0,forced:ww},{keys:function(e){return $c(lb(e))}});var cf=function(e,t){var n=[][e];return!!n&&ia((function(){n.call(null,t||function(){throw 1},1)}))},xw=[].join,yw=dg!=Object,zw=cf("join",",");ba({target:"Array",proto:!0,forced:yw||!zw},{join:function(e){return xw.call(Ib(this),void 0===e?",":e)}});var Aw=ig("map");ba({target:"Array",proto:!0,forced:!Aw},{map:function(e){return Bo(this,e,1<arguments.length?arguments[1]:void 0)}});var Jj=function(e){var t=e.return;if(void 0!==t)return Ia(t.call(e)).value},df={},Bw=Ea("iterator"),Cw=Array.prototype,Kj=function(e){return void 0!==e&&(df.Array===e||Cw[Bw]===e)},ef=function(e,t,n){(t=Kc(t))in e?mb.f(e,t,Jc(0,n)):e[t]=n},Dw=Ea("toStringTag"),Eo={};Eo[Dw]="z";var Lj="[object z]"===String(Eo),Ew=Ea("toStringTag"),Fw="Arguments"==qc(function(){return arguments}()),ff=Lj?qc:function(e){var t;if(void 0===e)var n="Undefined";else{if(null===e)var r="Null";else{e:{var i=e=Object(e);try{r=i[Ew];break e}catch(e){}r=void 0}r="string"==typeof(n=r)?n:Fw?qc(e):"Object"==(t=qc(e))&&"function"==typeof e.callee?"Arguments":t}n=r}return n},Gw=Ea("iterator"),jg=function(e){if(null!=e)return e[Gw]||e["@@iterator"]||df[ff(e)]},fe=function(e){var t,n=lb(e),r="function"==typeof this?this:Array,i=arguments.length,o=1<i?arguments[1]:void 0,a=void 0!==o,s=jg(n),u=0;if(a&&(o=Cd(o,2<i?arguments[2]:void 0,2)),null==s||r==Array&&Kj(s)){var c=La(n.length);for(r=new r(c);c>u;u++)s=a?o(n[u],u):n[u],ef(r,u,s)}else for(i=(n=s.call(n)).next,r=new r;!(t=i.call(n)).done;u++){if(a){s=n;var l=o;t=[t.value,u];try{c=l(Ia(t)[0],t[1])}catch(e){throw Jj(s),e}}else c=t.value;ef(r,u,s=c)}return r.length=u,r},Fo=Ea("iterator"),Go=!1;try{var Hw=0,Ho={next:function(){return{done:!!Hw++}},return:function(){Go=!0}};Ho[Fo]=function(){return this},Array.from(Ho,(function(){throw 2}))}catch(c){}var Bh=function(e,t){if(!t&&!Go)return!1;var n=!1;try{(t={})[Fo]=function(){return{next:function(){return{done:n=!0}}}},e(t)}catch(e){}return n},Iw=!Bh((function(e){Array.from(e)}));ba({target:"Array",stat:!0,forced:Iw},{from:fe});var Io=!ia((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Jo=uh("IE_PROTO"),Jw=Object.prototype,nc=Io?Object.getPrototypeOf:function(e){return e=lb(e),ha(e,Jo)?e[Jo]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Jw:null},Mj=Ea("iterator"),Ko=!1,Kw=function(){return this},ge;if([].keys){var Lo=[].keys();if("next"in Lo){var Mo=nc(nc(Lo));Mo!==Object.prototype&&(ge=Mo)}else Ko=!0}(null==ge||ia((function(){var e={};return ge[Mj].call(e)!==e})))&&(ge={}),ha(ge,Mj)||gb(ge,Mj,Kw);var Ch=ge,Dh=Ko,No=ta?Object.defineProperties:function(e,t){Ia(e);for(var n,r=$c(t),i=r.length,o=0;i>o;)mb.f(e,n=r[o++],t[n]);return e},Nj=Lc("document","documentElement"),Oo=uh("IE_PROTO"),Oj=function(){},Pj,Eh=function(){try{Pj=document.domain&&new ActiveXObject("htmlfile")}catch(e){}if(Pj){var e=Pj;e.write("<script><\/script>"),e.close(),e=e.parentWindow.Object}else(e=th?Xe.createElement("iframe"):{}).style.display="none",Nj.appendChild(e),e.src="javascript:",(e=e.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),e=e.F;for(Eh=e,e=wh.length;e--;)delete Eh.prototype[wh[e]];return Eh()};Ze[Oo]=!0;var ec=Object.create||function(e,t){if(null!==e){Oj.prototype=Ia(e);var n=new Oj;Oj.prototype=null,n[Oo]=e}else n=Eh();return void 0===t?n:No(n,t)},Lw=mb.f,Po=Ea("toStringTag"),sc=function(e,t,n){e&&!ha(e=n?e:e.prototype,Po)&&Lw(e,Po,{configurable:!0,value:t})},Mw=function(){return this},Qo=function(e,t,n){return t+=" Iterator",e.prototype=ec(Ch,{next:Jc(1,n)}),sc(e,t,!1),df[t]=Mw,e},ob=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={};try{var n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set;n.call(t,[]),e=t instanceof Array}catch(e){}return function(t,r){if(Ia(t),!va(r)&&null!==r)throw TypeError("Can't set "+String(r)+" as a prototype");return e?n.call(t,r):t.__proto__=r,t}}():void 0),kg=Ea("iterator"),Nw=function(){return this},Qj=function(e,t,n,r,i,o,a){Qo(n,t,r),r=function(e){if(e===i&&h)return h;if(!Dh&&e in l)return l[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}};var s,u=t+" Iterator",c=!1,l=e.prototype,f=l[kg]||l["@@iterator"]||i&&l[i],h=!Dh&&f||r(i),p="Array"==t&&l.entries||f;if(p&&(e=nc(p.call(new e)),Ch!==Object.prototype&&e.next&&(nc(e)!==Ch&&(ob?ob(e,Ch):"function"!=typeof e[kg]&&gb(e,kg,Nw)),sc(e,u,!0))),"values"==i&&f&&"values"!==f.name&&(c=!0,h=function(){return f.call(this)}),l[kg]!==h&&gb(l,kg,h),df[t]=h,i){var d={values:r("values"),keys:o?h:r("keys"),entries:r("entries")};if(a)for(s in d)!Dh&&!c&&s in l||Wa(l,s,d[s]);else ba({target:t,proto:!0,forced:Dh||c},d)}return d},Ow=Za.set,Pw=Za.getterFor("String Iterator");Qj(String,"String",(function(e){Ow(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e=Pw(this),t=e.string,n=e.index;return n>=t.length?{value:void 0,done:!0}:(t=yo(t,n),e.index+=t.length,{value:t,done:!1})}));var Rj=Ea("unscopables"),Sj=Array.prototype;null==Sj[Rj]&&mb.f(Sj,Rj,{configurable:!0,value:ec(null)});var lg=function(e){Sj[Rj][e]=!0},Ro=!0;"find"in[]&&Array(1).find((function(){Ro=!1})),ba({target:"Array",proto:!0,forced:Ro},{find:function(e){return Do(this,e,1<arguments.length?arguments[1]:void 0)}}),lg("find");var So=function(e){var t=String(Bb(this)),n="";if(0>(e=rc(e))||1/0==e)throw RangeError("Wrong number of repetitions");for(;0<e;(e>>>=1)&&(t+=t))1&e&&(n+=t);return n};ba({target:"String",proto:!0},{repeat:So});var To=[].indexOf,Uo=!!To&&0>1/[1].indexOf(1,-0),Qw=cf("indexOf");ba({target:"Array",proto:!0,forced:Uo||!Qw},{indexOf:function(e){return Uo?To.apply(this,arguments)||0:zj(this,e,1<arguments.length?arguments[1]:void 0)}});var Rt=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,St=/CrOS/,Tt=/android|ipad|playbook|silk/i;Ae.isMobile=Ae,Ae.default=Ae,ba({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),ba({target:"Number",stat:!0},{isNaN:function(e){return e!=e}}),Q.Number.isNaN;var Rw=Lj?{}.toString:function(){return"[object "+ff(this)+"]"};Lj||Wa(Object.prototype,"toString",Rw,{unsafe:!0});var Fh=Q.Promise,gf=function(e,t,n){for(var r in t)Wa(e,r,t[r],n);return e},Vo=Ea("species"),mg=function(e){e=Lc(e);var t=mb.f;ta&&e&&!e[Vo]&&t(e,Vo,{configurable:!0,get:function(){return this}})},tc=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},ng=function(e,t){this.stopped=e,this.result=t},Gh=function(e,t,n){var r,i=!(!n||!n.AS_ENTRIES),o=!(!n||!n.IS_ITERATOR),a=!(!n||!n.INTERRUPTED),s=Cd(t,n&&n.that,1+i+a),u=function(e){return c&&Jj(c),new ng(!0,e)};if(t=function(e){return i?(Ia(e),a?s(e[0],e[1],u):s(e[0],e[1])):a?s(e,u):s(e)},o)var c=e;else{if("function"!=typeof(o=jg(e)))throw TypeError("Target is not iterable");if(Kj(o)){for(o=0,n=La(e.length);n>o;o++)if((r=t(e[o]))&&r instanceof ng)return r;return new ng(!1)}c=o.call(e)}for(e=c.next;!(o=e.call(c)).done;){try{r=t(o.value)}catch(e){throw Jj(c),e}if("object"==typeof r&&r&&r instanceof ng)return r}return new ng(!1)},Wo=/(?:iphone|ipod|ipad).*applewebkit/i.test(af),ad="process"==qc(Q.process),Hh=Q.location,Tj=Q.setImmediate,Xo=Q.clearImmediate,Sw=Q.process,Yo=Q.MessageChannel,Uj=Q.Dispatch,Vj=0,og={},Wj=function(e){if(og.hasOwnProperty(e)){var t=og[e];delete og[e],t()}},Xj=function(e){return function(){Wj(e)}},Zo=function(e){Wj(e.data)},$o=function(e){Q.postMessage(e+"",Hh.protocol+"//"+Hh.host)};if(!Tj||!Xo)if(Tj=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return og[++Vj]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},pg(Vj),Vj},Xo=function(e){delete og[e]},ad)var pg=function(e){Sw.nextTick(Xj(e))};else if(Uj&&Uj.now)pg=function(e){Uj.now(Xj(e))};else if(Yo&&!Wo){var ap=new Yo,bp=ap.port2;ap.port1.onmessage=Zo,pg=Cd(bp.postMessage,bp,1)}else Q.addEventListener&&"function"==typeof postMessage&&!Q.importScripts&&Hh&&"file:"!==Hh.protocol&&!ia($o)?(pg=$o,Q.addEventListener("message",Zo,!1)):pg="onreadystatechange"in(th?Xe.createElement("script"):{})?function(e){Nj.appendChild(th?Xe.createElement("script"):{}).onreadystatechange=function(){Nj.removeChild(this),Wj(e)}}:function(e){setTimeout(Xj(e),0)};var Yj=Tj,Tw=/web0s(?!.*chrome)/i.test(af),Uw=Zb.f,cp=Q.MutationObserver||Q.WebKitMutationObserver,dp=Q.document,ep=Q.process,Ih=Q.Promise,fp=Uw(Q,"queueMicrotask"),gp=fp&&fp.value,he,qg;if(!gp){var Kh=function(){var e;for(ad&&(e=ep.domain)&&e.exit();he;){var t=he.fn;he=he.next;try{t()}catch(e){throw he?Jh():qg=void 0,e}}qg=void 0,e&&e.enter()};if(Wo||ad||Tw||!cp||!dp)if(Ih&&Ih.resolve){var Zj=Ih.resolve(void 0);Zj.constructor=Ih;var Vw=Zj.then,Jh=function(){Vw.call(Zj,Kh)}}else Jh=ad?function(){ep.nextTick(Kh)}:function(){Yj.call(Q,Kh)};else{var hp=!0,ip=dp.createTextNode("");new cp(Kh).observe(ip,{characterData:!0}),Jh=function(){ip.data=hp=!hp}}}var jp=gp||function(e){e={fn:e,next:void 0},qg&&(qg.next=e),he||(he=e,Jh()),qg=e},Ww=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=Sb(t),this.reject=Sb(n)},ak={f:function(e){return new Ww(e)}},Xw=function(e,t){var n=Q.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))},bk=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Yw="object"==typeof window,Zw=Ea("species"),kp=Za.get,$w=Za.set,ax=Za.getterFor("Promise"),ie=Fh&&Fh.prototype,Tb=Fh,Lh=ie,lp=Q.TypeError,ck=Q.document,dk=Q.process,hf=ak.f,bx=hf,cx=!!(ck&&ck.createEvent&&Q.dispatchEvent),mp="function"==typeof PromiseRejectionEvent,np=!1,rg=Mc("Promise",(function(){var e=wj(Tb)!==String(Tb);if(!e&&66===Bd)return!0;if(51<=Bd&&/native code/.test(Tb))return!1;var t=new Tb((function(e){e(1)})),n=function(e){e((function(){}),(function(){}))};return(t.constructor={})[Zw]=n,!(np=t.then((function(){}))instanceof n)||!e&&Yw&&!mp})),dx=rg||!Bh((function(e){Tb.all(e).catch((function(){}))})),op=function(e){var t;return!(!va(e)||"function"!=typeof(t=e.then))&&t},ek=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;jp((function(){for(var r=e.value,i=1==e.state,o=0;n.length>o;){var a,s=n[o++],u=i?s.ok:s.fail,c=s.resolve,l=s.reject,f=s.domain;try{if(u){if(i||(2===e.rejection&&ex(e),e.rejection=1),!0===u)var h=r;else if(f&&f.enter(),h=u(r),f){f.exit();var p=!0}h===s.promise?l(lp("Promise-chain cycle")):(a=op(h))?a.call(h,c,l):c(h)}else l(r)}catch(e){f&&!p&&f.exit(),l(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&fx(e)}))}},pp=function(e,t,n){var r;if(cx){var i=ck.createEvent("Event");i.promise=t,i.reason=n,i.initEvent(e,!1,!0),Q.dispatchEvent(i)}else i={promise:t,reason:n};!mp&&(r=Q["on"+e])?r(i):"unhandledrejection"===e&&Xw("Unhandled promise rejection",n)},fx=function(e){Yj.call(Q,(function(){var t=e.facade,n=e.value;if(1!==e.rejection&&!e.parent){var r=bk((function(){ad?dk.emit("unhandledRejection",n,t):pp("unhandledrejection",t,n)}));if(e.rejection=ad||1!==e.rejection&&!e.parent?2:1,r.error)throw r.value}}))},ex=function(e){Yj.call(Q,(function(){var t=e.facade;ad?dk.emit("rejectionHandled",t):pp("rejectionhandled",t,e.value)}))},jf=function(e,t,n){return function(r){e(t,r,n)}},kf=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,ek(e,!0))},fk=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw lp("Promise can't be resolved itself");var r=op(t);r?jp((function(){var n={done:!1};try{r.call(t,jf(fk,n,e),jf(kf,n,e))}catch(t){kf(n,t,e)}})):(e.value=t,e.state=1,ek(e,!1))}catch(t){kf({done:!1},t,e)}}};if(rg){Tb=function(e){tc(this,Tb,"Promise"),Sb(e),gk.call(this);var t=kp(this);try{e(jf(fk,t),jf(kf,t))}catch(e){kf(t,e)}},Lh=Tb.prototype;var gk=function(e){$w(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})};gk.prototype=gf(Lh,{then:function(e,t){var n=ax(this),r=hf(de(this,Tb));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=ad?dk.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&ek(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}});var gx=function(){var e=new gk,t=kp(e);this.promise=e,this.resolve=jf(fk,t),this.reject=jf(kf,t)};if(ak.f=hf=function(e){return e===Tb||e===hx?new gx(e):bx(e)},"function"==typeof Fh&&ie!==Object.prototype){var ix=ie.then;np||(Wa(ie,"then",(function(e,t){var n=this;return new Tb((function(e,t){ix.call(n,e,t)})).then(e,t)}),{unsafe:!0}),Wa(ie,"catch",Lh.catch,{unsafe:!0}));try{delete ie.constructor}catch(c){}ob&&ob(ie,Lh)}}ba({global:!0,wrap:!0,forced:rg},{Promise:Tb}),sc(Tb,"Promise",!1),mg("Promise");var hx=Lc("Promise");ba({target:"Promise",stat:!0,forced:rg},{reject:function(e){var t=hf(this);return t.reject.call(void 0,e),t.promise}}),ba({target:"Promise",stat:!0,forced:rg},{resolve:function(e){if(Ia(this),!va(e)||e.constructor!==this){var t=ak.f(this);(0,t.resolve)(e),e=t.promise}return e}}),ba({target:"Promise",stat:!0,forced:dx},{all:function(e){var t=this,n=hf(t),r=n.resolve,i=n.reject,o=bk((function(){var n=Sb(t.resolve),o=[],a=0,s=1;Gh(e,(function(e){var u=a++,c=!1;o.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,o[u]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=hf(t),r=n.reject,i=bk((function(){var i=Sb(t.resolve);Gh(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var jx=Math.floor,kx="".replace,lx=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,mx=/\$([$&'`]|\d{1,2})/g,nx=function(e,t,n,r,i,o){var a=n+e.length,s=r.length,u=mx;return void 0!==i&&(i=lb(i),u=lx),kx.call(o,u,(function(o,u){switch(u.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(a);case"<":o=i[u.slice(1,-1)];break;default:var c=+u;if(0===c)return o;if(c>s)return 0===(c=jx(c/10))?o:c<=s?void 0===r[c-1]?u.charAt(1):r[c-1]+u.charAt(1):o;o=r[c-1]}return void 0===o?"":o}))},ox=Math.max,px=Math.min;yh("replace",2,(function(e,t,n,r){var i=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=r.REPLACE_KEEPS_$0,a=i?"$":"$0";return[function(n,r){var i=Bb(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!i&&o||"string"==typeof r&&-1===r.indexOf(a)){var s=n(t,e,this,r);if(s.done)return s.value}var u=Ia(e);e=String(this),(s="function"==typeof r)||(r=String(r));var c=u.global;if(c){var l=u.unicode;u.lastIndex=0}for(var f=[];;){var h=bf(u,e);if(null===h)break;if(f.push(h),!c)break;""===String(h[0])&&(u.lastIndex=Gj(e,La(u.lastIndex),l))}for(l="",c=u=0;c<f.length;c++){h=f[c];for(var p=String(h[0]),d=ox(px(rc(h.index),e.length),0),b=[],v=1;v<h.length;v++){var g=b,y=h[v];g.push.call(g,void 0===y?y:String(y))}h=h.groups,s?(b=[p].concat(b,d,e),void 0!==h&&b.push(h),h=String(r.apply(void 0,b))):h=nx(p,e,d,b,h,r),d>=u&&(l+=e.slice(u,d)+h,u=d+p.length)}return l+e.slice(u)}]}));var qx=ig("slice"),rx=Ea("species"),sx=[].slice,tx=Math.max;ba({target:"Array",proto:!0,forced:!qx},{slice:function(e,t){var n=Ib(this),r=La(n.length);if(e=Rb(e,r),t=Rb(void 0===t?r:t,r),Dd(n)){var i=n.constructor;if("function"!=typeof i||i!==Array&&!Dd(i.prototype)?va(i)&&(null===(i=i[rx])&&(i=void 0)):i=void 0,i===Array||void 0===i)return sx.call(n,e,t)}for(i=new(void 0===i?Array:i)(tx(t-e,0)),r=0;e<t;e++,r++)e in n&&ef(i,r,n[e]);return i.length=r,i}});var ux=Za.set,vx=Za.getterFor("Array Iterator"),Fd=Qj(Array,"Array",(function(e,t){ux(this,{type:"Array Iterator",target:Ib(e),index:0,kind:t})}),(function(){var e=vx(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");df.Arguments=df.Array,lg("keys"),lg("values"),lg("entries");var qp="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,lf=function(e){if(void 0===e)return 0;e=rc(e);var t=La(e);if(e!==t)throw RangeError("Wrong length or index");return t},wx=Math.abs,bd=Math.pow,xx=Math.floor,yx=Math.log,zx=Math.LN2,rp=function(e){var t=lb(this),n=La(t.length),r=arguments.length,i=Rb(1<r?arguments[1]:void 0,n);for(n=void 0===(r=2<r?arguments[2]:void 0)?n:Rb(r,n);n>i;)t[i++]=e;return t},Ax=ce.f,Bx=mb.f,mf=Za.get,sp=Za.set,uc=Q.ArrayBuffer,Ub=uc,vc=Q.DataView,Mh=vc&&vc.prototype,tp=Object.prototype,Nh=Q.RangeError,up=function(e,t,n){var r,i=Array(n),o=(1<<(n=8*n-t-1))-1,a=o>>1,s=23===t?bd(2,-24)-bd(2,-77):0,u=0>e||0===e&&0>1/e?1:0,c=0;if((e=wx(e))!=e||1/0===e){e=e!=e?1:0;var l=o}else l=xx(yx(e)/zx),1>e*(r=bd(2,-l))&&(l--,r*=2),2<=(e=1<=l+a?e+s/r:e+s*bd(2,1-a))*r&&(l++,r/=2),l+a>=o?(e=0,l=o):1<=l+a?(e=(e*r-1)*bd(2,t),l+=a):(e=e*bd(2,a-1)*bd(2,t),l=0);for(;8<=t;i[c++]=255&e,e/=256,t-=8);for(l=l<<t|e,n+=t;0<n;i[c++]=255&l,l/=256,n-=8);return i[--c]|=128*u,i},vp=function(e,t){var n=e.length,r=8*n-t-1,i=(1<<r)-1,o=i>>1;r-=7,--n;var a=e[n--],s=127&a;for(a>>=7;0<r;s=256*s+e[n],n--,r-=8);var u=s&(1<<-r)-1;for(s>>=-r,r+=t;0<r;u=256*u+e[n],n--,r-=8);if(0===s)s=1-o;else{if(s===i)return u?NaN:a?-1/0:1/0;u+=bd(2,t),s-=o}return(a?-1:1)*u*bd(2,s-t)},wp=function(e){return[255&e]},xp=function(e){return[255&e,e>>8&255]},yp=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},zp=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Cx=function(e){return up(e,23,4)},Dx=function(e){return up(e,52,8)},Oh=function(e,t){Bx(e.prototype,t,{get:function(){return mf(this)[t]}})},Gd=function(e,t,n,r){n=lf(n);var i=mf(e);if(n+t>i.byteLength)throw Nh("Wrong index");return e=mf(i.buffer).bytes,n+=i.byteOffset,t=e.slice(n,n+t),r?t:t.reverse()},Hd=function(e,t,n,r,i,o){n=lf(n);var a=mf(e);if(n+t>a.byteLength)throw Nh("Wrong index");for(e=mf(a.buffer).bytes,n+=a.byteOffset,r=r(+i),i=0;i<t;i++)e[n+i]=r[o?i:t-i-1]};if(qp){if(!ia((function(){uc(1)}))||!ia((function(){new uc(-1)}))||ia((function(){return new uc,new uc(1.5),new uc(NaN),"ArrayBuffer"!=uc.name}))){Ub=function(e){return tc(this,Ub),new uc(lf(e))};for(var Ex=Ub.prototype=uc.prototype,Ap=Ax(uc),Bp=0,hk;Ap.length>Bp;)(hk=Ap[Bp++])in Ub||gb(Ub,hk,uc[hk]);Ex.constructor=Ub}ob&&nc(Mh)!==tp&&ob(Mh,tp);var Ph=new vc(new Ub(2)),Cp=Mh.setInt8;Ph.setInt8(0,2147483648),Ph.setInt8(1,2147483649),!Ph.getInt8(0)&&Ph.getInt8(1)||gf(Mh,{setInt8:function(e,t){Cp.call(this,e,t<<24>>24)},setUint8:function(e,t){Cp.call(this,e,t<<24>>24)}},{unsafe:!0})}else Ub=function(e){tc(this,Ub,"ArrayBuffer"),e=lf(e),sp(this,{bytes:rp.call(Array(e),0),byteLength:e}),ta||(this.byteLength=e)},vc=function(e,t,n){tc(this,vc,"DataView"),tc(e,Ub,"DataView");var r=mf(e).byteLength;if(0>(t=rc(t))||t>r)throw Nh("Wrong offset");if(t+(n=void 0===n?r-t:La(n))>r)throw Nh("Wrong length");sp(this,{buffer:e,byteLength:n,byteOffset:t}),ta||(this.buffer=e,this.byteLength=n,this.byteOffset=t)},ta&&(Oh(Ub,"byteLength"),Oh(vc,"buffer"),Oh(vc,"byteLength"),Oh(vc,"byteOffset")),gf(vc.prototype,{getInt8:function(e){return Gd(this,1,e)[0]<<24>>24},getUint8:function(e){return Gd(this,1,e)[0]},getInt16:function(e){var t=Gd(this,2,e,1<arguments.length?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Gd(this,2,e,1<arguments.length?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return zp(Gd(this,4,e,1<arguments.length?arguments[1]:void 0))},getUint32:function(e){return zp(Gd(this,4,e,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(e){return vp(Gd(this,4,e,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(e){return vp(Gd(this,8,e,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(e,t){Hd(this,1,e,wp,t)},setUint8:function(e,t){Hd(this,1,e,wp,t)},setInt16:function(e,t){Hd(this,2,e,xp,t,2<arguments.length?arguments[2]:void 0)},setUint16:function(e,t){Hd(this,2,e,xp,t,2<arguments.length?arguments[2]:void 0)},setInt32:function(e,t){Hd(this,4,e,yp,t,2<arguments.length?arguments[2]:void 0)},setUint32:function(e,t){Hd(this,4,e,yp,t,2<arguments.length?arguments[2]:void 0)},setFloat32:function(e,t){Hd(this,4,e,Cx,t,2<arguments.length?arguments[2]:void 0)},setFloat64:function(e,t){Hd(this,8,e,Dx,t,2<arguments.length?arguments[2]:void 0)}});sc(Ub,"ArrayBuffer"),sc(vc,"DataView");var sg={ArrayBuffer:Ub,DataView:vc},ik=sg.ArrayBuffer,Dp=sg.DataView,Ep=ik.prototype.slice,Fx=ia((function(){return!new ik(2).slice(1,void 0).byteLength}));ba({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:Fx},{slice:function(e,t){if(void 0!==Ep&&void 0===t)return Ep.call(Ia(this),e);var n=Ia(this).byteLength;e=Rb(e,n),t=Rb(void 0===t?n:t,n),n=new(de(this,ik))(La(t-e));for(var r=new Dp(this),i=new Dp(n),o=0;e<t;)i.setUint8(o++,r.getUint8(e++));return n}});var Gx=mb.f,Qh=Q.Int8Array,jk=Qh&&Qh.prototype,Fp=Q.Uint8ClampedArray,Gp=Fp&&Fp.prototype,Pc=Qh&&nc(Qh),wc=jk&&nc(jk),Hp=Object.prototype,Ip=Hp.isPrototypeOf,Jp=Ea("toStringTag"),kk=Ye("TYPED_ARRAY_TAG"),cd=qp&&!!ob&&"Opera"!==ff(Q.opera),Kp=!1,Vb,Qc={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Hx={BigInt64Array:8,BigUint64Array:8},Rh=function(e){return!!va(e)&&(e=ff(e),ha(Qc,e)||ha(Hx,e))};for(Vb in Qc)Q[Vb]||(cd=!1);if((!cd||"function"!=typeof Pc||Pc===Function.prototype)&&(Pc=function(){throw TypeError("Incorrect invocation")},cd))for(Vb in Qc)Q[Vb]&&ob(Q[Vb],Pc);if((!cd||!wc||wc===Hp)&&(wc=Pc.prototype,cd))for(Vb in Qc)Q[Vb]&&ob(Q[Vb].prototype,wc);if(cd&&nc(Gp)!==wc&&ob(Gp,wc),ta&&!ha(wc,Jp))for(Vb in Kp=!0,Gx(wc,Jp,{get:function(){return va(this)?this[kk]:void 0}}),Qc)Q[Vb]&&gb(Q[Vb],kk,Vb);var tg=cd,Lp=Kp&&kk,Ta=function(e){if(Rh(e))return e;throw TypeError("Target is not a typed array")},nf=function(e){if(ob){if(Ip.call(Pc,e))return e}else for(var t in Qc)if(ha(Qc,Vb)){var n=Q[t];if(n&&(e===n||Ip.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},Qa=function(e,t,n){if(ta){if(n)for(var r in Qc){var i=Q[r];if(i&&ha(i.prototype,e))try{delete i.prototype[e]}catch(e){}}wc[e]&&!n||Wa(wc,e,n?t:cd&&jk[e]||t)}},Mp=function(e,t,n){var r,i;if(ta){if(ob){if(n)for(r in Qc)if((i=Q[r])&&ha(i,e))try{delete i[e]}catch(e){}if(Pc[e]&&!n)return;try{return Wa(Pc,e,n?t:cd&&Pc[e]||t)}catch(e){}}for(r in Qc)!(i=Q[r])||i[e]&&!n||Wa(i,e,t)}},Np=Pc,ug=wc,Ix=Q.ArrayBuffer,je=Q.Int8Array,lk=!tg||!ia((function(){je(1)}))||!ia((function(){new je(-1)}))||!Bh((function(e){new je,new je(null),new je(1.5),new je(e)}),!0)||ia((function(){return 1!==new je(new Ix(2),1,void 0).length})),Sh=function(e,t){if(0>(e=rc(e)))throw RangeError("The argument can't be less than 0");if(e%t)throw RangeError("Wrong offset");return e},mk=function(e){var t=lb(e),n=arguments.length,r=1<n?arguments[1]:void 0,i=void 0!==r,o=jg(t);if(null!=o&&!Kj(o)){var a=o.call(t),s=a.next;for(t=[];!(o=s.call(a)).done;)t.push(o.value)}for(i&&2<n&&(r=Cd(r,arguments[2],2)),o=La(t.length),a=new(nf(this))(o),n=0;o>n;n++)a[n]=i?r(t[n],n):t[n];return a},Th=function(e,t,n){var r,i;return ob&&"function"==typeof(r=t.constructor)&&r!==n&&va(i=r.prototype)&&i!==n.prototype&&ob(e,i),e},vg=tb((function(e){var t=ce.f,n=Za.get,r=Za.set,i=mb.f,o=Zb.f,a=Math.round,s=Q.RangeError,u=sg.ArrayBuffer,c=sg.DataView,l=function(e,t){var n=0,r=t.length;for(e=new(nf(e))(r);r>n;)e[n]=t[n++];return e},f=function(e,t){i(e,t,{get:function(){return n(this)[t]}})},h=function(e){var t;return e instanceof u||"ArrayBuffer"==(t=ff(e))||"SharedArrayBuffer"==t},p=function(e,t){return Rh(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},d=function(e,t){return p(e,t=Kc(t,!0))?Jc(2,e[t]):o(e,t)},b=function(e,t,n){return!(p(e,t=Kc(t,!0))&&va(n)&&ha(n,"value"))||ha(n,"get")||ha(n,"set")||n.configurable||ha(n,"writable")&&!n.writable||ha(n,"enumerable")&&!n.enumerable?i(e,t,n):(e[t]=n.value,e)};ta?(tg||(Zb.f=d,mb.f=b,f(ug,"buffer"),f(ug,"byteOffset"),f(ug,"byteLength"),f(ug,"length")),ba({target:"Object",stat:!0,forced:!tg},{getOwnPropertyDescriptor:d,defineProperty:b}),e.exports=function(e,o,f){var p=e.match(/\d+$/)[0]/8,d=e+(f?"Clamped":"")+"Array",b="get"+e,v="set"+e,g=Q[d],y=g;e=y&&y.prototype;var E={},m=function(e,t){i(e,t,{get:function(){var e=n(this);return e.view[b](t*p+e.byteOffset,!0)},set:function(e){var r=n(this);f&&(e=0>(e=a(e))?0:255<e?255:255&e),r.view[v](t*p+r.byteOffset,e,!0)},enumerable:!0})};tg?lk&&(y=o((function(e,t,n,r){return tc(e,y,d),Th(va(t)?h(t)?void 0!==r?new g(t,Sh(n,p),r):void 0!==n?new g(t,Sh(n,p)):new g(t):Rh(t)?l(y,t):mk.call(y,t):new g(lf(t)),e,y)})),ob&&ob(y,Np),ee(t(g),(function(e){e in y||gb(y,e,g[e])})),y.prototype=e):(y=o((function(e,t,n,i){tc(e,y,d);var o=0,a=0;if(va(t)){if(!h(t))return Rh(t)?l(y,t):mk.call(y,t);var f=t;if(a=Sh(n,p),t=t.byteLength,void 0===i){if(t%p)throw s("Wrong length");if(0>(i=t-a))throw s("Wrong length")}else if((i=La(i)*p)+a>t)throw s("Wrong length");t=i/p}else t=lf(t),f=new u(i=t*p);for(r(e,{buffer:f,byteOffset:a,byteLength:i,length:t,view:new c(f)});o<t;)m(e,o++)})),ob&&ob(y,Np),e=y.prototype=ec(ug)),e.constructor!==y&&gb(e,"constructor",y),Lp&&gb(e,Lp,d),E[d]=y,ba({global:!0,forced:y!=g,sham:!tg},E),"BYTES_PER_ELEMENT"in y||gb(y,"BYTES_PER_ELEMENT",p),"BYTES_PER_ELEMENT"in e||gb(e,"BYTES_PER_ELEMENT",p),mg(d)}):e.exports=function(){}}));vg("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var Jx=Math.min,Kx=[].copyWithin||function(e,t){var n=lb(this),r=La(n.length),i=Rb(e,r),o=Rb(t,r),a=2<arguments.length?arguments[2]:void 0;for(r=Jx((void 0===a?r:Rb(a,r))-o,r-i),a=1,o<i&&i<o+r&&(a=-1,o+=r-1,i+=r-1);0<r--;)o in n?n[i]=n[o]:delete n[i],i+=a,o+=a;return n};Qa("copyWithin",(function(e,t){return Kx.call(Ta(this),e,t,2<arguments.length?arguments[2]:void 0)})),Qa("every",(function(e){return sw(Ta(this),e,1<arguments.length?arguments[1]:void 0)})),Qa("fill",(function(e){return rp.apply(Ta(this),arguments)})),Qa("filter",(function(e){var t=Co(Ta(this),e,1<arguments.length?arguments[1]:void 0),n=de(this,this.constructor),r=0,i=t.length;for(n=new(nf(n))(i);i>r;)n[r]=t[r++];return n})),Qa("find",(function(e){return Do(Ta(this),e,1<arguments.length?arguments[1]:void 0)})),Qa("findIndex",(function(e){return tw(Ta(this),e,1<arguments.length?arguments[1]:void 0)})),Qa("forEach",(function(e){ee(Ta(this),e,1<arguments.length?arguments[1]:void 0)})),Qa("includes",(function(e){return ko(Ta(this),e,1<arguments.length?arguments[1]:void 0)})),Qa("indexOf",(function(e){return zj(Ta(this),e,1<arguments.length?arguments[1]:void 0)}));var Op=Ea("iterator"),Pp=Q.Uint8Array,Lx=Fd.values,Mx=Fd.keys,Nx=Fd.entries,nk=Pp&&Pp.prototype[Op],Qp=!!nk&&("values"==nk.name||null==nk.name),Rp=function(){return Lx.call(Ta(this))};Qa("entries",(function(){return Nx.call(Ta(this))})),Qa("keys",(function(){return Mx.call(Ta(this))})),Qa("values",Rp,!Qp),Qa(Op,Rp,!Qp);var Ox=[].join;Qa("join",(function(e){return Ox.apply(Ta(this),arguments)}));var Px=Math.min,ok=[].lastIndexOf,Sp=!!ok&&0>1/[1].lastIndexOf(1,-0),Qx=cf("lastIndexOf"),Rx=Sp||!Qx?function(e){if(Sp)return ok.apply(this,arguments)||0;var t=Ib(this),n=La(t.length),r=n-1;for(1<arguments.length&&(r=Px(r,rc(arguments[1]))),0>r&&(r=n+r);0<=r;r--)if(r in t&&t[r]===e)return r||0;return-1}:ok;Qa("lastIndexOf",(function(e){return Rx.apply(Ta(this),arguments)})),Qa("map",(function(e){return Bo(Ta(this),e,1<arguments.length?arguments[1]:void 0,(function(e,t){return new(nf(de(e,e.constructor)))(t)}))}));var Tp=function(e){return function(t,n,r,i){Sb(n),t=lb(t);var o=dg(t),a=La(t.length),s=e?a-1:0,u=e?-1:1;if(2>r)for(;;){if(s in o){i=o[s],s+=u;break}if(s+=u,e?0>s:a<=s)throw TypeError("Reduce of empty array with no initial value")}for(;e?0<=s:a>s;s+=u)s in o&&(i=n(i,o[s],s,t));return i}},Up=Tp(!1),Sx=Tp(!0);Qa("reduce",(function(e){return Up(Ta(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)})),Qa("reduceRight",(function(e){return Sx(Ta(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)}));var Tx=Math.floor;Qa("reverse",(function(){for(var e,t=Ta(this).length,n=Tx(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this}));var Ux=ia((function(){new Int8Array(1).set({})}));Qa("set",(function(e){Ta(this);var t=Sh(1<arguments.length?arguments[1]:void 0,1),n=this.length,r=lb(e),i=La(r.length),o=0;if(i+t>n)throw RangeError("Wrong length");for(;o<i;)this[t+o]=r[o++]}),Ux);var Vx=[].slice,Wx=ia((function(){new Int8Array(1).slice()}));Qa("slice",(function(e,t){e=Vx.call(Ta(this),e,t);var n=de(this,this.constructor);t=0;var r=e.length;for(n=new(nf(n))(r);r>t;)n[t]=e[t++];return n}),Wx),Qa("some",(function(e){return rw(Ta(this),e,1<arguments.length?arguments[1]:void 0)}));var Xx=[].sort;Qa("sort",(function(e){return Xx.call(Ta(this),e)})),Qa("subarray",(function(e,t){var n=Ta(this),r=n.length;return e=Rb(e,r),new(de(n,n.constructor))(n.buffer,n.byteOffset+e*n.BYTES_PER_ELEMENT,La((void 0===t?r:Rb(t,r))-e))}));var Uh=Q.Int8Array,Vp=[].toLocaleString,Yx=[].slice,Zx=!!Uh&&ia((function(){Vp.call(new Uh(1))})),$x=ia((function(){return[1,2].toLocaleString()!=new Uh([1,2]).toLocaleString()}))||!ia((function(){Uh.prototype.toLocaleString.call([1,2])}));Qa("toLocaleString",(function(){return Vp.apply(Zx?Yx.call(Ta(this)):Ta(this),arguments)}),$x);var Wp=Q.Uint8Array,ay=Wp&&Wp.prototype||{},Vh=[].toString,by=[].join;ia((function(){Vh.call({})}))&&(Vh=function(){return by.call(this)}),Qa("toString",Vh,ay.toString!=Vh);var Xp=sg.ArrayBuffer;ba({global:!0,forced:Q.ArrayBuffer!==Xp},{ArrayBuffer:Xp}),mg("ArrayBuffer");var cy=mb.f,pk=Function.prototype,dy=pk.toString,ey=/^\s*function ([^ (]*)/;!ta||"name"in pk||cy(pk,"name",{configurable:!0,get:function(){try{return dy.call(this).match(ey)[1]}catch(e){return""}}});var Yp=RegExp.prototype,Zp=Yp.toString,fy=ia((function(){return"/a/b"!=Zp.call({source:"a",flags:"b"})})),gy="toString"!=Zp.name;(fy||gy)&&Wa(RegExp.prototype,"toString",(function(){var e=Ia(this),t=String(e.source),n=e.flags;return"/"+t+"/"+(e=String(void 0===n&&e instanceof RegExp&&!("flags"in Yp)?Aj.call(e):n))}),{unsafe:!0});var hy=ig("splice"),iy=Math.max,jy=Math.min;ba({target:"Array",proto:!0,forced:!hy},{splice:function(e,t){var n,r,i=lb(this),o=La(i.length),a=Rb(e,o),s=arguments.length;if(0===s?s=n=0:1===s?(s=0,n=o-a):(s-=2,n=jy(iy(rc(t),0),o-a)),9007199254740991<o+s-n)throw TypeError("Maximum allowed length exceeded");var u=Ah(i,n);for(r=0;r<n;r++){var c=a+r;c in i&&ef(u,r,i[c])}if(u.length=n,s<n){for(r=a;r<o-n;r++){var l=r+s;(c=r+n)in i?i[l]=i[c]:delete i[l]}for(r=o;r>o-n+s;r--)delete i[r-1]}else if(s>n)for(r=o-n;r>a;r--)l=r+s-1,(c=r+n-1)in i?i[l]=i[c]:delete i[l];for(r=0;r<s;r++)i[r+a]=arguments[r+2];return i.length=o-n+s,u}});var qk={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},rk=Ea("iterator"),$p=Ea("toStringTag"),sk=Fd.values,Wh;for(Wh in qk){var aq=Q[Wh],dd=aq&&aq.prototype;if(dd){if(dd[rk]!==sk)try{gb(dd,rk,sk)}catch(c){dd[rk]=sk}if(dd[$p]||gb(dd,$p,Wh),qk[Wh])for(var of in Fd)if(dd[of]!==Fd[of])try{gb(dd,of,Fd[of])}catch(c){dd[of]=Fd[of]}}}var bq=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};yh("search",1,(function(e,t,n){return[function(t){var n=Bb(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;e=Ia(e);var i=String(this);return r=e.lastIndex,bq(r,0)||(e.lastIndex=0),i=bf(e,i),bq(e.lastIndex,r)||(e.lastIndex=r),null===i?-1:i.index}]})),tb((function(e){!function(t,n){e.exports?e.exports=n(t):n(t)}("undefined"!=typeof self?self:Va,(function(e){function t(e){return btoa(e).replace(/=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function n(e){return e=(e+="===").slice(0,-e.length%4),atob(e.replace(/-/g,"+").replace(/_/g,"/"))}function r(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function i(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),String.fromCharCode.apply(String,e)}function o(e){var t={name:(e.name||e||"").toUpperCase().replace("V","v")};switch(t.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":e.length&&(t.length=e.length);break;case"HMAC":e.hash&&(t.hash=o(e.hash)),e.length&&(t.length=e.length);break;case"RSAES-PKCS1-v1_5":e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":e.hash&&(t.hash=o(e.hash)),e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return t}function a(e){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[e.name][(e.hash||{}).name||e.length||""]}function s(e){(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=JSON.parse(decodeURIComponent(escape(i(e)))));var t={kty:e.kty,alg:e.alg,ext:e.ext||e.extractable};switch(t.kty){case"oct":t.k=e.k;case"RSA":"n e d p q dp dq qi oth".split(" ").forEach((function(n){n in e&&(t[n]=e[n])}));break;default:throw new TypeError("Unsupported key type")}return t}function u(e){return e=s(e),m&&(e.extractable=e.ext,delete e.ext),r(unescape(encodeURIComponent(JSON.stringify(e)))).buffer}function c(e){var n=l(e),r=!1;switch(2<n.length&&(r=!0,n.shift()),e={ext:!0},n[0][0]){case"1.2.840.113549.1.1.1":var o="n e d p q dp dq qi".split(" ");for(n=l(n[1]),r&&n.shift(),r=0;r<n.length;r++)n[r][0]||(n[r]=n[r].subarray(1)),e[o[r]]=t(i(n[r]));e.kty="RSA";break;default:throw new TypeError("Unsupported key type")}return e}function l(e,t){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t||(t={pos:0,end:e.length}),2>t.end-t.pos||t.end>e.length)throw new RangeError("Malformed DER");var n=e[t.pos++],r=e[t.pos++];if(128<=r){if(r&=127,t.end-t.pos<r)throw new RangeError("Malformed DER");for(var o=0;r--;)o<<=8,o|=e[t.pos++];r=o}if(t.end-t.pos<r)throw new RangeError("Malformed DER");switch(n){case 2:n=e.subarray(t.pos,t.pos+=r);break;case 3:if(e[t.pos++])throw Error("Unsupported bit string");r--;case 4:n=new Uint8Array(e.subarray(t.pos,t.pos+=r)).buffer;break;case 5:n=null;break;case 6:if(!((e=btoa(i(e.subarray(t.pos,t.pos+=r))))in _))throw Error("Unsupported OBJECT ID "+e);n=_[e];break;case 48:for(n=[],r=t.pos+r;t.pos<r;)n.push(l(e,t));break;default:throw Error("Unsupported DER tag 0x"+n.toString(16))}return n}function f(e,t){t||(t=[]);var n=t.length+2;if(t.push(0,0),e instanceof Uint8Array)for(var i=2,o=e.length,a=0;a<o;a++)t.push(e[a]);else if(e instanceof ArrayBuffer)for(i=4,o=e.byteLength,e=new Uint8Array(e),a=0;a<o;a++)t.push(e[a]);else if(null===e)i=5,o=0;else if("string"==typeof e&&e in O)for(i=6,o=(e=r(atob(O[e]))).length,a=0;a<o;a++)t.push(e[a]);else if(e instanceof Array){for(a=0;a<e.length;a++)f(e[a],t);i=48,o=t.length-n}else{if(!("object"===oa(e)&&3===e.tag&&e.value instanceof ArrayBuffer))throw Error("Unsupported DER value "+e);for(i=3,o=(e=new Uint8Array(e.value)).byteLength,t.push(0),a=0;a<o;a++)t.push(e[a]);o++}if(128<=o){for(a=o,o=4,t.splice(n,0,a>>24&255,a>>16&255,a>>8&255,255&a);1<o&&!(a>>24);)a<<=8,o--;4>o&&t.splice(n,4-o),o|=128}return t.splice(n-2,2,i,o),t}function h(e,t,n,r){Object.defineProperties(this,{_key:{value:e},type:{value:e.type,enumerable:!0},extractable:{value:void 0===n?e.extractable:n,enumerable:!0},algorithm:{value:void 0===t?e.algorithm:t,enumerable:!0},usages:{value:void 0===r?e.usages:r,enumerable:!0}})}function p(e){return"verify"===e||"encrypt"===e||"wrapKey"===e}function d(e){return"sign"===e||"decrypt"===e||"unwrapKey"===e}if("function"!=typeof Promise)throw"Promise support required";var b=e.crypto||e.msCrypto;if(b){var v=b.subtle||b.webkitSubtle;if(v){var g=e.Crypto||b.constructor||Object,y=e.SubtleCrypto||v.constructor||Object;e.CryptoKey||e.Key;var E=-1<e.navigator.userAgent.indexOf("Edge/"),m=!!e.msCrypto&&!E,w=!b.subtle&&!!b.webkitSubtle;if(m||w){var _={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},O={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach((function(e){var t=v[e];v[e]=function(i,l,f){var g=[].slice.call(arguments);switch(e){case"generateKey":var y=o(i),E=l,_=f;break;case"importKey":y=o(f),E=g[3],_=g[4],"jwk"===i&&((l=s(l)).alg||(l.alg=a(y)),l.key_ops||(l.key_ops="oct"!==l.kty?"d"in l?_.filter(d):_.filter(p):_.slice()),g[1]=u(l));break;case"unwrapKey":y=g[4],E=g[5],_=g[6],g[2]=f._key}if("generateKey"===e&&"HMAC"===y.name&&y.hash)return y.length=y.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[y.hash.name],v.importKey("raw",b.getRandomValues(new Uint8Array(y.length+7>>3)),y,E,_);if(w&&"generateKey"===e&&"RSASSA-PKCS1-v1_5"===y.name&&(!y.modulusLength||2048<=y.modulusLength))return(i=o(i)).name="RSAES-PKCS1-v1_5",delete i.hash,v.generateKey(i,!0,["encrypt","decrypt"]).then((function(e){return Promise.all([v.exportKey("jwk",e.publicKey),v.exportKey("jwk",e.privateKey)])})).then((function(e){return e[0].alg=e[1].alg=a(y),e[0].key_ops=_.filter(p),e[1].key_ops=_.filter(d),Promise.all([v.importKey("jwk",e[0],y,!0,e[0].key_ops),v.importKey("jwk",e[1],y,E,e[1].key_ops)])})).then((function(e){return{publicKey:e[0],privateKey:e[1]}}));if((w||m&&"SHA-1"===(y.hash||{}).name)&&"importKey"===e&&"jwk"===i&&"HMAC"===y.name&&"oct"===l.kty)return v.importKey("raw",r(n(l.k)),f,g[3],g[4]);if(w&&"importKey"===e&&("spki"===i||"pkcs8"===i))return v.importKey("jwk",c(l),f,g[3],g[4]);if(m&&"unwrapKey"===e)return v.decrypt(g[3],f,l).then((function(e){return v.importKey(i,e,g[4],g[5],g[6])}));try{var O=t.apply(v,g)}catch(e){return Promise.reject(e)}return m&&(O=new Promise((function(e,t){O.onabort=O.onerror=function(e){t(e)},O.oncomplete=function(t){e(t.target.result)}}))),O=O.then((function(e){return"HMAC"!==y.name||y.length||(y.length=8*e.algorithm.length),0==y.name.search("RSA")&&(y.modulusLength||(y.modulusLength=(e.publicKey||e).algorithm.modulusLength),y.publicExponent||(y.publicExponent=(e.publicKey||e).algorithm.publicExponent)),e.publicKey&&e.privateKey?{publicKey:new h(e.publicKey,y,E,_.filter(p)),privateKey:new h(e.privateKey,y,E,_.filter(d))}:new h(e,y,E,_)}))}})),["exportKey","wrapKey"].forEach((function(e){var o=v[e];v[e]=function(u,c,l){var h=[].slice.call(arguments);switch(e){case"exportKey":h[1]=c._key;break;case"wrapKey":h[1]=c._key,h[2]=l._key}if((w||m&&"SHA-1"===(c.algorithm.hash||{}).name)&&"exportKey"===e&&"jwk"===u&&"HMAC"===c.algorithm.name&&(h[0]="raw"),!w||"exportKey"!==e||"spki"!==u&&"pkcs8"!==u||(h[0]="jwk"),m&&"wrapKey"===e)return v.exportKey(u,c).then((function(e){return"jwk"===u&&(e=r(unescape(encodeURIComponent(JSON.stringify(s(e)))))),v.encrypt(h[3],l,e)}));try{var b=o.apply(v,h)}catch(e){return Promise.reject(e)}return m&&(b=new Promise((function(e,t){b.onabort=b.onerror=function(e){t(e)},b.oncomplete=function(t){e(t.target.result)}}))),"exportKey"===e&&"jwk"===u&&(b=b.then((function(e){return(w||m&&"SHA-1"===(c.algorithm.hash||{}).name)&&"HMAC"===c.algorithm.name?{kty:"oct",alg:a(c.algorithm),key_ops:c.usages.slice(),ext:!0,k:t(i(e))}:((e=s(e)).alg||(e.alg=a(c.algorithm)),e.key_ops||(e.key_ops="public"===c.type?c.usages.filter(p):"private"===c.type?c.usages.filter(d):c.usages.slice()),e)}))),!w||"exportKey"!==e||"spki"!==u&&"pkcs8"!==u||(b=b.then((function(e){var t=[["",null]],i=!1;switch((e=s(e)).kty){case"RSA":for(var o="n e d p q dp dq qi".split(" "),a=[],u=0;u<o.length&&o[u]in e;u++){var c=a[u]=r(n(e[o[u]]));128&c[0]&&(a[u]=new Uint8Array(c.length+1),a[u].set(c,1))}2<a.length&&(i=!0,a.unshift(new Uint8Array([0]))),t[0][0]="1.2.840.113549.1.1.1";break;default:throw new TypeError("Unsupported key type")}return t.push(new Uint8Array(f(a)).buffer),i?t.unshift(new Uint8Array([0])):t[1]={tag:3,value:t[1]},new Uint8Array(f(t)).buffer}))),b}})),["encrypt","decrypt","sign","verify"].forEach((function(e){var t=v[e];v[e]=function(n,r,i,a){if(m&&(!i.byteLength||a&&!a.byteLength))throw Error("Empty input is not allowed");var s=[].slice.call(arguments),u=o(n);if(!m||"sign"!==e&&"verify"!==e||"RSASSA-PKCS1-v1_5"!==n&&"HMAC"!==n||(s[0]={name:n}),m&&r.algorithm.hash&&(s[0].hash=s[0].hash||r.algorithm.hash),m&&"decrypt"===e&&"AES-GCM"===u.name){var c=n.tagLength>>3;s[2]=(i.buffer||i).slice(0,i.byteLength-c),n.tag=(i.buffer||i).slice(i.byteLength-c)}m&&"AES-GCM"===u.name&&void 0===s[0].tagLength&&(s[0].tagLength=128),s[1]=r._key;try{var l=t.apply(v,s)}catch(e){return Promise.reject(e)}return m&&(l=new Promise((function(t,n){l.onabort=l.onerror=function(e){n(e)},l.oncomplete=function(n){if(n=n.target.result,"encrypt"===e&&n instanceof AesGcmEncryptResult){var r=n.ciphertext,i=n.tag;(n=new Uint8Array(r.byteLength+i.byteLength)).set(new Uint8Array(r),0),n.set(new Uint8Array(i),r.byteLength),n=n.buffer}t(n)}}))),l}})),m){var A=v.digest;v.digest=function(e,t){if(!t.byteLength)throw Error("Empty input is not allowed");try{var n=A.call(v,e,t)}catch(e){return Promise.reject(e)}return n=new Promise((function(e,t){n.onabort=n.onerror=function(e){t(e)},n.oncomplete=function(t){e(t.target.result)}}))},e.crypto=Object.create(b,{getRandomValues:{value:function(e){return b.getRandomValues(e)}},subtle:{value:v}}),e.CryptoKey=h}w&&(b.subtle=v,e.Crypto=g,e.SubtleCrypto=y,e.CryptoKey=h)}}}}))})),function(e){e.console||(e.console={}),e=e.console;for(var t,n=function(){},r=["memory"],i="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");t=r.pop();)e[t]||(e[t]={});for(;t=i.pop();)e[t]||(e[t]=n)}("undefined"==typeof window?Va:window),ba({target:"Object",stat:!0},{setPrototypeOf:ob});var ky=ia((function(){nc(1)}));ba({target:"Object",stat:!0,forced:ky,sham:!Io},{getPrototypeOf:function(e){return nc(lb(e))}});var cq=[].slice,tk={},ly=Function.bind||function(e){var t=Sb(this),n=cq.call(arguments,1),r=function(){var i=n.concat(cq.call(arguments));if(this instanceof r){var o=i.length;if(!(o in tk)){for(var a=[],s=0;s<o;s++)a[s]="a["+s+"]";tk[o]=Function("C,a","return new C("+a.join(",")+")")}i=tk[o](t,i)}else i=t.apply(e,i);return i};return va(t.prototype)&&(r.prototype=t.prototype),r},uk=Lc("Reflect","construct"),dq=ia((function(){function e(){}return!(uk((function(){}),[],e)instanceof e)})),eq=!ia((function(){uk((function(){}))})),fq=dq||eq;ba({target:"Reflect",stat:!0,forced:fq,sham:fq},{construct:function(e,t){Sb(e),Ia(t);var n=3>arguments.length?e:Sb(arguments[2]);if(eq&&!dq)return uk(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}return(n=[null]).push.apply(n,t),new(ly.apply(e,n))}n=n.prototype,n=ec(va(n)?n:Object.prototype);var r=Function.apply.call(e,n,t);return va(r)?r:n}}),ba({target:"Reflect",stat:!0},{get:vm});var gq=Zb.f,my=ia((function(){gq(1)}));ba({target:"Object",stat:!0,forced:!ta||my,sham:!ta},{getOwnPropertyDescriptor:function(e,t){return gq(Ib(e),t)}});var hq=ce.f,ny={}.toString,iq="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],vk=function(e){if(iq&&"[object Window]"==ny.call(e))try{var t=hq(e)}catch(e){t=iq.slice()}else t=hq(Ib(e));return t},jq={f:Ea},oy=mb.f,Xh=function(e){var t=Q.Symbol||(Q.Symbol={});ha(t,e)||oy(t,e,{value:jq.f(e)})},Jb=uh("hidden"),kq=Ea("toPrimitive"),py=Za.set,lq=Za.getterFor("Symbol"),fc=Object.prototype,Kb=Q.Symbol,wg=Lc("JSON","stringify"),mq=Zb.f,Id=mb.f,nq=vk,qy=cg,ed=zd("symbols"),xg=zd("op-symbols"),wk=zd("string-to-symbol-registry"),xk=zd("symbol-to-string-registry"),ry=zd("wks"),yk=Q.QObject,zk=!yk||!yk.prototype||!yk.prototype.findChild,Ak=ta&&ia((function(){return 7!=ec(Id({},"a",{get:function(){return Id(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=mq(fc,t);r&&delete fc[t],Id(e,t,n),r&&e!==fc&&Id(fc,t,r)}:Id,Bk=function(e,t){var n=ed[e]=ec(Kb.prototype);return py(n,{type:"Symbol",tag:e,description:t}),ta||(n.description=t),n},Ck=to?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof Kb},Yh=function(e,t,n){return e===fc&&Yh(xg,t,n),Ia(e),t=Kc(t,!0),Ia(n),ha(ed,t)?(n.enumerable?(ha(e,Jb)&&e[Jb][t]&&(e[Jb][t]=!1),n=ec(n,{enumerable:Jc(0,!1)})):(ha(e,Jb)||Id(e,Jb,Jc(1,{})),e[Jb][t]=!0),Ak(e,t,n)):Id(e,t,n)},oq=function(e,t){Ia(e);var n=Ib(t);return t=$c(n).concat(Dk(n)),ee(t,(function(t){ta&&!Ek.call(n,t)||Yh(e,t,n[t])})),e},Ek=function(e){e=Kc(e,!0);var t=qy.call(this,e);return!(this===fc&&ha(ed,e)&&!ha(xg,e))&&(!(t||!ha(this,e)||!ha(ed,e)||ha(this,Jb)&&this[Jb][e])||t)},pq=function(e,t){if(e=Ib(e),t=Kc(t,!0),e!==fc||!ha(ed,t)||ha(xg,t)){var n=mq(e,t);return!n||!ha(ed,t)||ha(e,Jb)&&e[Jb][t]||(n.enumerable=!0),n}},qq=function(e){e=nq(Ib(e));var t=[];return ee(e,(function(e){ha(ed,e)||ha(Ze,e)||t.push(e)})),t},Dk=function(e){var t=e===fc;e=nq(t?xg:Ib(e));var n=[];return ee(e,(function(e){!ha(ed,e)||t&&!ha(fc,e)||n.push(ed[e])})),n};if(Oc||(Kb=function(){if(this instanceof Kb)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=Ye(e),n=function(e){this===fc&&n.call(xg,e),ha(this,Jb)&&ha(this[Jb],t)&&(this[Jb][t]=!1),Ak(this,t,Jc(1,e))};return ta&&zk&&Ak(fc,t,{configurable:!0,set:n}),Bk(t,e)},Wa(Kb.prototype,"toString",(function(){return lq(this).tag})),Wa(Kb,"withoutSetter",(function(e){return Bk(Ye(e),e)})),cg=Ek,mb.f=Yh,Zb.f=pq,ce.f=vk=qq,eg.f=Dk,jq.f=function(e){return Bk(Ea(e),e)},ta&&(Id(Kb.prototype,"description",{configurable:!0,get:function(){return lq(this).description}}),Wa(fc,"propertyIsEnumerable",Ek,{unsafe:!0}))),ba({global:!0,wrap:!0,forced:!Oc,sham:!Oc},{Symbol:Kb}),ee($c(ry),(function(e){Xh(e)})),ba({target:"Symbol",stat:!0,forced:!Oc},{for:function(e){if(e=String(e),ha(wk,e))return wk[e];var t=Kb(e);return wk[e]=t,xk[t]=e,t},keyFor:function(e){if(!Ck(e))throw TypeError(e+" is not a symbol");if(ha(xk,e))return xk[e]},useSetter:function(){zk=!0},useSimple:function(){zk=!1}}),ba({target:"Object",stat:!0,forced:!Oc,sham:!ta},{create:function(e,t){return void 0===t?ec(e):oq(ec(e),t)},defineProperty:Yh,defineProperties:oq,getOwnPropertyDescriptor:pq}),ba({target:"Object",stat:!0,forced:!Oc},{getOwnPropertyNames:qq,getOwnPropertySymbols:Dk}),ba({target:"Object",stat:!0,forced:ia((function(){eg.f(1)}))},{getOwnPropertySymbols:function(e){return eg.f(lb(e))}}),wg){var sy=!Oc||ia((function(){var e=Kb();return"[null]"!=wg([e])||"{}"!=wg({a:e})||"{}"!=wg(Object(e))}));ba({target:"JSON",stat:!0,forced:sy},{stringify:function(e,t,n){for(var r,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=t,(va(t)||void 0!==e)&&!Ck(e))return Dd(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Ck(t))return t}),i[1]=t,wg.apply(null,i)}})}Kb.prototype[kq]||gb(Kb.prototype,kq,Kb.prototype.valueOf),sc(Kb,"Symbol"),Ze[Jb]=!0;var ty=mb.f,fd=Q.Symbol;if(ta&&"function"==typeof fd&&(!("description"in fd.prototype)||void 0!==fd().description)){var rq={},yg=function(){var e=1>arguments.length||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof yg?new fd(e):void 0===e?fd():fd(e);return""===e&&(rq[t]=!0),t};no(yg,fd);var Fk=yg.prototype=fd.prototype;Fk.constructor=yg;var uy=Fk.toString,vy="Symbol(test)"==String(fd("test")),wy=/^Symbol\((.*)\)[^)]+$/;ty(Fk,"description",{configurable:!0,get:function(){var e=va(this)?this.valueOf():this,t=uy.call(e);return ha(rq,e)?"":""===(e=vy?t.slice(7,-1):t.replace(wy,"$1"))?void 0:e}}),ba({global:!0,forced:!0},{Symbol:yg})}Xh("toStringTag"),sc(Q.JSON,"JSON",!0),sc(Math,"Math",!0),function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n=r(e);if(t){var i=r(this).constructor;n=Reflect.construct(n,arguments,i)}else n=n.apply(this,arguments);return n=!n||"object"!==oa(n)&&"function"!=typeof n?o(this):n}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););if(e)return(t=Object.getOwnPropertyDescriptor(e,t)).get?t.get.call(n):t.value})(e,t,n||e)}var u=function(){function t(){e(this,t),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(t,[{key:"addEventListener",value:function(e,t,n){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:n})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=0,r=(e=this.listeners[e]).length;n<r;n++)if(e[n].callback===t){e.splice(n,1);break}}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var t=this.listeners[e.type].slice(),n=0,r=t.length;n<r;n++){var i=t[n];try{i.callback.call(this,e)}catch(e){Promise.resolve().then((function(){throw e}))}i.options&&i.options.once&&this.removeEventListener(e.type,i.callback)}return!e.defaultPrevented}}}]),t}(),c=function(t){function c(){e(this,c);var t=l.call(this);return t.listeners||u.call(o(t)),Object.defineProperty(o(t),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(o(t),"onabort",{value:null,writable:!0,configurable:!0}),t}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(c,t);var l=a(c);return n(c,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),s(r(c.prototype),"dispatchEvent",this).call(this,e)}}]),c}(u),l=function(){function t(){e(this,t),Object.defineProperty(this,"signal",{value:new c,writable:!0,configurable:!0})}return n(t,[{key:"abort",value:function(){try{var e=new Event("abort")}catch(t){"undefined"!=typeof document?document.createEvent?(e=document.createEvent("Event")).initEvent("abort",!1,!1):(e=document.createEventObject()).type="abort":e={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(e)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(l.prototype[Symbol.toStringTag]="AbortController",c.prototype[Symbol.toStringTag]="AbortSignal"),function(e){if(e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL){console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill");var t=!0}else t="function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController;t&&(e.AbortController=l,e.AbortSignal=c)}("undefined"!=typeof self?self:Va)}();var xy=Math.floor,yy=Math.log,zy=Math.LOG2E;ba({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-xy(yy(e+.5)*zy):32}});var Ay=Math.log,By=Math.LN2,Vt=Math.clz32||function(e){return 31-Ay(e>>>0)/By|0},Td=String.fromCharCode,sq={}.toString,Gk=window.Uint8Array,Hk=Gk||Array,Cy=sq.call((window.ArrayBuffer||Hk).prototype),Ik;wm.prototype.decode=function(e){if(e=e&&e.buffer||e,sq.call(e)!==Cy)throw Error("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");for(var t="",n=0,r=0|(e=Gk?new Hk(e):e).length;n<r;n=n+32768|0)t+=Td.apply(0,e[Gk?"slice":"subarray"](n,n+32768|0));return t.replace(/[\xc0-\xff][\x80-\xbf]*/g,Ut)},window.TextDecoder||(window.TextDecoder=wm),xm.prototype.encode=function(e){for(var t=0|(e=void 0===e?"":(""+e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,Wt)).length,n=new Hk(t),r=0;r<t;r=r+1|0)n[r]=e.charCodeAt(r);return n},window.TextEncoder||(window.TextEncoder=xm),function(e){var t,n,r,i,o,a,s,u,c,l,f,h;(n=t||(t={})).LOGIN="LOGIN",n.LOGIN_SUCCESS="LOGIN_SUCCESS",n.LOGIN_FAILURE="LOGIN_FAILURE",n.LOGIN_TIMEOUT="LOGIN_TIMEOUT",n.INTERRUPTED="INTERRUPTED",n.LOGOUT="LOGOUT",n.BANNED_BY_SERVER="BANNED_BY_SERVER",n.REMOTE_LOGIN="REMOTE_LOGIN",n.TOKEN_EXPIRED="TOKEN_EXPIRED",e.ConnectionChangeReason=t,function(e){e.DISCONNECTED="DISCONNECTED",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED",e.RECONNECTING="RECONNECTING",e.ABORTED="ABORTED"}(r||(r={})),e.ConnectionState=r,function(e){e.IDLE="IDLE",e.SENT_TO_REMOTE="SENT_TO_REMOTE",e.RECEIVED_BY_REMOTE="RECEIVED_BY_REMOTE",e.ACCEPTED_BY_REMOTE="ACCEPTED_BY_REMOTE",e.REFUSED_BY_REMOTE="REFUSED_BY_REMOTE",e.CANCELED="CANCELED",e.FAILURE="FAILURE"}(i||(i={})),e.LocalInvitationState=i,function(e){e.INVITATION_RECEIVED="INVITATION_RECEIVED",e.ACCEPT_SENT_TO_LOCAL="ACCEPT_SENT_TO_LOCAL",e.REFUSED="REFUSED",e.ACCEPTED="ACCEPTED",e.CANCELED="CANCELED",e.FAILURE="FAILURE"}(o||(o={})),e.RemoteInvitationState=o,function(e){e.UNKNOWN="UNKNOWN",e.PEER_NO_RESPONSE="PEER_NO_RESPONSE",e.INVITATION_EXPIRE="INVITATION_EXPIRE",e.PEER_OFFLINE="PEER_OFFLINE",e.NOT_LOGGEDIN="NOT_LOGGEDIN"}(a||(a={})),e.LocalInvitationFailureReason=a,function(e){e.UNKNOWN="UNKNOWN",e.PEER_OFFLINE="PEER_OFFLINE",e.ACCEPT_FAILURE="ACCEPT_FAILURE",e.INVITATION_EXPIRE="INVITATION_EXPIRE"}(s||(s={})),e.RemoteInvitationFailureReason=s,function(e){e.ONLINE="ONLINE",e.UNREACHABLE="UNREACHABLE",e.OFFLINE="OFFLINE"}(u||(u={})),e.PeerOnlineState=u,(c||(c={})).ONLINE_STATUS="ONLINE_STATUS",e.PeerSubscriptionOption=c,function(e){e.TEXT="TEXT",e.RAW="RAW"}(l||(l={})),e.MessageType=l,function(e){e.CN="CN",e.NA="NA",e.EU="EU",e.AS="AS",e.JP="JP",e.IN="IN",e.GLOB="GLOB",e.OC="OC",e.SA="SA",e.AF="AF",e.OVS="OVS"}(f||(f={})),e.LegacyAreaCode=f,function(e){e.GLOBAL="GLOBAL",e.INDIA="INDIA",e.JAPAN="JAPAN",e.ASIA="ASIA",e.EUROPE="EUROPE",e.CHINA="CHINA",e.NORTH_AMERICA="NORTH_AMERICA"}(h||(h={})),e.AreaCode=h}(Ik||(Ik={}));var qa=Ik;ba({target:"Array",proto:!0},{includes:function(e){return ko(this,e,1<arguments.length?arguments[1]:void 0)}}),lg("includes");var Jk=function(e){if(Fj(e))throw TypeError("The method doesn't accept regular expressions");return e},Dy=Ea("match"),Kk=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Dy]=!1,"/./"[e](t)}catch(e){}}return!1};ba({target:"String",proto:!0,forced:!Kk("includes")},{includes:function(e){return!!~String(Bb(this)).indexOf(Jk(e),1<arguments.length?arguments[1]:void 0)}});var xc={RECONNECTING_AP_INTERVAL:2500,RECONNECTING_AP_NUM:2,DISABLE_MESSAGE_COMPRESSION:!1,LOG_UPLOAD_INTERVAL:3e3,LOG_HANDLER:void 0,ENABLE_EDGE_AUTO_FALLBACK:!0};Xh("iterator"),Xh("asyncIterator");var Lk=cf("forEach")?[].forEach:function(e){return ee(this,e,1<arguments.length?arguments[1]:void 0)},tq;for(tq in qk){var uq=Q[tq],Zh=uq&&uq.prototype;if(Zh&&Zh.forEach!==Lk)try{gb(Zh,"forEach",Lk)}catch(c){Zh.forEach=Lk}}var Ey=[].reverse,vq=[1,2];ba({target:"Array",proto:!0,forced:String(vq)===String(vq.reverse())},{reverse:function(){return Dd(this)&&(this.length=this.length),Ey.call(this)}});var M=tb((function(e){e=function(e){function t(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function n(e,t,n,o){return t=Object.create((t&&t.prototype instanceof i?t:i).prototype),o=new h(o||[]),t._invoke=function(e,t,n){var i=_;return function(o,a){if(i===A)throw Error("Generator is already running");if(i===R){if("throw"===o)throw a;return d()}for(n.method=o,n.arg=a;;){if((o=n.delegate)&&(o=c(o,n))){if(o===I)continue;return o}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===_)throw i=R,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);if(i=A,"normal"===(o=r(e,t,n)).type){if(i=n.done?R:O,o.arg===I)continue;return{value:o.arg,done:n.done}}"throw"===o.type&&(i=R,n.method="throw",n.arg=o.arg)}}}(e,n,o),t}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function a(){}function s(e){["next","throw","return"].forEach((function(n){t(e,n,(function(e){return this._invoke(n,e)}))}))}function u(e,t){function n(i,o,a,s){if("throw"!==(i=r(e[i],e,o)).type){var u=i.arg;return(i=u.value)&&"object"===oa(i)&&g.call(i,"__await")?t.resolve(i.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(i).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(i.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function c(e,t){var n=e.iterator[t.method];if(n===b){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=b,c(e,t),"throw"===t.method))return I;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return I}return"throw"===(n=r(n,e.iterator,t.arg)).type?(t.method="throw",t.arg=n.arg,t.delegate=null,I):(n=n.arg)?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=b),t.delegate=null,I):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,I)}function l(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(l,this),this.reset(!0)}function p(e){if(e){var t=e[E];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1;return(t=function t(){for(;++n<e.length;)if(g.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=b,t.done=!0,t}).next=t}}return{next:d}}function d(){return{value:b,done:!0}}var b,v=Object.prototype,g=v.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},E=y.iterator||"@@iterator",m=y.asyncIterator||"@@asyncIterator",w=y.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(e,t,n){return e[t]=n}}e.wrap=n;var _="suspendedStart",O="suspendedYield",A="executing",R="completed",I={};t(y={},E,(function(){return this}));var T=Object.getPrototypeOf;(T=T&&T(T(p([]))))&&T!==v&&g.call(T,E)&&(y=T);var k=a.prototype=i.prototype=Object.create(y);return o.prototype=a,t(k,"constructor",a),t(a,"constructor",o),o.displayName=t(a,w,"GeneratorFunction"),e.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,t(e,w,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},s(u.prototype),t(u.prototype,m,(function(){return this})),e.AsyncIterator=u,e.async=function(t,r,i,o,a){void 0===a&&(a=Promise);var s=new u(n(t,r,i,o),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},s(k),t(k,w,"Generator"),t(k,E,(function(){return this})),t(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t,n=[];for(t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=p,h.prototype={constructor:h,reset:function(e){if(this.next=this.prev=0,this.sent=this._sent=b,this.done=!1,this.delegate=null,this.method="next",this.arg=b,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=b)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=b),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;0<=r;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),s=g.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}return i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null),(n=i?i.completion:{}).type=e,n.arg=t,i?(this.method="next",this.next=i.finallyLoc,I):this.complete(n)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),I},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),I}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){if("throw"===(e=n.completion).type){var r=e.arg;f(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=b),I}},e}(e.exports);try{regeneratorRuntime=e}catch(t){"object"===("undefined"==typeof globalThis?"undefined":oa(globalThis))?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})),wq=!ia((function(){return Object.isExtensible(Object.preventExtensions({}))})),Mk=tb((function(e){var t=mb.f,n=Ye("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(e){t(e,n,{value:{objectID:"O"+ ++r,weakData:{}}})},a=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!va(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!ha(e,n)){if(!i(e))return"F";if(!t)return"E";o(e)}return e[n].objectID},getWeakData:function(e,t){if(!ha(e,n)){if(!i(e))return!0;if(!t)return!1;o(e)}return e[n].weakData},onFreeze:function(e){return wq&&a.REQUIRED&&i(e)&&!ha(e,n)&&o(e),e}};Ze[n]=!0})),xq=function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=r?"set":"add",a=Q[e],s=a&&a.prototype,u=a,c={},l=function(e){var t=s[e];Wa(s,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!va(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return i&&!va(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!va(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(Mc(e,"function"!=typeof a||!(i||s.forEach&&!ia((function(){(new a).entries().next()})))))u=n.getConstructor(t,e,r,o),Mk.REQUIRED=!0;else if(Mc(e,!0)){var f=new u,h=f[o](i?{}:-0,1)!=f,p=ia((function(){f.has(1)})),d=Bh((function(e){new a(e)})),b=!i&&ia((function(){for(var e=new a,t=5;t--;)e[o](t,t);return!e.has(-0)}));d||((u=t((function(t,n){return tc(t,u,e),t=Th(new a,t,u),null!=n&&Gh(n,t[o],{that:t,AS_ENTRIES:r}),t}))).prototype=s,s.constructor=u),(p||b)&&(l("delete"),l("has"),r&&l("get")),(b||h)&&l(o),i&&s.clear&&delete s.clear}return c[e]=u,ba({global:!0,forced:u!=a},c),sc(u,e),i||n.setStrong(u,e,r),u},Fy=mb.f,yq=Mk.fastKey,zq=Za.set,Nk=Za.getterFor,Aq={getConstructor:function(e,t,n,r){var i=e((function(e,o){tc(e,i,t),zq(e,{type:t,index:ec(null),first:void 0,last:void 0,size:0}),ta||(e.size=0),null!=o&&Gh(o,e[r],{that:e,AS_ENTRIES:n})})),o=Nk(t),a=function(e,t,n){var r,i=o(e),a=s(e,t);return a?a.value=n:(i.last=a={index:r=yq(t,!0),key:t,value:n,previous:t=i.last,next:void 0,removed:!1},i.first||(i.first=a),t&&(t.next=a),ta?i.size++:e.size++,"F"!==r&&(i.index[r]=a)),e},s=function(e,t){e=o(e);var n=yq(t);if("F"!==n)return e.index[n];for(e=e.first;e;e=e.next)if(e.key==t)return e};return gf(i.prototype,{clear:function(){for(var e=o(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,ta?e.size=0:this.size=0},delete:function(e){var t=o(this);if(e=s(this,e)){var n=e.next,r=e.previous;delete t.index[e.index],e.removed=!0,r&&(r.next=n),n&&(n.previous=r),t.first==e&&(t.first=n),t.last==e&&(t.last=r),ta?t.size--:this.size--}return!!e},forEach:function(e){for(var t,n=o(this),r=Cd(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!s(this,e)}}),gf(i.prototype,n?{get:function(e){return(e=s(this,e))&&e.value},set:function(e,t){return a(this,0===e?0:e,t)}}:{add:function(e){return a(this,e=0===e?0:e,e)}}),ta&&Fy(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=Nk(t),o=Nk(r);Qj(e,t,(function(e,t){zq(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),mg(t)}};xq("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Aq);var Ok=Lc("Reflect","apply"),Gy=Function.apply,Hy=!ia((function(){Ok((function(){}))}));ba({target:"Reflect",stat:!0,forced:Hy},{apply:function(e,t,n){return Sb(e),Ia(n),Ok?Ok(e,t,n):Gy.call(e,t,n)}}),ba({target:"Reflect",stat:!0},{ownKeys:mo});var Bq=Ea("isConcatSpreadable"),Iy=51<=Bd||!ia((function(){var e=[];return e[Bq]=!1,e.concat()[0]!==e})),Jy=ig("concat");ba({target:"Array",proto:!0,forced:!Iy||!Jy},{concat:function(e){var t,n=lb(this),r=Ah(n,0),i=0,o=-1;for(t=arguments.length;o<t;o++){var a=-1===o?n:arguments[o],s=a;if(va(s)){var u=s[Bq];s=void 0!==u?!!u:Dd(s)}else s=!1;if(s){if(9007199254740991<i+(u=La(a.length)))throw TypeError("Maximum allowed index exceeded");for(s=0;s<u;s++,i++)s in a&&ef(r,i,a[s])}else{if(9007199254740991<=i)throw TypeError("Maximum allowed index exceeded");ef(r,i++,a)}}return r.length=i,r}});var Ky=vk,Ly=ia((function(){return!Object.getOwnPropertyNames(1)}));ba({target:"Object",stat:!0,forced:Ly},{getOwnPropertyNames:Ky});var My=ce.f,Ny=Zb.f,Oy=mb.f,Jd=Q.Number,$h=Jd.prototype,Py="Number"==qc(ec($h)),Cq=function(e){var t,n=Kc(e,!1);if("string"==typeof n&&2<n.length)if(43===(e=(n=Ij(n)).charCodeAt(0))||45===e){if(88===(e=n.charCodeAt(2))||120===e)return NaN}else if(48===e){switch(n.charCodeAt(1)){case 66:case 98:e=2;var r=49;break;case 79:case 111:e=8,r=55;break;default:return+n}var i=(n=n.slice(2)).length;for(t=0;t<i;t++){var o=n.charCodeAt(t);if(48>o||o>r)return NaN}return parseInt(n,e)}return+n};if(Mc("Number",!Jd(" 0o1")||!Jd("0b1")||Jd("+0x1"))){for(var ke=function(e){var t=1>arguments.length?0:e,n=this;return n instanceof ke&&(Py?ia((function(){$h.valueOf.call(n)})):"Number"!=qc(n))?Th(new Jd(Cq(t)),n,ke):Cq(t)},Dq=ta?My(Jd):"MAX_VALUE MIN_VALUE NaN NEGATIVE_INFINITY POSITIVE_INFINITY EPSILON isFinite isInteger isNaN isSafeInteger MAX_SAFE_INTEGER MIN_SAFE_INTEGER parseFloat parseInt isInteger fromString range".split(" "),Pk=0,ai;Dq.length>Pk;Pk++)ha(Jd,ai=Dq[Pk])&&!ha(ke,ai)&&Oy(ke,ai,Ny(Jd,ai));ke.prototype=$h,$h.constructor=ke,Wa(Q,"Number",ke)}var pf="object"===("undefined"==typeof Reflect?"undefined":oa(Reflect))?Reflect:null,Eq=pf&&"function"==typeof pf.apply?pf.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Qy=pf&&"function"==typeof pf.ownKeys?pf.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},Fq=Number.isNaN||function(e){return e!=e};ya.EventEmitter=ya,ya.prototype._events=void 0,ya.prototype._eventsCount=0,ya.prototype._maxListeners=void 0;var Gq=10;Object.defineProperty(ya,"defaultMaxListeners",{enumerable:!0,get:function(){return Gq},set:function(e){if("number"!=typeof e||0>e||Fq(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Gq=e}}),ya.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ya.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||Fq(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},ya.prototype.getMaxListeners=function(){return void 0===this._maxListeners?ya.defaultMaxListeners:this._maxListeners},ya.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);n="error"===e;var r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var i;if(0<t.length&&(i=t[0]),i instanceof Error)throw i;throw(t=Error("Unhandled error."+(i?" ("+i.message+")":""))).context=i,t}if(void 0===(n=r[e]))return!1;if("function"==typeof n)Eq(n,this,t);else for(r=Bm(n,i=n.length),n=0;n<i;++n)Eq(r[n],this,t);return!0},ya.prototype.addListener=function(e,t){return ym(this,e,t,!1)},ya.prototype.on=ya.prototype.addListener,ya.prototype.prependListener=function(e,t){return ym(this,e,t,!0)},ya.prototype.once=function(e,t){return Ug(t),this.on(e,zm(this,e,t)),this},ya.prototype.prependOnceListener=function(e,t){return Ug(t),this.prependListener(e,zm(this,e,t)),this},ya.prototype.removeListener=function(e,t){var n;Ug(t);var r=this._events;if(void 0===r)return this;var i=r[e];if(void 0===i)return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){var o=-1;for(n=i.length-1;0<=n;n--)if(i[n]===t||i[n].listener===t){var a=i[n].listener;o=n;break}if(0>o)return this;if(0===o)i.shift();else{for(;o+1<i.length;o++)i[o]=i[o+1];i.pop()}1===i.length&&(r[e]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},ya.prototype.off=ya.prototype.removeListener,ya.prototype.removeAllListeners=function(e){var t=this._events;if(void 0===t)return this;if(void 0===t.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==t[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete t[e]),this;if(0===arguments.length){var n=Object.keys(t);for(t=0;t<n.length;++t){var r=n[t];"removeListener"!==r&&this.removeAllListeners(r)}return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(n=t[e]))this.removeListener(e,n);else if(void 0!==n)for(t=n.length-1;0<=t;t--)this.removeListener(e,n[t]);return this},ya.prototype.listeners=function(e){return Am(this,e,!0)},ya.prototype.rawListeners=function(e){return Am(this,e,!1)},ya.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):Cm.call(e,t)},ya.prototype.listenerCount=Cm,ya.prototype.eventNames=function(){return 0<this._eventsCount?Qy(this._events):[]},ya.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}Dm(e,t,o,{once:!0}),"error"!==t&&Yt(e,i,{once:!0})}))};var qf=Object.assign,Hq=Object.defineProperty,zg=!qf||ia((function(){if(ta&&1!==qf({b:1},qf(Hq({},"a",{enumerable:!0,get:function(){Hq(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=qf({},e)[n]||"abcdefghijklmnopqrst"!=$c(qf({},t)).join("")}))?function(e,t){for(var n=lb(e),r=arguments.length,i=1,o=eg.f,a=cg;r>i;)for(var s,u=dg(arguments[i++]),c=o?$c(u).concat(o(u)):$c(u),l=c.length,f=0;l>f;)s=c[f++],(!ta||a.call(u,s))&&(n[s]=u[s]);return n}:qf;ba({target:"Object",stat:!0,forced:Object.assign!==zg},{assign:zg}),xq("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),Aq);var Ry=Math.log,Sy=Math.LN2;ba({target:"Math",stat:!0},{log2:function(e){return Ry(e)/Sy}});var Ty=mb.f,Uy=ce.f,Vy=Za.enforce,Wy=Ea("match"),Rc=Q.RegExp,Qk=Rc.prototype,Ag=/a/g,Rk=/a/g,Sk=new Rc(Ag)!==Ag;if(ta&&Mc("RegExp",!Sk||Nc||ia((function(){return Rk[Wy]=!1,Rc(Ag)!=Ag||Rc(Rk)==Rk||"/a/i"!=Rc(Ag,"i")})))){for(var gd=function(e,t){var n,r=this instanceof gd,i=Fj(e),o=void 0===t;return!r&&i&&e.constructor===gd&&o||(Sk?i&&!o&&(e=e.source):e instanceof gd&&(o&&(t=Aj.call(e)),e=e.source),Nc&&(n=!!t&&-1<t.indexOf("y"))&&(t=t.replace(/y/g,"")),e=Th(Sk?new Rc(e,t):Rc(e,t),r?this:Qk,gd),Nc&&n&&(Vy(e).sticky=!0)),e},Xy=function(e){e in gd||Ty(gd,e,{configurable:!0,get:function(){return Rc[e]},set:function(t){Rc[e]=t}})},Iq=Uy(Rc),Jq=0;Iq.length>Jq;)Xy(Iq[Jq++]);Qk.constructor=gd,gd.prototype=Qk,Wa(Q,"RegExp",gd)}mg("RegExp"),vg("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),vg("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}})),vg("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),vg("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var Tk=function(e,t){return e===t?0:null==e?null==t?0:-1:null==t?null==e?0:1:"function"==typeof e.compare?e.compare(t):"function"==typeof t.compare?-t.compare(e):e<t?-1:e>t?1:0},Uk=[],Kq=Uk.sort,Yy=ia((function(){Uk.sort(void 0)})),Zy=ia((function(){Uk.sort(null)})),$y=cf("sort");ba({target:"Array",proto:!0,forced:Yy||!Zy||!$y},{sort:function(e){return void 0===e?Kq.call(lb(this)):Kq.call(lb(this),Sb(e))}});var Lq=Object.getPrototypeOf({}),Bg=function(e,t){var n;return e===t||(null==e?e==t:"function"===oa(e.equiv)?e.equiv(t):null==t?e==t:"function"===oa(t.equiv)?t.equiv(e):"string"!==oa(e)&&"string"!==oa(t)&&(null!=(n=Object.getPrototypeOf(e))&&n!==Lq||null!=(n=Object.getPrototypeOf(t))&&n!==Lq?"function"!==oa(e)&&void 0!==e.length&&"function"!==oa(t)&&void 0!==t.length?bz(e,t):e instanceof Set&&t instanceof Set?cz(e,t):e instanceof Map&&t instanceof Map?dz(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:az(e,t)))},bz=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Bg,r=e.length;if(r===t.length)for(;0<=--r&&n(e[r],t[r]););return 0>r},cz=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Bg;return e.size===t.size&&n(W(e.keys()).sort(),W(t.keys()).sort())},dz=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Bg;return e.size===t.size&&n(W(e).sort(),W(t).sort())},az=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Bg;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!t.hasOwnProperty(r)||!n(e[r],t[r]))return!1;return!0},Mq=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e){return void 0!==e?": "+e:""};return function(n){function r(n){return ua(this,r),i.call(this,e(n)+t(n))}Ga(r,n);var i=Ha(r);return r}(If(Error))},ez=Mq((function(){return"illegal argument(s)"})),bi=function(e){throw new ez(e)},Vk=Mq((function(){return"index out of bounds"})),Nq=1/4294967295,fz=function(){function e(){ua(this,e)}return cb(e,[{key:"float",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return this.int()*Nq*e}},{key:"norm",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 2*(this.int()*Nq-.5)*e}},{key:"minmax",value:function(e,t){return this.float()*(t-e)+e}}]),e}(),Wk=Math.random,gz=new(function(e){function t(){return ua(this,t),n.apply(this,arguments)}Ga(t,e);var n=Ha(t);return cb(t,[{key:"int",value:function(){return 4294967296*Wk()>>>0}},{key:"float",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return Wk()*e}},{key:"norm",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 2*(Wk()-.5)*e}}]),t}(fz)),Hi=Symbol(),Gm=function(){},hz=Mk.onFreeze,Xk=Object.freeze,iz=ia((function(){Xk(1)}));ba({target:"Object",stat:!0,forced:iz,sham:!wq},{freeze:function(e){return Xk&&va(e)?Xk(hz(e)):e}});var jz=cf("reduce"),kz=!ad&&79<Bd&&83>Bd;ba({target:"Array",proto:!0,forced:!jz||kz},{reduce:function(e){return Up(this,e,arguments.length,1<arguments.length?arguments[1]:void 0)}});var Fm=function(e){return null!=e&&"function"==typeof e.xform?e.xform():e},Vg=function(){function e(t){ua(this,e),this.value=t}return cb(e,[{key:"deref",value:function(){return this.value}}]),e}(),Ii=function(e){return e instanceof Vg?e.deref():e},$t=function(e,t){return[e,function(e){return e},t]},lz=M.mark((function(e,t){var n,r,i,o,a,s;return M.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:n=Fm(e)(Zt()),r=n[1],i=n[2],o=0;case 4:if(!(o<t.length)){u.next=15;break}if(a=t[o],!((s=i([],a))instanceof Vg)){u.next=10;break}return u.delegateYield(Ii(r(s.deref())),"t0",9);case 9:return u.abrupt("return");case 10:if(!s.length){u.next=12;break}return u.delegateYield(s,"t1",12);case 12:o++,u.next=4;break;case 15:return u.delegateYield(Ii(r([])),"t2",16);case 16:case"end":return u.stop()}}),lz)})),au=M.mark(Em),bu=function(e,t){return[e[0],e[1],t]},mz=function(){function e(t){ua(this,e),this._length=0,t&&this.into(t)}return cb(e,[{key:"length",get:function(){return this._length}},{key:"copy",value:function(){return new e(this)}},{key:"empty",value:function(){return new e}},{key:"clear",value:function(){this.release()}},{key:"release",value:function(){for(var e,t=this.head;t;)e=t.next,delete t.value,delete t.prev,delete t.next,t=e;return delete this.head,delete this.tail,this._length=0,!0}},{key:"compare",value:function(e){var t=this._length;if(t<e._length)return-1;if(t>e._length)return 1;if(0===t)return 0;t=this.head,e=e.head;for(var n=0;t&&0==n;)n=Tk(t.value,e.value),t=t.next,e=e.next;return n}},{key:"equiv",value:function(t){if(!(t instanceof e||null!=t&&"function"!=typeof t&&void 0!==t.length)||this._length!==t.length)return!1;if(!this._length||this===t)return!0;for(var n=this.head,r=0;r<t.length;r++){if(!Bg(n.value,t[r]))return!1;n=n.next}return!0}},{key:Symbol.iterator,value:M.mark((function e(){var t;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.head;case 1:if(!t){e.next=7;break}return e.next=4,t.value;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))},{key:"seq",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;if(!(e>=t||0>e)){e=this.nthCell(e);var n=this.nthCell(t-1);return t=function e(t){return{first:function(){return t.value},next:function(){return t!==n&&t.next?e(t.next):void 0}}},e?t(e):void 0}}},{key:"cycle",value:M.mark((function e(){return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this,"t0",2);case 2:e.next=0;break;case 4:case"end":return e.stop()}}),e,this)}))},{key:"$reduce",value:function(e,t){for(var n=this.head;n&&!(t instanceof Vg);)t=e(t,n.value),n=n.next;return t}},{key:"drop",value:function(){var e=this.head;if(e)return(this.head=e.next)?delete this.head.prev:delete this.tail,this._length--,e.value}},{key:"cons",value:function(e){return e={value:e,next:this.head},this.head?this.head.prev=e:this.tail=e,this.head=e,this._length++,this}},{key:"insertBefore",value:function(e,t){return e||bi("cell is undefined"),t={value:t,next:e,prev:e.prev},e.prev?e.prev.next=t:this.head=t,e.prev=t,this._length++,this}},{key:"insertAfter",value:function(e,t){return e||bi("cell is undefined"),t={value:t,next:e.next,prev:e},e.next?e.next.prev=t:this.tail=t,e.next=t,this._length++,this}},{key:"insertBeforeNth",value:function(e,t){if(0>e&&(e+=this._length),0>=e)return this.cons(t);if(0>e||e>=this._length)throw new Vk(e);return this.insertBefore(this.nthCellUnsafe(e),t)}},{key:"insertAfterNth",value:function(e,t){if(0>e&&(e+=this._length),e>=this._length-1)return this.push(t);if(0>e||e>=this._length)throw new Vk(e);return this.insertAfter(this.nthCellUnsafe(e),t)}},{key:"insertSorted",value:function(e,t){t=t||Tk;for(var n=this.head;n;){if(0>=t(e,n.value))return this.insertBefore(n,e);n=n.next}return this.push(e)}},{key:"find",value:function(e){for(var t=this.head;t;){if(t.value===e)return t;t=t.next}}},{key:"findWith",value:function(e){for(var t=this.head;t;){if(e(t.value))return t;t=t.next}}},{key:"concat",value:function(){for(var e=this.copy(),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(t=0;t<n.length;t++)e.into(n[t]);return e}},{key:"into",value:function(e){for(var t=0;t<e.length;t++)this.push(e[t])}},{key:"slice",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;t=0>t?t+this._length:t,n=0>n?n+this._length:n,(0>t||0>n)&&bi("invalid indices: ${from} / ${to}");for(var r=new e,i=this.nthCell(t);i&&++t<=n;)r.push(i.value),i=i.next;return r}},{key:"splice",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length?arguments[2]:void 0;if("number"==typeof t){if(0>t&&(t+=this._length),0>t||t>=this._length)throw new Vk(t);var i=this.nthCellUnsafe(t)}else i=t;var o=new e;if(0<n)for(;i&&0<n--;)this.remove(i),o.push(i.value),i=i.next;else i&&(i=i.next);if(r)if(i)for(n=0;n<r.length;n++)this.insertBefore(i,r[n]);else for(i=0;i<r.length;i++)this.push(r[i]);return o}},{key:"remove",value:function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,this._length--,this}},{key:"swap",value:function(e,t){if(e!==t){var n=e.value;e.value=t.value,t.value=n}return this}},{key:"push",value:function(e){return this.tail?(e={value:e,prev:this.tail},this.tail=this.tail.next=e,this._length++,this):this.cons(e)}},{key:"pop",value:function(){var e=this.tail;if(e)return(this.tail=e.prev)?delete this.tail.next:delete this.head,this._length--,e.value}},{key:"first",value:function(){return this.head&&this.head.value}},{key:"peek",value:function(){return this.tail&&this.tail.value}},{key:"setHead",value:function(e){return this.head?(this.head.value=e,this):this.cons(e)}},{key:"setTail",value:function(e){return this.tail?(this.tail.value=e,this):this.push(e)}},{key:"setNth",value:function(e,t){var n=this.nthCell(e);return!n&&bi("index out of bounds: ".concat(e)),n.value=t,this}},{key:"nth",value:function(e,t){return(e=this.nthCell(e))?e.value:t}},{key:"nthCell",value:function(e){if(0>e&&(e+=this._length),!(0>e||e>=this._length))return this.nthCellUnsafe(e)}},{key:"rotateLeft",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:return this.push(this.drop())}}},{key:"rotateRight",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:var e=this.peek();return this.pop(),this.cons(e)}}},{key:"map",value:function(t){for(var n=new e,r=this.head;r;)n.push(t(r.value)),r=r.next;return n}},{key:"filter",value:function(t){for(var n=new e,r=this.head;r;)t(r.value)&&n.push(r.value),r=r.next;return n}},{key:"reduce",value:function(e,t){for(var n=this.head;n;)t=e(t,n.value),n=n.next;return t}},{key:"shuffle",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:gz;if(2>this._length)return this;for(e=null!=e?e:Math.ceil(1.5*Math.log2(this._length));0<e;e--)for(var n=this.head;n;){var r=n.next;.5>t.float()?this.asHead(n):this.asTail(n),n=r}return this}},{key:"sort",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Tk;if(!this._length)return this;for(var t=1;;){var n=this.head;this.tail=this.head=void 0;for(var r=0;n;){r++;for(var i=n,o=0,a=0;a<t&&(o++,i=i.next);a++);for(a=t;0<o||0<a&&i;){if(0===o){var s=i;i=i.next,a--}else i&&0!==a?0>=e(n.value,i.value)?(s=n,n=n.next,o--):(s=i,i=i.next,a--):(s=n,n=n.next,o--);this.tail?this.tail.next=s:this.head=s,s.prev=this.tail,this.tail=s}n=i}if(this.tail.next=void 0,1>=r)return this;t*=2}}},{key:"reverse",value:function(){for(var e=this.head,t=this.tail,n=(this._length>>>1)+(1&this._length);e&&t&&0<n;){var r=e.value;e.value=t.value,t.value=r,e=e.next,t=t.prev,n--}return this}},{key:"asHead",value:function(e){return e===this.head||(this.remove(e),this.head.prev=e,e.next=this.head,e.prev=void 0,this.head=e,this._length++),this}},{key:"asTail",value:function(e){return e===this.tail||(this.remove(e),this.tail.next=e,e.prev=this.tail,e.next=void 0,this.tail=e,this._length++),this}},{key:"toString",value:function(){for(var e=[],t=this.head;t;)e.push(String(t.value)),t=t.next;return e.join(", ")}},{key:"toJSON",value:function(){return W(this)}},{key:"nthCellUnsafe",value:function(e){if(e<=this._length>>1)var t=this.head,n="next";else t=this.tail,n="prev",e=this._length-e-1;for(;0<e--&&t;)t=t[n];return t}}]),e}(),Sc=function(){function e(t,n){ua(this,e),n=Object.assign({maxlen:1/0,maxsize:1/0,map:function(){return new Map},ksize:function(){return 0},vsize:function(){return 0}},n),this.map=n.map(),this.items=new mz,this._size=0,this.opts=n,t&&this.into(t)}return cb(e,[{key:"length",get:function(){return this.items.length}},{key:"size",get:function(){return this._size}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:function(){return Wg((function(e){return[e.k,e]}),this.items)}},{key:"keys",value:function(){return Wg((function(e){return e.k}),this.items)}},{key:"values",value:function(){return Wg((function(e){return e.v}),this.items)}},{key:"copy",value:function(){var e=this.empty();e.items=this.items.copy();for(var t=e.items.head;t;)e.map.set(t.value.k,t),t=t.next;return e}},{key:"empty",value:function(){return new e(null,this.opts)}},{key:"release",value:function(){this._size=0,this.map.clear();var e=this.opts.release;if(e){for(var t;t=this.items.drop();)e(t.k,t.v);return!0}return this.items.release()}},{key:"has",value:function(e){return this.map.has(e)}},{key:"get",value:function(e,t){return(e=this.map.get(e))?this.resetEntry(e):t}},{key:"set",value:function(e,t){var n=this.opts.ksize(e)+this.opts.vsize(t),r=this.map.get(e);return this._size+=Math.max(0,n-(r?r.value.s:0)),this.ensureSize()&&this.doSetEntry(r,e,t,n),t}},{key:"into",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];this.set(n[0],n[1])}return this}},{key:"getSet",value:function(e,t){var n=this,r=this.map.get(e);return r?Promise.resolve(this.resetEntry(r)):t().then((function(t){return n.set(e,t)}))}},{key:"delete",value:function(e){return!!(e=this.map.get(e))&&(this.removeEntry(e),!0)}},{key:"resetEntry",value:function(e){return this.items.asTail(e),e.value.v}},{key:"ensureSize",value:function(){for(var e=this.opts.release,t=this.opts.maxsize,n=this.opts.maxlen;this._size>t||this.length>=n;){var r=this.items.drop();if(!r)return!1;this.map.delete(r.k),e&&e(r.k,r.v),this._size-=r.s}return!0}},{key:"removeEntry",value:function(e){var t=e.value;this.map.delete(t.k),this.items.remove(e),this.opts.release&&this.opts.release(t.k,t.v),this._size-=t.s}},{key:"doSetEntry",value:function(e,t,n,r){e?(e.value.v=n,e.value.s=r,this.items.asTail(e)):(this.items.push({k:t,v:n,s:r}),this.map.set(t,this.items.tail))}}]),e}(),nz=function(e){function t(e,r){return ua(this,t),r=Object.assign({ttl:36e5},r),n.call(this,e,r)}Ga(t,e);var n=Ha(t);return cb(t,[{key:"empty",value:function(){return new t(null,this.opts)}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"get",value:function(e,t){if(e=this.map.get(e)){if(e.value.t>=Date.now())return this.resetEntry(e);this.removeEntry(e)}return t}},{key:"set",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,r=this.opts.ksize(e)+this.opts.vsize(t),i=this.map.get(e);return this._size+=Math.max(0,r-(i?i.value.s:0)),this.ensureSize()&&(n=Date.now()+n,i?(i.value.v=t,i.value.s=r,i.value.t=n,this.items.asTail(i)):(this.items.push({k:e,v:t,s:r,t:n}),this.map.set(e,this.items.tail))),t}},{key:"getSet",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,i=this.get(e);return i?Promise.resolve(i):t().then((function(t){return n.set(e,t,r)}))}},{key:"prune",value:function(){for(var e=Date.now(),t=this.items.head;t;)t.value.t<e&&this.removeEntry(t),t=t.next}},{key:"ensureSize",value:function(){for(var e=this.opts.maxsize,n=this.opts.maxlen,r=Date.now(),i=this.items.head;i&&(this._size>e||this.length>=n);)i.value.t<r&&this.removeEntry(i),i=i.next;return Fi(Sd(t.prototype),"ensureSize",this).call(this)}}]),t}(Sc),Oq="object"==oa(Va)&&Va&&Va.Object===Object&&Va,oz="object"==("undefined"==typeof self?"undefined":oa(self))&&self&&self.Object===Object&&self,Wb=Oq||oz||Function("return this")(),gc=Wb.Symbol,Pq=Object.prototype,pz=Pq.hasOwnProperty,qz=Pq.toString,Cg=gc?gc.toStringTag:void 0,rz=Object.prototype.toString,Qq=gc?gc.toStringTag:void 0,le=function(e){if(null==e)e=void 0===e?"[object Undefined]":"[object Null]";else if(Qq&&Qq in Object(e)){var t=pz.call(e,Cg),n=e[Cg];try{e[Cg]=void 0;var r=!0}catch(e){}var i=qz.call(e);r&&(t?e[Cg]=n:delete e[Cg]),e=i}else e=rz.call(e);return e},Db=function(e){var t=oa(e);return null!=e&&("object"==t||"function"==t)},dj=function(e){return!!Db(e)&&("[object Function]"==(e=le(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)},Yk=Wb["__core-js_shared__"],Rq=function(){var e=/[^.]+$/.exec(Yk&&Yk.keys&&Yk.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),sz=Function.prototype.toString,me=function(e){if(null!=e){try{return sz.call(e)}catch(e){}return e+""}return""},tz=/^\[object .+?Constructor\]$/,uz=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=function(e,t){return e=null==e?void 0:e[t],!Db(e)||Rq&&Rq in e||!(dj(e)?uz:tz).test(me(e))?void 0:e},Dg=ne(Object,"create"),vz=Object.prototype.hasOwnProperty,wz=Object.prototype.hasOwnProperty;Ud.prototype.clear=function(){this.__data__=Dg?Dg(null):{},this.size=0},Ud.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},Ud.prototype.get=function(e){var t=this.__data__;return Dg?"__lodash_hash_undefined__"===(e=t[e])?void 0:e:vz.call(t,e)?t[e]:void 0},Ud.prototype.has=function(e){var t=this.__data__;return Dg?void 0!==t[e]:wz.call(t,e)},Ud.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Dg&&void 0===t?"__lodash_hash_undefined__":t,this};var Eg=function(e,t){return e===t||e!=e&&t!=t},ci=function(e,t){for(var n=e.length;n--;)if(Eg(e[n][0],t))return n;return-1},xz=Array.prototype.splice;Ce.prototype.clear=function(){this.__data__=[],this.size=0},Ce.prototype.delete=function(e){var t=this.__data__;return!(0>(e=ci(t,e)))&&(e==t.length-1?t.pop():xz.call(t,e,1),--this.size,!0)},Ce.prototype.get=function(e){var t=this.__data__;return 0>(e=ci(t,e))?void 0:t[e][1]},Ce.prototype.has=function(e){return-1<ci(this.__data__,e)},Ce.prototype.set=function(e,t){var n=this.__data__,r=ci(n,e);return 0>r?(++this.size,n.push([e,t])):n[r][1]=t,this};var Yg=Ce,Fg=ne(Wb,"Map"),di=function(e,t){e=e.__data__;var n=oa(t);return("string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?e["string"==typeof t?"string":"hash"]:e.map};De.prototype.clear=function(){this.size=0,this.__data__={hash:new Ud,map:new(Fg||Yg),string:new Ud}},De.prototype.delete=function(e){return e=di(this,e).delete(e),this.size-=e?1:0,e},De.prototype.get=function(e){return di(this,e).get(e)},De.prototype.has=function(e){return di(this,e).has(e)},De.prototype.set=function(e,t){var n=di(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var Xg=De;Jf.prototype.add=Jf.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Jf.prototype.has=function(e){return this.__data__.has(e)};var Sq=function(e,t,n,r){var i=e.length;for(n+=r?1:-1;r?n--:++n<i;)if(t(e[n],n,e))return n;return-1},yz=function(e){return e!=e},zz=function(e,t){var n;if(n=!(null==e||!e.length)){if(t==t)e:{n=-1;for(var r=e.length;++n<r;)if(e[n]===t){e=n;break e}e=-1}else e=Sq(e,yz,0);n=-1<e}return n},Az=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1},Bz=function(e,t){return e.has(t)},rf=ne(Wb,"Set"),Cz=function(){},Zk=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},Dz=1/0,Ez=rf&&1/Zk(new rf([,-0]))[1]==Dz?function(e){return new rf(e)}:Cz,$k=function(e,t,n){var r=-1,i=zz,o=e.length,a=!0,s=[],u=s;if(n)a=!1,i=Az;else if(200<=o){if(i=t?null:Ez(e))return Zk(i);a=!1,i=Bz,u=new Jf}else u=t?[]:s;e:for(;++r<o;){var c=e[r],l=t?t(c):c;if(c=n||0!==c?c:0,a&&l==l){for(var f=u.length;f--;)if(u[f]===l)continue e;t&&u.push(l),s.push(c)}else i(u,l,n)||(u!==s&&u.push(l),s.push(c))}return s},Tq=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},He=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};Ee.prototype.clear=function(){this.__data__=new Yg,this.size=0},Ee.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},Ee.prototype.get=function(e){return this.__data__.get(e)},Ee.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Yg){var r=n.__data__;if(!Fg||199>r.length)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Xg(r)}return n.set(e,t),this.size=n.size,this};var Ge=Ee,ku=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},ei=function(){try{var e=ne(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Gg=function(e,t,n){"__proto__"==t&&ei?ei(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Fz=Object.prototype.hasOwnProperty,Lm=function(e,t,n){var r=e[t];Fz.call(e,t)&&Eg(r,n)&&(void 0!==n||t in e)||Gg(e,t,n)},Re=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),i?Gg(n,s,u):Lm(n,s,u)}return n},Bc=function(e){return null!=e&&"object"==oa(e)},Uq=function(e){return Bc(e)&&"[object Arguments]"==le(e)},Vq=Object.prototype,Gz=Vq.hasOwnProperty,Hz=Vq.propertyIsEnumerable,Tf=Uq(function(){return arguments}())?Uq:function(e){return Bc(e)&&Gz.call(e,"callee")&&!Hz.call(e,"callee")},pb=Array.isArray,Iz=function(){return!1},Lf=tb((function(e,t){var n=(t=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e;t=n&&n.exports===t?Wb.Buffer:void 0,e.exports=(t?t.isBuffer:void 0)||Iz})),Jz=/^(?:0|[1-9]\d*)$/,al=function(e,t){var n=oa(e);return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Jz.test(e))&&-1<e&&0==e%1&&e<t},bl=function(e){return"number"==typeof e&&-1<e&&0==e%1&&9007199254740991>=e},Ua={};Ua["[object Float32Array]"]=Ua["[object Float64Array]"]=Ua["[object Int8Array]"]=Ua["[object Int16Array]"]=Ua["[object Int32Array]"]=Ua["[object Uint8Array]"]=Ua["[object Uint8ClampedArray]"]=Ua["[object Uint16Array]"]=Ua["[object Uint32Array]"]=!0,Ua["[object Arguments]"]=Ua["[object Array]"]=Ua["[object ArrayBuffer]"]=Ua["[object Boolean]"]=Ua["[object DataView]"]=Ua["[object Date]"]=Ua["[object Error]"]=Ua["[object Function]"]=Ua["[object Map]"]=Ua["[object Number]"]=Ua["[object Object]"]=Ua["[object RegExp]"]=Ua["[object Set]"]=Ua["[object String]"]=Ua["[object WeakMap]"]=!1;var Kz=function(e){return Bc(e)&&bl(e.length)&&!!Ua[le(e)]},fi=function(e){return function(t){return e(t)}},sf=tb((function(e,t){var n=t&&!t.nodeType&&t;n=(t=n&&e&&!e.nodeType&&e)&&t.exports===n&&Oq.process;e:{try{var r=t&&t.require&&t.require("util").types;if(r){var i=r;break e}i=n&&n.binding&&n.binding("util");break e}catch(e){}i=void 0}e.exports=i})),Wq=sf&&sf.isTypedArray,Oi=Wq?fi(Wq):Kz,Lz=Object.prototype.hasOwnProperty,Xq=function(e,t){var n=pb(e),r=!n&&Tf(e),i=!n&&!r&&Lf(e),o=!n&&!r&&!i&&Oi(e);if(n=n||r||i||o){r=e.length;for(var a=String,s=-1,u=Array(r);++s<r;)u[s]=a(s);r=u}else r=[];for(var c in a=r.length,e)!t&&!Lz.call(e,c)||n&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||al(c,a))||r.push(c);return r},Mz=Object.prototype,cl=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Mz)},Yq=function(e,t){return function(n){return e(t(n))}},Nz=Yq(Object.keys,Object),Oz=Object.prototype.hasOwnProperty,$d=function(e){return null!=e&&bl(e.length)&&!dj(e)},Vd=function(e){if($d(e))e=Xq(e);else if(cl(e)){var t,n=[];for(t in Object(e))Oz.call(e,t)&&"constructor"!=t&&n.push(t);e=n}else e=Nz(e);return e},gu=function(e,t){return e&&Re(t,Vd(t),e)},Pz=Object.prototype.hasOwnProperty,Mf=function(e){if($d(e))e=Xq(e,!0);else if(Db(e)){var t=cl(e),n=[];for(r in e)("constructor"!=r||!t&&Pz.call(e,r))&&n.push(r);e=n}else{var r=[];if(null!=e)for(t in Object(e))r.push(t);e=r}return e},eu=function(e,t){return e&&Re(t,Mf(t),e)},Im=tb((function(e,t){var n=(t=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e,r=(t=n&&n.exports===t?Wb.Buffer:void 0)?t.allocUnsafe:void 0;e.exports=function(e,t){return t?e.slice():(t=e.length,t=r?r(t):new e.constructor(t),e.copy(t),t)}})),Ji=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},Qz=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o},Zq=function(){return[]},Rz=Object.prototype.propertyIsEnumerable,$q=Object.getOwnPropertySymbols,dl=$q?function(e){return null==e?[]:(e=Object(e),Qz($q(e),(function(t){return Rz.call(e,t)})))}:Zq,fu=function(e,t){return Re(e,dl(e),t)},Ni=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},el=Yq(Object.getPrototypeOf,Object),ar=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Ni(t,dl(e)),e=el(e);return t}:Zq,du=function(e,t){return Re(e,ar(e),t)},br=function(e,t,n){return t=t(e),pb(e)?t:Ni(t,n(e))},Ki=function(e){return br(e,Vd,dl)},Km=function(e){return br(e,Mf,ar)},fl=ne(Wb,"DataView"),gl=ne(Wb,"Promise"),hl=ne(Wb,"WeakMap"),Sz=me(fl),Tz=me(Fg),Uz=me(gl),Vz=me(rf),Wz=me(hl),oe=le;(fl&&"[object DataView]"!=oe(new fl(new ArrayBuffer(1)))||Fg&&"[object Map]"!=oe(new Fg)||gl&&"[object Promise]"!=oe(gl.resolve())||rf&&"[object Set]"!=oe(new rf)||hl&&"[object WeakMap]"!=oe(new hl))&&(oe=function(e){var t=le(e);if(e=(e="[object Object]"==t?e.constructor:void 0)?me(e):"")switch(e){case Sz:return"[object DataView]";case Tz:return"[object Map]";case Uz:return"[object Promise]";case Vz:return"[object Set]";case Wz:return"[object WeakMap]"}return t});var Kf=oe,Xz=Object.prototype.hasOwnProperty,cu=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Xz.call(e,"index")&&(n.index=e.index,n.input=e.input),n},gi=Wb.Uint8Array,il=function(e){var t=new e.constructor(e.byteLength);return new gi(t).set(new gi(e)),t},Yz=/\w*$/,cr=gc?gc.prototype:void 0,dr=cr?cr.valueOf:void 0,vn=function(e,t){return t=t?il(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.length)},hu=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return il(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return t=n?il(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return vn(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return(t=new e.constructor(e.source,Yz.exec(e))).lastIndex=e.lastIndex,t;case"[object Set]":return new r;case"[object Symbol]":return dr?Object(dr.call(e)):{}}},er=Object.create,Zz=function(){function e(){}return function(t){return Db(t)?er?er(t):(e.prototype=t,t=new e,e.prototype=void 0,t):{}}}(),Jm=function(e){return"function"!=typeof e.constructor||cl(e)?{}:Zz(el(e))},$z=function(e){return Bc(e)&&"[object Map]"==Kf(e)},fr=sf&&sf.isMap,ju=fr?fi(fr):$z,aA=function(e){return Bc(e)&&"[object Set]"==Kf(e)},gr=sf&&sf.isSet,iu=gr?fi(gr):aA,Na={};Na["[object Arguments]"]=Na["[object Array]"]=Na["[object ArrayBuffer]"]=Na["[object DataView]"]=Na["[object Boolean]"]=Na["[object Date]"]=Na["[object Float32Array]"]=Na["[object Float64Array]"]=Na["[object Int8Array]"]=Na["[object Int16Array]"]=Na["[object Int32Array]"]=Na["[object Map]"]=Na["[object Number]"]=Na["[object Object]"]=Na["[object RegExp]"]=Na["[object Set]"]=Na["[object String]"]=Na["[object Symbol]"]=Na["[object Uint8Array]"]=Na["[object Uint8ClampedArray]"]=Na["[object Uint16Array]"]=Na["[object Uint32Array]"]=!0,Na["[object Error]"]=Na["[object Function]"]=Na["[object WeakMap]"]=!1;var Ie=function(e){return"symbol"==oa(e)||Bc(e)&&"[object Symbol]"==le(e)},bA=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,cA=/^\w*$/,jl=function(e,t){if(pb(e))return!1;var n=oa(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Ie(e))||(cA.test(e)||!bA.test(e)||null!=t&&e in Object(t))};Li.Cache=Xg;var dA=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,eA=/\\(\\)?/g,fA=function(e){var t=(e=Li(e,(function(e){return 500===t.size&&t.clear(),e}))).cache;return e}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(dA,(function(e,n,r,i){t.push(r?i.replace(eA,"$1"):n||e)})),t})),lu=1/0,hr=gc?gc.prototype:void 0,Nm=hr?hr.toString:void 0,hi=function(e,t){return pb(e)?e:jl(e,t)?[e]:fA(null==e?"":Mm(e))},gA=1/0,Hg=function(e){if("string"==typeof e||Ie(e))return e;var t=e+"";return"0"==t&&1/e==-gA?"-0":t},ii=function(e,t){for(var n=0,r=(t=hi(t,e)).length;null!=e&&n<r;)e=e[Hg(t[n++])];return n&&n==r?e:void 0},hA=function(e,t){if(!(2>(t=hi(t,e)).length)){var n=t,r=0,i=-1,o=-1,a=n.length;for(0>r&&(r=-r>a?0:a+r),0>(i=i>a?a:i)&&(i+=a),a=r>i?0:i-r>>>0,r>>>=0,i=Array(a);++o<a;)i[o]=n[o+r];e=ii(e,i)}return(n=null==e)||(n=null==t?0:t.length,n=delete e[Hg(n?t[n-1]:void 0)]),n},ir=Function.prototype.toString,iA=Object.prototype.hasOwnProperty,jA=ir.call(Object),wn=function(e){return!(!Bc(e)||"[object Object]"!=le(e))&&(null===(e=el(e))||"function"==typeof(e=iA.call(e,"constructor")&&e.constructor)&&e instanceof e&&ir.call(e)==jA)},kA=function(e){return wn(e)?void 0:e},jr=gc?gc.isConcatSpreadable:void 0,mu=function(e){return pb(e)||Tf(e)||!!(jr&&e&&e[jr])},lA=function(e){return null!=e&&e.length?Mi(e,1):[]},mA=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},kr=Math.max,lr=function(e,t,n){return t=kr(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=kr(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];for(i=-1,o=Array(t+1);++i<t;)o[i]=r[i];return o[t]=n(a),mA(e,this,o)}},nA=function(e){return function(){return e}},ji=function(e){return e},oA=Date.now,mr=function(e){var t=0,n=0;return function(){var r=oA(),i=16-(r-n);if(n=r,0<i){if(800<=++t)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(ei?function(e,t){return ei(e,"toString",{configurable:!0,enumerable:!1,value:nA(t),writable:!0})}:ji),kl=function(e){return mr(lr(e,void 0,lA),e+"")}((function(e,t){var n={};if(null==e)return n;var r=!1;t=He(t,(function(t){return t=hi(t,e),r||(r=1<t.length),t})),Re(e,Km(e),n),r&&(n=Fe(n,7,kA));for(var i=t.length;i--;)hA(n,t[i]);return n})),pA=function(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r},un=function(e,t,n){for(var r=-1,i=Object(e),o=(n=n(e)).length;o--;){var a=n[++r];if(!1===t(i[a],a,i))break}return e},nr=function(e,t){return e&&un(e,t,Vd)},ll=function(e,t){return function(t,n){if(null==t)return t;if(!$d(t))return e(t,n);for(var r=t.length,i=-1,o=Object(t);++i<r&&!1!==n(o[i],i,o););return t}}(nr),qA=function(e,t,n,r){return ll(e,(function(e,i,o){t(r,e,n(e),o)})),r},or=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},Om=function(e,t,n,r,i,o){var a=1&n,s=e.length,u=t.length;if(s!=u&&!(a&&u>s))return!1;u=o.get(e);var c=o.get(t);if(u&&c)return u==t&&c==e;u=-1,c=!0;var l=2&n?new Jf:void 0;for(o.set(e,t),o.set(t,e);++u<s;){var f=e[u],h=t[u];if(r)var p=a?r(h,f,u,t,e,o):r(f,h,u,e,t,o);if(void 0!==p){if(p)continue;c=!1;break}if(l){if(!or(t,(function(e,t){if(!l.has(t)&&(f===e||i(f,e,n,r,o)))return l.push(t)}))){c=!1;break}}else if(f!==h&&!i(f,h,n,r,o)){c=!1;break}}return o.delete(e),o.delete(t),c},rA=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},pr=gc?gc.prototype:void 0,ml=pr?pr.valueOf:void 0,nu=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!o(new gi(e),new gi(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return Eg(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=rA;case"[object Set]":if(s||(s=Zk),e.size!=t.size&&!(1&r))break;return(n=a.get(e))?n==t:(r|=2,a.set(e,t),t=Om(s(e),s(t),r,i,o,a),a.delete(e),t);case"[object Symbol]":if(ml)return ml.call(e)==ml.call(t)}return!1},ou=Object.prototype.hasOwnProperty,Pm=Object.prototype.hasOwnProperty,sA=function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var u=(s=n[i])[0],c=e[u],l=s[1];if(a&&s[2]){if(void 0===c&&!(u in e))return!1}else{if(s=new Ge,r)var f=r(c,l,u,e,t,s);if(void 0===f?!Je(l,c,3,r,s):!f)return!1}}return!0},tA=function(e){for(var t=Vd(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,i==i&&!Db(i)]}return t},qr=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}},uA=function(e){var t=tA(e);return 1==t.length&&t[0][2]?qr(t[0][0],t[0][1]):function(n){return n===e||sA(n,e,t)}},vA=function(e,t){return jl(e)&&t==t&&!Db(t)?qr(Hg(e),t):function(n){var r=null==n?void 0:ii(n,e);if(void 0===(r=void 0===r?void 0:r)&&r===t){if(r=null!=n){for(var i=-1,o=(r=hi(r=e,n)).length,a=!1;++i<o;){var s=Hg(r[i]);if(!(a=null!=n&&null!=n&&s in Object(n)))break;n=n[s]}a||++i!=o?r=a:r=!!(o=null==n?0:n.length)&&bl(o)&&al(s,o)&&(pb(n)||Tf(n))}s=r}else s=Je(t,r,3);return s}},wA=function(e){return function(t){return null==t?void 0:t[e]}},xA=function(e){return function(t){return ii(t,e)}},tf=function(e){return"function"==typeof e?e:null==e?ji:"object"==oa(e)?pb(e)?vA(e[0],e[1]):uA(e):jl(e)?wA(Hg(e)):xA(e)},nl=function(e,t){return function(t,n){var r={};return(pb(t)?pA:qA)(t,e,tf(n),r)}}((function(e,t,n){Gg(e,n,t)})),hd=function(e,t){var n={};return t=tf(t),nr(e,(function(e,r,i){Gg(n,r,t(e,r,i))})),n};ba({target:"String",proto:!0,forced:ia((function(){var e="".sub('"');return e!==e.toLowerCase()||3<e.split('"').length}))},{sub:function(){return"<sub>"+String(Bb(this))+"</sub>"}});var ma=Oa,hc=null;try{hc=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(c){}Oa.prototype.__isLong__,Object.defineProperty(Oa.prototype,"__isLong__",{value:!0}),Oa.isLong=Eb;var Rm={},Qm={};Oa.fromInt=Wd,Oa.fromNumber=$b,Oa.fromBits=Pa;var Zg=Math.pow;Oa.fromString=Pi,Oa.fromValue=oc;var Ke=4294967296,Sm=Ke*Ke,Um=Sm/2,rr=Wd(16777216),ac=Wd(0);Oa.ZERO=ac;var Xd=Wd(0,!0);Oa.UZERO=Xd;var uf=Wd(1);Oa.ONE=uf;var sr=Wd(1,!0);Oa.UONE=sr;var ol=Wd(-1);Oa.NEG_ONE=ol;var Vm=Pa(-1,2147483647,!1);Oa.MAX_VALUE=Vm;var Tm=Pa(-1,-1,!0);Oa.MAX_UNSIGNED_VALUE=Tm;var Fb=Pa(0,-2147483648,!1);Oa.MIN_VALUE=Fb;var T=Oa.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*Ke+(this.low>>>0):this.high*Ke+(this.low>>>0)},T.toString=function(e){if(2>(e=e||10)||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(Fb)){var t=$b(e),n=this.div(t);return t=n.mul(t).sub(this),n.toString(e)+t.toInt().toString(e)}return"-"+this.neg().toString(e)}n=$b(Zg(e,6),this.unsigned),t=this;for(var r="";;){var i=t.div(n),o=(t.sub(i.mul(n)).toInt()>>>0).toString(e);if((t=i).isZero())return o+r;for(;6>o.length;)o="0"+o;r=""+o+r}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Fb)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&0>this.high},T.isPositive=function(){return this.unsigned||0<=this.high},T.isOdd=function(){return 1==(1&this.low)},T.isEven=function(){return 0==(1&this.low)},T.equals=function(e){return Eb(e)||(e=oc(e)),(this.unsigned===e.unsigned||1!=this.high>>>31||1!=e.high>>>31)&&(this.high===e.high&&this.low===e.low)},T.eq=T.equals,T.notEquals=function(e){return!this.eq(e)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(e){return 0>this.comp(e)},T.lt=T.lessThan,T.lessThanOrEqual=function(e){return 0>=this.comp(e)},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(e){return 0<this.comp(e)},T.gt=T.greaterThan,T.greaterThanOrEqual=function(e){return 0<=this.comp(e)},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(e){if(Eb(e)||(e=oc(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(Fb)?Fb:this.not().add(uf)},T.neg=T.negate,T.add=function(e){Eb(e)||(e=oc(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=e.high>>>16,o=65535&e.high,a=e.low>>>16;return r=(a=((e=(65535&this.low)+(65535&e.low))>>>16)+(r+a))>>>16,Pa((65535&a)<<16|65535&e,(t=((r+=n+o)>>>16)+(t+i)&65535)<<16|65535&r,this.unsigned)},T.subtract=function(e){return Eb(e)||(e=oc(e)),this.add(e.neg())},T.sub=T.subtract,T.multiply=function(e){if(this.isZero())return ac;if(Eb(e)||(e=oc(e)),hc){var t=hc.mul(this.low,this.high,e.low,e.high);return Pa(t,hc.get_high(),this.unsigned)}if(e.isZero())return ac;if(this.eq(Fb))return e.isOdd()?Fb:ac;if(e.eq(Fb))return this.isOdd()?Fb:ac;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(rr)&&e.lt(rr))return $b(this.toNumber()*e.toNumber(),this.unsigned);t=this.high>>>16;var n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,a=65535&e.high,s=e.low>>>16,u=i*(e=65535&e.low),c=(u>>>16)+r*e,l=c>>>16;l+=(c=(65535&c)+i*s)>>>16;var f=(l+=n*e)>>>16;return Pa((65535&c)<<16|65535&u,(f=(f+=(l=(65535&l)+r*s)>>>16)+((l=(65535&l)+i*a)>>>16)+(t*e+n*s+r*a+i*o)&65535)<<16|65535&l,this.unsigned)},T.mul=T.multiply,T.divide=function(e){if(Eb(e)||(e=oc(e)),e.isZero())throw Error("division by zero");if(hc)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?Pa(e=(this.unsigned?hc.div_u:hc.div_s)(this.low,this.high,e.low,e.high),hc.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Xd:ac;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Xd;if(e.gt(this.shru(1)))return sr;var t=Xd}else{if(this.eq(Fb)){if(e.eq(uf)||e.eq(ol))return Fb;if(e.eq(Fb))return uf;var n=this.shr(1).div(e).shl(1);if(n.eq(ac))return e.isNegative()?uf:ol;var r=this.sub(e.mul(n));return n.add(r.div(e))}if(e.eq(Fb))return this.unsigned?Xd:ac;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();t=ac}for(r=this;r.gte(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));var i=Math.ceil(Math.log(n)/Math.LN2);i=48>=i?1:Zg(2,i-48);for(var o=$b(n),a=o.mul(e);a.isNegative()||a.gt(r);)a=(o=$b(n-=i,this.unsigned)).mul(e);o.isZero()&&(o=uf),t=t.add(o),r=r.sub(a)}return t},T.div=T.divide,T.modulo=function(e){return Eb(e)||(e=oc(e)),hc?Pa(e=(this.unsigned?hc.rem_u:hc.rem_s)(this.low,this.high,e.low,e.high),hc.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return Pa(~this.low,~this.high,this.unsigned)},T.and=function(e){return Eb(e)||(e=oc(e)),Pa(this.low&e.low,this.high&e.high,this.unsigned)},T.or=function(e){return Eb(e)||(e=oc(e)),Pa(this.low|e.low,this.high|e.high,this.unsigned)},T.xor=function(e){return Eb(e)||(e=oc(e)),Pa(this.low^e.low,this.high^e.high,this.unsigned)},T.shiftLeft=function(e){return Eb(e)&&(e=e.toInt()),0==(e&=63)?this:32>e?Pa(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Pa(0,this.low<<e-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(e){return Eb(e)&&(e=e.toInt()),0==(e&=63)?this:32>e?Pa(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Pa(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(e){if(Eb(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return 32>e?Pa(this.low>>>e|t<<32-e,t>>>e,this.unsigned):Pa(32===e?t:t>>>e-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?Pa(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:Pa(this.low,this.high,!0)},T.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},T.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},Oa.fromBytes=function(e,t,n){return n?Oa.fromBytesLE(e,t):Oa.fromBytesBE(e,t)},Oa.fromBytesLE=function(e,t){return new Oa(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},Oa.fromBytesBE=function(e,t){return new Oa(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var Qi=function(e,t){return(Qi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},pl=!1,bc={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e?console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Error().stack):pl&&console.log("RxJS: Back to a better error behavior. Thank you. <3"),pl=e},get useDeprecatedSynchronousErrorHandling(){return pl}},ki={closed:!0,next:function(e){},error:function(e){if(bc.useDeprecatedSynchronousErrorHandling)throw e;Me(e)},complete:function(){}},cc=Array.isArray||function(e){return e&&"number"==typeof e.length},Nf=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),kb=function(){function e(e){this.closed=!1,this._subscriptions=this._parentOrParents=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){if(!this.closed){var t=this._parentOrParents,n=this._ctorUnsubscribe,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._subscriptions=this._parentOrParents=null,t instanceof e)t.remove(this);else if(null!==t)for(var o=0;o<t.length;++o)t[o].remove(this);if(Le(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(e){var a=e instanceof Nf?Wm(e.errors):[e]}}if(cc(i))for(o=-1,t=i.length;++o<t;)if(Ri(n=i[o]))try{n.unsubscribe()}catch(e){a=a||[],e instanceof Nf?a=a.concat(Wm(e.errors)):a.push(e)}if(a)throw new Nf(a)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(oa(t)){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof e||(t=n,(n=new e)._subscriptions=[t]);break;default:throw Error("unrecognized teardown "+t+" added to Subscription.")}if(null===(t=n._parentOrParents))n._parentOrParents=this;else if(t instanceof e){if(t===this)return n;n._parentOrParents=[t,this]}else{if(-1!==t.indexOf(this))return n;t.push(this)}return null===(t=this._subscriptions)?this._subscriptions=[n]:t.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;t&&(-1!==(e=t.indexOf(e))&&t.splice(e,1))},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}(),li="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),za=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=ki;break;case 1:if(!n){o.destination=ki;break}if("object"===oa(n)){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new tr(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new tr(o,n,r,i)}return o}return da(t,e),t.prototype[li]=function(){return this},t.create=function(e,n,r){return(e=new t(e,n,r)).syncErrorThrowable=!1,e},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.isStopped=this.closed=!1,this._parentOrParents=e,this},t}(kb),tr=function(e){function t(t,n,r,i){var o=e.call(this)||this;if(o._parentSubscriber=t,t=o,Le(n))var a=n;else n&&(a=n.next,r=n.error,i=n.complete,n!==ki&&(Le((t=Object.create(n)).unsubscribe)&&o.add(t.unsubscribe.bind(t)),t.unsubscribe=o.unsubscribe.bind(o)));return o._context=t,o._next=a,o._error=r,o._complete=i,o}return da(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;bc.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=bc.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Me(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Me(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};bc.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,n):this.__tryOrUnsub(n)}this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),bc.useDeprecatedSynchronousErrorHandling)throw e;Me(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!bc.useDeprecatedSynchronousErrorHandling)throw Error("bad call");try{t.call(this._context,n)}catch(t){return bc.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):Me(t),!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._parentSubscriber=this._context=null,e.unsubscribe()},t}(za),Ne="function"==typeof Symbol&&Symbol.observable||"@@observable",ra=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator;e:{if(e){if(e instanceof za)break e;if(e[li]){e=e[li]();break e}}e=e||t||n?new za(e,t,n):new za(ki)}if(r?e.add(r.call(e,this.source)):e.add(this.source||bc.useDeprecatedSynchronousErrorHandling&&!e.syncErrorThrowable?this._subscribe(e):this._trySubscribe(e)),bc.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable&&(e.syncErrorThrowable=!1,e.syncErrorThrown))throw e.syncErrorValue;return e},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){bc.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),Si(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Ym(t))((function(t,r){var i=n.subscribe((function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[Ne]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:Xm(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Ym(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}(),Kd=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),ur=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return da(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;this.subject=null,!t||0===t.length||e.isStopped||e.closed||-1!==(e=t.indexOf(this.subscriber))&&t.splice(e,1)}},t}(kb),vr=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return da(t,e),t}(za),nb=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return da(t,e),t.prototype[li]=function(){return new vr(this)},t.prototype.lift=function(e){var t=new wr(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new Kd;if(!this.isStopped){var t=this.observers,n=t.length;t=t.slice();for(var r=0;r<n;r++)t[r].next(e)}},t.prototype.error=function(e){if(this.closed)throw new Kd;this.hasError=!0,this.thrownError=e,this.isStopped=!0;var t=this.observers,n=t.length;t=t.slice();for(var r=0;r<n;r++)t[r].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new Kd;this.isStopped=!0;var e=this.observers,t=e.length;e=e.slice();for(var n=0;n<t;n++)e[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.closed=this.isStopped=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new Kd;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new Kd;return this.hasError?(e.error(this.thrownError),kb.EMPTY):this.isStopped?(e.complete(),kb.EMPTY):(this.observers.push(e),new ur(this,e))},t.prototype.asObservable=function(){var e=new ra;return e.source=this,e},t.create=function(e,t){return new wr(e,t)},t}(ra),wr=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return da(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):kb.EMPTY},t}(nb),pu=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;return n._refCount++,e=new yA(e,n),t=t.subscribe(e),e.closed||(e.connection=n.connect()),t},e}(),yA=function(e){function t(t,n){return(t=e.call(this,t)||this).connectable=n,t}return da(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;0>=t?this.connection=null:(e._refCount=t-1,1<t?this.connection=null:(t=this.connection,e=e._connection,this.connection=null,!e||t&&e!==t||e.unsubscribe()))}else this.connection=null},t}(za),xr=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return da(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new kb).add(this.source.subscribe(new zA(this.getSubject(),this))),e.closed&&(this._connection=null,e=kb.EMPTY)),e},t.prototype.refCount=function(){return Zm()(this)},t}(ra),bv=function(){var e=xr.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),zA=function(e){function t(t,n){return(t=e.call(this,t)||this).connectable=n,t}return da(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(vr);!function(e){function t(t,n){return(t=e.call(this,t)||this).connectable=n,t}da(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;0>=t?this.connection=null:(e._refCount=t-1,1<t?this.connection=null:(t=this.connection,e=e._connection,this.connection=null,!e||t&&e!==t||e.unsubscribe()))}else this.connection=null}}(za),function(e){function t(t,n,r,i,o){return(t=e.call(this,t)||this).keySelector=n,t.elementSelector=r,t.durationSelector=i,t.subjectSelector=o,t.groups=null,t.attemptedToUnsubscribe=!1,t.count=0,t}da(t,e),t.prototype._next=function(e){try{var t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},t.prototype._group=function(e,t){var n=this.groups;n||(n=this.groups=new Map);var r=n.get(t);if(this.elementSelector)try{var i=this.elementSelector(e)}catch(e){this.error(e)}else i=e;if(!r&&(r=this.subjectSelector?this.subjectSelector():new nb,n.set(t,r),e=new ql(t,r,this),this.destination.next(e),this.durationSelector)){e=void 0;try{e=this.durationSelector(new ql(t,r))}catch(e){return void this.error(e)}this.add(e.subscribe(new AA(t,r,this)))}r.closed||r.next(i)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach((function(t,n){t.error(e)})),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach((function(e,t){e.complete()})),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))}}(za);var AA=function(e){function t(t,n,r){var i=e.call(this,n)||this;return i.key=t,i.group=n,i.parent=r,i}return da(t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},t}(za),ql=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.groupSubject=n,i.refCountSubscription=r,i}return da(t,e),t.prototype._subscribe=function(e){var t=new kb,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new BA(n)),t.add(r.subscribe(e)),t},t}(ra),BA=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return da(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),--t.count,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(kb),CA=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return da(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Kd;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(nb),Ig=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return da(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,e=this.id;var n=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(n,e,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){return this.closed?Error("executing a cancelled action"):(this.pending=!1,(e=this._execute(e,t))?e:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))))},t.prototype._execute=function(e,t){t=!1;var n=void 0;try{this.work(e)}catch(e){t=!0,n=!!e&&e||Error(e)}if(t)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.state=this.work=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return da(t,e),t.prototype.schedule=function(e,t){return this},t}(kb)),DA=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return da(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),0<n?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return 0<n||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(Ig),rl=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),Jg=function(e){function t(n,r){void 0===r&&(r=rl.now);var i=e.call(this,n,(function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return da(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(rl),Kg=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return da(t,e),t}(Jg))(DA),Nb=new ra((function(e){return e.complete()})),$m=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},sl;!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}(sl||(sl={}));var vf=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return wb(this.value);case"E":return pa(this.error);case"C":return Of()}throw Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),tu=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new yr(e,this.scheduler,this.delay))},e}(),yr=function(e){function t(t,n,r){return void 0===r&&(r=0),(t=e.call(this,t)||this).scheduler=n,t.delay=r,t}return da(t,e),t.dispatch=function(e){e.notification.observe(e.destination),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new EA(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(vf.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(vf.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(vf.createComplete()),this.unsubscribe()},t}(za),EA=function(e,t){this.notification=e,this.destination=t},Qe=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=1>t?1:t,i._windowTime=1>n?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return da(t,e),t.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift()}e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new FA(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;if(this.closed)throw new Kd;if(this.isStopped||this.hasError)var o=kb.EMPTY;else this.observers.push(e),o=new ur(this,e);if(r&&e.add(e=new yr(e,r)),t)for(t=0;t<i&&!e.closed;t++)e.next(n[t]);else for(t=0;t<i&&!e.closed;t++)e.next(n[t].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o},t.prototype._getNow=function(){return(this.scheduler||Kg).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),0<o&&r.splice(0,o),r},t}(nb),FA=function(e,t){this.time=e,this.value=t},Qf=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return da(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),kb.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),kb.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(nb),GA=1,HA=Promise.resolve(),Vi={},zr={setImmediate:function(e){var t=GA++;return Vi[t]=!0,HA.then((function(){return an(t)&&e()})),t},clearImmediate:function(e){an(e)}},IA=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return da(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=zr.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(zr.clearImmediate(n),t.scheduled=void 0)},t}(Ig),ej=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return da(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(Jg))(IA),JA=ej,tl=new Jg(Ig),xd=tl,KA=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return da(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(Ig),Ar=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return da(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(Jg))(KA),LA=function(e){function t(t,n){void 0===t&&(t=Br),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return da(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(Jg),Br=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return da(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),this.delay=e.frame+r,(e=e.actions).push(this),e.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(Ig),ul=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),bh=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),Pb=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}(),uu=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new MA(e,this.project,this.thisArg))},e}(),MA=function(e){function t(t,n,r){return(t=e.call(this,t)||this).project=n,t.count=0,t.thisArg=r||t,t}return da(t,e),t.prototype._next=function(e){try{var t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(za),vl=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return da(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(za),zu=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return da(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(za),NA=function(e){return function(t){return e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,Me),t}},vd="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",OA=function(e){return function(t){for(var n=e[vd]();;){var r=void 0;try{r=n.next()}catch(e){return t.error(e),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t}},PA=function(e){return function(t){var n=e[Ne]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}},gn=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e},Rf=function(e){if(e&&"function"==typeof e[Ne])return PA(e);if(gn(e))return $m(e);if(en(e))return NA(e);if(e&&"function"==typeof e[vd])return OA(e);throw e=Ri(e)?"an invalid object":"'"+e+"'",new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},Cr={},RA=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new QA(e,this.resultSelector))},e}(),QA=function(e){function t(t,n){return(t=e.call(this,t)||this).resultSelector=n,t.active=0,t.values=[],t.observables=[],t}return da(t,e),t.prototype._next=function(e){this.values.push(Cr),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.toRespond=this.active=t;for(var n=0;n<t;n++)this.add(Wi(this,e[n],void 0,n))}},t.prototype.notifyComplete=function(e){0==--this.active&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n){var r=(e=this.values)[n];r=this.toRespond?r===Cr?--this.toRespond:this.toRespond:0,e[n]=t,0===r&&(this.resultSelector?this._tryResultSelector(e):this.destination.next(e.slice()))},t.prototype._tryResultSelector=function(e){try{var t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(vl),id=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return da(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(za);!function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i}da(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()}}(za);var jd=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return da(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(za);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}da(t,e),t.prototype.notifyNext=function(e,t,n,r){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()}}(za);var Du=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new SA(e,this.project,this.concurrent))},e}(),SA=function(e){function t(t,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),(t=e.call(this,t)||this).project=n,t.concurrent=r,t.hasCompleted=!1,t.buffer=[],t.active=0,t.index=0,t}return da(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t=this.index++;try{var n=this.project(e,t)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(n)},t.prototype._innerSub=function(e){var t=new id(this),n=this.destination;n.add(t),(e=Yc(e,t))!==t&&n.add(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(jd),wl=Q.parseFloat,Dr=-1/0!=1/wl("\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff-0")?function(e){e=Ij(String(e));var t=wl(e);return 0===t&&"-"==e.charAt(0)?-0:t}:wl;ba({global:!0,forced:parseFloat!=Dr},{parseFloat:Dr});var xl=new ra(Cc),Iu=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new TA(e,this.predicate,this.thisArg))},e}(),TA=function(e){function t(t,n,r){return(t=e.call(this,t)||this).predicate=n,t.thisArg=r,t.count=0,t}return da(t,e),t.prototype._next=function(e){try{var t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(za),Ju=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new UA(e))},e}(),UA=function(e){function t(t){return(t=e.call(this,t)||this).hasFirst=!1,t.observables=[],t.subscriptions=[],t}return da(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=Wi(this,e[n],void 0,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}},t.prototype.notifyNext=function(e,t,n){if(!this.hasFirst){for(this.hasFirst=!0,e=0;e<this.subscriptions.length;e++)if(e!==n){var r=this.subscriptions[e];r.unsubscribe(),this.remove(r)}this.subscriptions=null}this.destination.next(t)},t}(vl),Mu=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new VA(e,this.resultSelector))},e}(),VA=function(e){function t(t,n,r){return(t=e.call(this,t)||this).resultSelector=n,t.iterators=[],t.active=0,t.resultSelector="function"==typeof n?n:void 0,t}return da(t,e),t.prototype._next=function(e){var t=this.iterators;cc(e)?t.push(new WA(e)):"function"==typeof e[vd]?t.push(new XA(e[vd]())):t.push(new YA(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0===t)this.destination.complete();else{this.active=t;for(var n=0;n<t;n++){var r=e[n];r.stillUnsubscribed?this.destination.add(r.subscribe()):this.active--}}},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){var i=e[r];if("function"==typeof i.hasValue&&!i.hasValue())return}var o=!1,a=[];for(r=0;r<t;r++){var s=(i=e[r]).next();if(i.hasCompleted()&&(o=!0),s.done)return void n.complete();a.push(s.value)}this.resultSelector?this._tryresultSelector(a):n.next(a),o&&n.complete()},t.prototype._tryresultSelector=function(e){try{var t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(za),XA=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return!(!e||!e.done)},e}(),WA=function(){function e(e){this.array=e,this.length=this.index=0,this.length=e.length}return e.prototype[vd]=function(){return this},e.prototype.next=function(e){e=this.index++;var t=this.array;return e<this.length?{value:t[e],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),YA=function(e){function t(t,n,r){return(t=e.call(this,t)||this).parent=n,t.observable=r,t.stillUnsubscribed=!0,t.buffer=[],t.isComplete=!1,t}return da(t,e),t.prototype[vd]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return 0<this.buffer.length},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return Yc(this.observable,new id(this))},t}(jd),ZA=Object.freeze({__proto__:null,Observable:ra,ConnectableObservable:xr,GroupedObservable:ql,observable:Ne,Subject:nb,BehaviorSubject:CA,ReplaySubject:Qe,AsyncSubject:Qf,asap:JA,asapScheduler:ej,async:xd,asyncScheduler:tl,queue:Kg,queueScheduler:Kg,animationFrame:Ar,animationFrameScheduler:Ar,VirtualTimeScheduler:LA,VirtualAction:Br,Scheduler:rl,Subscription:kb,Subscriber:za,Notification:vf,get NotificationKind(){return sl},pipe:Ti,noop:Cc,identity:td,isObservable:function(e){return!!e&&(e instanceof ra||"function"==typeof e.lift&&"function"==typeof e.subscribe)},ArgumentOutOfRangeError:ul,EmptyError:bh,ObjectUnsubscribedError:Kd,UnsubscriptionError:Nf,TimeoutError:Pb,bindCallback:bn,bindNodeCallback:cn,combineLatest:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=t=void 0;return ud(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&cc(e[0])&&(e=e[0]),Pf(e,n).lift(new RA(t))},concat:hn,defer:wd,empty:Of,forkJoin:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(cc(n))return ah(n,null);if(Ri(n)&&Object.getPrototypeOf(n)===Object.prototype)return ah((e=Object.keys(n)).map((function(e){return n[e]})),e)}if("function"==typeof e[e.length-1]){var r=e.pop();return ah(e=1===e.length&&cc(e[0])?e[0]:e,null).pipe(Da((function(e){return r.apply(void 0,e)})))}return ah(e,null)},from:Dc,fromEvent:Gb,fromEventPattern:kn,generate:function(e,t,n,r,i){if(1==arguments.length){var o=e.initialState;t=e.condition,n=e.iterate;var a=e.resultSelector||td;i=e.scheduler}else void 0===r||ud(r)?(o=e,a=td,i=r):(o=e,a=r);return new ra((function(e){var r=o;if(i)return i.schedule(Eu,0,{subscriber:e,iterate:n,condition:t,resultSelector:a,state:r});for(;;){if(t){var s=void 0;try{s=t(r)}catch(t){e.error(t);break}if(!s){e.complete();break}}s=void 0;try{s=a(r)}catch(t){e.error(t);break}if(e.next(s),e.closed)break;try{r=n(r)}catch(t){e.error(t);break}}}))},iif:function(e,t,n){return void 0===t&&(t=Nb),void 0===n&&(n=Nb),wd((function(){return e()?t:n}))},interval:ln,merge:Ec,never:function(){return xl},of:wb,onErrorResumeNext:Yi,pairs:function(e,t){return new ra(t?function(n){var r=Object.keys(e),i=new kb;return i.add(t.schedule(Gu,0,{keys:r,index:0,subscriber:n,subscription:i,obj:e})),i}:function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var i=n[r];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()})},partition:function(e,t,n){return[Ob(t,n)(new ra(Rf(e))),Ob(Hu(t,n))(new ra(Rf(e)))]},race:ab,range:function(e,t,n){return void 0===e&&(e=0),new ra((function(r){void 0===t&&(t=e,e=0);var i=0,o=e;if(n)return n.schedule(Ku,0,{index:i,count:t,start:e,subscriber:r});for(;;){if(i++>=t){r.complete();break}if(r.next(o++),r.closed)break}}))},throwError:pa,timer:Zc,using:function(e,t){return new ra((function(n){try{var r=e()}catch(e){return void n.error(e)}try{var i=t(r)}catch(e){return void n.error(e)}var o=(i?Dc(i):Nb).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}}))},zip:Zi,scheduled:fn,EMPTY:Nb,NEVER:xl,config:bc}),Nu=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new $A(e,this.selector,this.caught))},e}(),$A=function(e){function t(t,n,r){return(t=e.call(this,t)||this).selector=n,t.caught=r,t}return da(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),t=new id(this),this.add(t),(n=Yc(n,t))!==t&&this.add(n)}},t}(jd),Ou=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new aB(e,this.defaultValue))},e}(),aB=function(e){function t(t,n){return(t=e.call(this,t)||this).defaultValue=n,t.isEmpty=!0,t}return da(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(za),Pu=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new bB(e,this.delay,this.scheduler))},e}(),bB=function(e){function t(t,n,r){return(t=e.call(this,t)||this).delay=n,t.scheduler=r,t.queue=[],t.active=!1,t.errored=!1,t}return da(t,e),t.dispatch=function(e){for(var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;0<n.length&&0>=n[0].time-r.now();)n.shift().notification.observe(i);0<n.length?(t=Math.max(0,n[0].time-r.now()),this.schedule(e,t)):(this.unsubscribe(),t.active=!1)},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler;e=new cB(t.now()+this.delay,e),this.queue.push(e),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(vf.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(vf.createComplete()),this.unsubscribe()},t}(za),cB=function(e,t){this.time=e,this.notification=t},Qu=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new dB(e,this.keySelector,this.flushes))},e}(),dB=function(e){function t(t,n,r){return(t=e.call(this,t)||this).keySelector=n,t.values=new Set,r&&t.add(Yc(r,new id(t))),t}return da(t,e),t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t=this.destination;try{var n=this.keySelector(e)}catch(e){return void t.error(e)}this._finalizeNext(n,e)},t.prototype._finalizeNext=function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))},t}(jd),Su=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,t){return t.subscribe(new eB(e,this.errorFactory))},e}(),eB=function(e){function t(t,n){return(t=e.call(this,t)||this).errorFactory=n,t.hasValue=!1,t}return da(t,e),t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},t}(za),Tu=function(){function e(e){if(this.total=e,0>this.total)throw new ul}return e.prototype.call=function(e,t){return t.subscribe(new fB(e,this.total))},e}(),fB=function(e){function t(t,n){return(t=e.call(this,t)||this).total=n,t.count=0,t}return da(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(za),Uu=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new gB(e,this.callback))},e}(),gB=function(e){function t(t,n){return(t=e.call(this,t)||this).add(new kb(n)),t}return da(t,e),t}(za),Wu=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new hB(e))},e}(),hB=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return da(t,e),t.prototype._next=function(e){},t}(za),Xu=function(){function e(e){if(this.total=e,0>this.total)throw new ul}return e.prototype.call=function(e,t){return t.subscribe(new iB(e,this.total))},e}(),iB=function(e){function t(t,n){return(t=e.call(this,t)||this).total=n,t.ring=[],t.count=0,t}return da(t,e),t.prototype._next=function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(0<t)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=t++%n;e.next(r[o])}e.complete()},t}(za),Yu=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new jB(e,this.value))},e}(),jB=function(e){function t(t,n){return(t=e.call(this,t)||this).value=n,t}return da(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(za),Zu=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new kB(e,this.accumulator,this.seed,this.hasSeed))},e}(),kB=function(e){function t(t,n,r,i){return(t=e.call(this,t)||this).accumulator=n,t._seed=r,t.hasSeed=i,t.index=0,t}return da(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t=this.index++;try{var n=this.accumulator(this.seed,e,t)}catch(e){this.destination.error(e)}this.seed=n,this.destination.next(n)},t}(za),av=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory();return(e=n(r).subscribe(e)).add(t.subscribe(r)),e},e}(),cv=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new lB(e,this.notifier,this.source))},e}(),lB=function(e){function t(t,n,r){return(t=e.call(this,t)||this).notifier=n,t.source=r,t}return da(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.retriesSubscription=this.errors=void 0;else{n=new nb;try{r=(0,this.notifier)(n)}catch(t){return e.prototype.error.call(this,t)}i=Yc(r,new id(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},t}(jd),fv=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new mB(e,this.project))},e}(),mB=function(e){function t(t,n){return(t=e.call(this,t)||this).project=n,t.index=0,t}return da(t,e),t.prototype._next=function(e){var t=this.index++;try{var n=this.project(e,t)}catch(e){return void this.destination.error(e)}this._innerSub(n)},t.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe(),t=new id(this);var n=this.destination;n.add(t),this.innerSubscription=Yc(e,t),this.innerSubscription!==t&&n.add(this.innerSubscription)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(jd),gv=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){e=new nB(e);var n=Yc(this.notifier,new id(e));return n&&!e.seenValue?(e.add(n),t.subscribe(e)):e},e}(),nB=function(e){function t(t){return(t=e.call(this,t)||this).seenValue=!1,t}return da(t,e),t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(jd),hv=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new oB(e,this.nextOrObserver,this.error,this.complete))},e}(),oB=function(e){function t(t,n,r,i){return(t=e.call(this,t)||this)._tapNext=Cc,t._tapError=Cc,t._tapComplete=Cc,t._tapError=r||Cc,t._tapComplete=i||Cc,Le(n)?(t._context=t,t._tapNext=n):n&&(t._context=n,t._tapNext=n.next||Cc,t._tapError=n.error||Cc,t._tapComplete=n.complete||Cc),t}return da(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(za),jv={leading:!0,trailing:!1};!function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.destination=t,o.durationSelector=n,o._leading=r,o._trailing=i,o._hasValue=!1,o}da(t,e),t.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},t.prototype.send=function(){var e=this._sendValue;this._hasValue&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=void 0},t.prototype.throttle=function(e){(e=this.tryDurationSelector(e))&&this.add(this._throttled=Yc(e,new id(this)))},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(e){return this.destination.error(e),null}},t.prototype.throttlingDone=function(){var e=this._throttled,t=this._trailing;e&&e.unsubscribe(),this._throttled=void 0,t&&this.send()},t.prototype.notifyNext=function(){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()}}(jd);for(var kv=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new pB(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),pB=function(e){function t(t,n,r,i,o){return(t=e.call(this,t)||this).duration=n,t.scheduler=r,t.leading=i,t.trailing=o,t._hasTrailingValue=!1,t._trailingValue=null,t}return da(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(lv,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(za),nv=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new qB(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),qB=function(e){function t(t,n,r,i,o){return(t=e.call(this,t)||this).absoluteTimeout=n,t.waitFor=r,t.withObservable=i,t.scheduler=o,t.scheduleTimeout(),t}return da(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(Yc(t,new id(e)))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=void 0,this.withObservable=this.scheduler=null},t}(jd),pv=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new rB(e,this.observables,this.project))},e}(),rB=function(e){function t(t,n,r){(t=e.call(this,t)||this).observables=n,t.project=r,t.toRespond=[],r=n.length,t.values=Array(r);for(var i=0;i<r;i++)t.toRespond.push(i);for(i=0;i<r;i++)t.add(Wi(t,n[i],void 0,i));return t}return da(t,e),t.prototype.notifyNext=function(e,t,n){this.values[n]=t,0<(e=this.toRespond).length&&(-1!==(n=e.indexOf(n))&&e.splice(n,1))},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){0===this.toRespond.length&&(e=[e].concat(this.values),this.project?this._tryProject(e):this.destination.next(e))},t.prototype._tryProject=function(e){try{var t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(vl),Er=tb((function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=Array(16);e.exports=function(){for(var e,t=0;16>t;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}})),ub=[],mi=0;256>mi;++mi)ub[mi]=(mi+256).toString(16).substr(1);var Fr=function(e,t){return t=t||0,[ub[e[t++]],ub[e[t++]],ub[e[t++]],ub[e[t++]],"-",ub[e[t++]],ub[e[t++]],"-",ub[e[t++]],ub[e[t++]],"-",ub[e[t++]],ub[e[t++]],"-",ub[e[t++]],ub[e[t++]],ub[e[t++]],ub[e[t++]],ub[e[t++]],ub[e[t++]]].join("")},Lg=function(e,t,n){if(n=t&&n||0,"string"==typeof e&&(t="binary"===e?Array(16):null,e=null),(e=(e=e||{}).random||(e.rng||Er)())[6]=15&e[6]|64,e[8]=63&e[8]|128,t)for(var r=0;16>r;++r)t[n+r]=e[r];return t||Fr(e)},Mg=Lg(),aj=!1,sn=new AbortController,kd,Ld,yl,zl,Md,pe,yc,wf,ic,Al,ld,qe,md,nd,od,xf;!function(e){e[e.ATTRIBUTE_OPERATION_ERR_FAILURE=2]="ATTRIBUTE_OPERATION_ERR_FAILURE",e[e.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT=3]="ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT",e[e.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW=4]="ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW",e[e.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN=5]="ATTRIBUTE_OPERATION_ERR_TOO_OFTEN",e[e.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND=6]="ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND",e[e.ATTRIBUTE_OPERATION_ERR_TIMEOUT=7]="ATTRIBUTE_OPERATION_ERR_TIMEOUT",e[e.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN=102]="ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN"}(kd||(kd={})),function(e){e[e.CHANNEL_MESSAGE_ERR_FAILURE=1]="CHANNEL_MESSAGE_ERR_FAILURE",e[e.CHANNEL_MESSAGE_ERR_TIMEOUT=2]="CHANNEL_MESSAGE_ERR_TIMEOUT",e[e.CHANNEL_MESSAGE_ERR_TOO_OFTEN=3]="CHANNEL_MESSAGE_ERR_TOO_OFTEN",e[e.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE=4]="CHANNEL_MESSAGE_ERR_INVALID_MESSAGE",e[e.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL=5]="CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL",e[e.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(Ld||(Ld={})),function(e){e[e.CREATE_CHANNEL_ERR_INVALID_ARGUMENT=1]="CREATE_CHANNEL_ERR_INVALID_ARGUMENT"}(yl||(yl={})),function(e){e[e.CREATE_INSTANCE_ERR_INVALID_ARGUMENT=1]="CREATE_INSTANCE_ERR_INVALID_ARGUMENT"}(zl||(zl={})),function(e){e[e.GET_MEMBERS_ERR_FAILURE=1]="GET_MEMBERS_ERR_FAILURE",e[e.GET_MEMBERS_ERR_REJECTED=2]="GET_MEMBERS_ERR_REJECTED",e[e.GET_MEMBERS_ERR_TIMEOUT=3]="GET_MEMBERS_ERR_TIMEOUT",e[e.GET_MEMBERS_ERR_TOO_OFTEN=4]="GET_MEMBERS_ERR_TOO_OFTEN",e[e.GET_MEMBERS_ERR_NOT_IN_CHANNEL=5]="GET_MEMBERS_ERR_NOT_IN_CHANNEL",e[e.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN=102]="GET_MEMBERS_ERR_USER_NOT_LOGGED_IN"}(Md||(Md={})),function(e){e[e.INVITATION_API_CALL_ERR_INVALID_ARGUMENT=1]="INVITATION_API_CALL_ERR_INVALID_ARGUMENT",e[e.INVITATION_API_CALL_ERR_NOT_STARTED=2]="INVITATION_API_CALL_ERR_NOT_STARTED",e[e.INVITATION_API_CALL_ERR_ALREADY_END=3]="INVITATION_API_CALL_ERR_ALREADY_END",e[e.INVITATION_API_CALL_ERR_ALREADY_ACCEPT=4]="INVITATION_API_CALL_ERR_ALREADY_ACCEPT",e[e.INVITATION_API_CALL_ERR_ALREADY_SENT=5]="INVITATION_API_CALL_ERR_ALREADY_SENT"}(pe||(pe={})),function(e){e[e.JOIN_CHANNEL_ERR_FAILURE=1]="JOIN_CHANNEL_ERR_FAILURE",e[e.JOIN_CHANNEL_ERR_REJECTED=2]="JOIN_CHANNEL_ERR_REJECTED",e[e.JOIN_CHANNEL_ERR_INVALID_ARGUMENT=3]="JOIN_CHANNEL_ERR_INVALID_ARGUMENT",e[e.JOIN_CHANNEL_TIMEOUT=4]="JOIN_CHANNEL_TIMEOUT",e[e.JOIN_CHANNEL_ERR_EXCEED_LIMIT=5]="JOIN_CHANNEL_ERR_EXCEED_LIMIT",e[e.JOIN_CHANNEL_ERR_ALREADY_JOINED=6]="JOIN_CHANNEL_ERR_ALREADY_JOINED",e[e.JOIN_CHANNEL_ERR_TOO_OFTEN=7]="JOIN_CHANNEL_ERR_TOO_OFTEN",e[e.JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN=8]="JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN",e[e.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN",e[e.JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE=201]="JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE",e[e.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID=202]="JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID"}(yc||(yc={})),function(e){e[e.LEAVE_CHANNEL_ERR_FAILURE=1]="LEAVE_CHANNEL_ERR_FAILURE",e[e.LEAVE_CHANNEL_ERR_REJECTED=2]="LEAVE_CHANNEL_ERR_REJECTED",e[e.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL=3]="LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL",e[e.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN"}(wf||(wf={})),function(e){e[e.LOGIN_ERR_UNKNOWN=1]="LOGIN_ERR_UNKNOWN",e[e.LOGIN_ERR_REJECTED=2]="LOGIN_ERR_REJECTED",e[e.LOGIN_ERR_INVALID_ARGUMENT=3]="LOGIN_ERR_INVALID_ARGUMENT",e[e.LOGIN_ERR_INVALID_APP_ID=4]="LOGIN_ERR_INVALID_APP_ID",e[e.LOGIN_ERR_INVALID_TOKEN=5]="LOGIN_ERR_INVALID_TOKEN",e[e.LOGIN_ERR_TOKEN_EXPIRED=6]="LOGIN_ERR_TOKEN_EXPIRED",e[e.LOGIN_ERR_NOT_AUTHORIZED=7]="LOGIN_ERR_NOT_AUTHORIZED",e[e.LOGIN_ERR_ALREADY_LOGIN=8]="LOGIN_ERR_ALREADY_LOGIN",e[e.LOGIN_ERR_TIMEOUT=9]="LOGIN_ERR_TIMEOUT",e[e.LOGIN_ERR_TOO_OFTEN=10]="LOGIN_ERR_TOO_OFTEN",e[e.LOGIN_ERR_ABORTED_BY_LOGOUT=201]="LOGIN_ERR_ABORTED_BY_LOGOUT"}(ic||(ic={})),function(e){e[e.LOGOUT_ERR_USER_NOT_LOGGED_IN=102]="LOGOUT_ERR_USER_NOT_LOGGED_IN"}(Al||(Al={})),function(e){e[e.PEER_MESSAGE_ERR_FAILURE=1]="PEER_MESSAGE_ERR_FAILURE",e[e.PEER_MESSAGE_ERR_TIMEOUT=2]="PEER_MESSAGE_ERR_TIMEOUT",e[e.PEER_MESSAGE_ERR_TOO_OFTEN=5]="PEER_MESSAGE_ERR_TOO_OFTEN",e[e.PEER_MESSAGE_ERR_INVALID_USERID=6]="PEER_MESSAGE_ERR_INVALID_USERID",e[e.PEER_MESSAGE_ERR_INVALID_MESSAGE=7]="PEER_MESSAGE_ERR_INVALID_MESSAGE",e[e.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE=8]="PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE",e[e.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(ld||(ld={})),function(e){e[e.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT=2]="QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED=3]="QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT=4]="QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN=5]="QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN"}(qe||(qe={})),function(e){e[e.RENEW_TOKEN_ERR_FAILURE=1]="RENEW_TOKEN_ERR_FAILURE",e[e.RENEW_TOKEN_ERR_INVALID_ARGUMENT=2]="RENEW_TOKEN_ERR_INVALID_ARGUMENT",e[e.RENEW_TOKEN_ERR_REJECTED=3]="RENEW_TOKEN_ERR_REJECTED",e[e.RENEW_TOKEN_ERR_TOO_OFTEN=4]="RENEW_TOKEN_ERR_TOO_OFTEN",e[e.RENEW_TOKEN_ERR_TOKEN_EXPIRED=5]="RENEW_TOKEN_ERR_TOKEN_EXPIRED",e[e.RENEW_TOKEN_ERR_INVALID_TOKEN=6]="RENEW_TOKEN_ERR_INVALID_TOKEN",e[e.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN=102]="RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN",e[e.RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT=201]="RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT"}(md||(md={})),function(e){e[e.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE=1]="GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT=2]="GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN=3]="GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT=4]="GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT=5]="GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED=101]="GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN=102]="GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN"}(nd||(nd={})),function(e){e[e.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE=1]="PEER_SUBSCRIPTION_STATUS_ERR_FAILURE",e[e.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT=2]="PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT",e[e.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED=3]="PEER_SUBSCRIPTION_STATUS_ERR_REJECTED",e[e.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT=4]="PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT",e[e.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN=5]="PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN",e[e.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW=6]="PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW",e[e.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN=102]="PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN"}(od||(od={})),function(e){e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE=1]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE",e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT=2]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT",e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN=3]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN",e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN"}(xf||(xf={}));var jc=kd.ATTRIBUTE_OPERATION_ERR_FAILURE,bb=kd.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT,Se=kd.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW;kd.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN;var Gr=kd.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND,kc=kd.ATTRIBUTE_OPERATION_ERR_TIMEOUT,lc=kd.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN,ni=Ld.CHANNEL_MESSAGE_ERR_FAILURE,Bl=Ld.CHANNEL_MESSAGE_ERR_TIMEOUT,Hr=Ld.CHANNEL_MESSAGE_ERR_TOO_OFTEN,Cl=Ld.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE,sB=Ld.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL,Dl=Ld.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN,tB=yl.CREATE_CHANNEL_ERR_INVALID_ARGUMENT,Ir=zl.CREATE_INSTANCE_ERR_INVALID_ARGUMENT;nd.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE;var Jr=nd.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT;nd.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN;var Kr=nd.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT,uB=nd.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT;nd.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED;var vB=nd.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN,wB=Md.GET_MEMBERS_ERR_FAILURE,xB=Md.GET_MEMBERS_ERR_REJECTED;Md.GET_MEMBERS_ERR_TIMEOUT,Md.GET_MEMBERS_ERR_TOO_OFTEN;var yB=Md.GET_MEMBERS_ERR_NOT_IN_CHANNEL,zB=Md.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN,Tc=pe.INVITATION_API_CALL_ERR_INVALID_ARGUMENT,AB=pe.INVITATION_API_CALL_ERR_NOT_STARTED,oi=pe.INVITATION_API_CALL_ERR_ALREADY_END,Lr=pe.INVITATION_API_CALL_ERR_ALREADY_ACCEPT,BB=pe.INVITATION_API_CALL_ERR_ALREADY_SENT,Mr=yc.JOIN_CHANNEL_ERR_FAILURE;yc.JOIN_CHANNEL_ERR_REJECTED;var CB=yc.JOIN_CHANNEL_ERR_INVALID_ARGUMENT,Nr=yc.JOIN_CHANNEL_TIMEOUT,Or=yc.JOIN_CHANNEL_ERR_EXCEED_LIMIT,Pr=yc.JOIN_CHANNEL_ERR_ALREADY_JOINED;yc.JOIN_CHANNEL_ERR_TOO_OFTEN;var Qr=yc.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN,Rr=yc.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID,Sr=wf.LEAVE_CHANNEL_ERR_FAILURE,Tr=wf.LEAVE_CHANNEL_ERR_REJECTED,DB=wf.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL,EB=wf.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN,Ur=ic.LOGIN_ERR_UNKNOWN,Ng=ic.LOGIN_ERR_REJECTED,pi=ic.LOGIN_ERR_INVALID_ARGUMENT,Vr=ic.LOGIN_ERR_INVALID_APP_ID,Wr=ic.LOGIN_ERR_INVALID_TOKEN,qi=ic.LOGIN_ERR_TOKEN_EXPIRED;ic.LOGIN_ERR_NOT_AUTHORIZED;var FB=ic.LOGIN_ERR_ALREADY_LOGIN,GB=ic.LOGIN_ERR_TIMEOUT,HB=ic.LOGIN_ERR_TOO_OFTEN,Xr=Al.LOGOUT_ERR_USER_NOT_LOGGED_IN,Yr=ld.PEER_MESSAGE_ERR_FAILURE,El=ld.PEER_MESSAGE_ERR_TIMEOUT,Zr=ld.PEER_MESSAGE_ERR_TOO_OFTEN,$r=ld.PEER_MESSAGE_ERR_INVALID_USERID,Xf=ld.PEER_MESSAGE_ERR_INVALID_MESSAGE,Fl=ld.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN;ld.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE;var as=qe.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT;qe.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED;var IB=qe.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT;qe.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN;var JB=qe.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN,Gl=md.RENEW_TOKEN_ERR_FAILURE,KB=md.RENEW_TOKEN_ERR_INVALID_ARGUMENT;md.RENEW_TOKEN_ERR_REJECTED,md.RENEW_TOKEN_ERR_TOO_OFTEN;var LB=md.RENEW_TOKEN_ERR_TOKEN_EXPIRED,MB=md.RENEW_TOKEN_ERR_INVALID_TOKEN,bs=md.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN,cs=od.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE,Og=od.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT;od.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED;var NB=od.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT;od.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN;var ds=od.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW,Hl=od.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN;xf.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE,xf.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT,xf.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN,xf.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN;var OB=function(e,t){var n;return ll(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n},ri=function(e,t,n){if(!Db(n))return!1;var r=oa(t);return!!("number"==r?$d(n)&&al(t,n.length):"string"==r&&t in n)&&Eg(n[t],e)},Il=function(e,t,n){var r=pb(e)?or:OB;return n&&ri(e,t,n)&&(t=void 0),r(e,tf(t))},PB=function(e,t){var n=-1,r=$d(e)?Array(e.length):[];return ll(e,(function(e,i,o){r[++n]=t(e,i,o)})),r},QB=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},RB=function(e,t,n){t=t.length?He(t,(function(e){return pb(e)?function(t){return ii(t,1===e.length?e[0]:e)}:e})):[ji];var r=-1;return t=He(t,fi(tf)),e=PB(e,(function(e,n,i){return{criteria:He(t,(function(t){return t(e)})),index:++r,value:e}})),QB(e,(function(e,t){e:{for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){t:{var u=i[r],c=o[r];if(u!==c){var l=void 0!==u,f=null===u,h=u==u,p=Ie(u),d=void 0!==c,b=null===c,v=c==c,g=Ie(c);if(!b&&!g&&!p&&u>c||p&&d&&v&&!b&&!g||f&&d&&v||!l&&v||!h){u=1;break t}if(!f&&!p&&!g&&u<c||g&&l&&h&&!f&&!p||b&&l&&h||!d&&h||!v){u=-1;break t}}u=0}if(u){e=r>=s?u:u*("desc"==n[r]?-1:1);break e}}e=e.index-t.index}return e}))},es=function(e,t){return mr(lr(e,t,ji),e+"")},fs=es((function(e,t){if(null==e)return[];var n=t.length;return 1<n&&ri(e,t[0],t[1])?t=[]:2<n&&ri(t[0],t[1],t[2])&&(t=[t[0]]),RB(e,Mi(t,1),[])})),gs=function(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}(ZA),hs=tb((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=[],r=function(e,t){return new WebSocket(e,t)};t.normalClosureMessage="Normal closure",t.default=function(e,i){var o=(i=void 0===i?{protocols:n,makeWebSocket:r}:i).protocols,a=void 0===o?n:o,s=void 0===(i=i.makeWebSocket)?r:i;return new gs.Observable((function(n){var r,i=new gs.Subject,o=s(e,a),u=!1,c=!1,l=function(e){if(r)throw u=!0,e=Error("Web socket message factory function called more than once"),n.error(e),e;return r=e.subscribe((function(e){o.send(e)})),i};return o.onopen=function(){c?(u=!0,o.close()):n.next(l)},o.onmessage=function(e){i.next(e.data)},o.onerror=function(e){u=!0,n.error(Error(e.message))},o.onclose=function(e){u||(u=!0,c?(n.complete(),i.complete()):n.error(Error(1e3===e.code?t.normalClosureMessage:e.reason)))},function(){c=!0,r&&r.unsubscribe(),u||(u=!0,o.close())}}))}}));!function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default}(hs);var cj=function(e,t,n){(void 0===n||Eg(e[t],n))&&(void 0!==n||t in e)||Gg(e,t,n)},bj=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},SB=function(e){return es((function(t,n){var r=-1,i=n.length,o=1<i?n[i-1]:void 0,a=2<i?n[2]:void 0;for(o=3<e.length&&"function"==typeof o?(i--,o):void 0,a&&ri(n[0],n[1],a)&&(o=3>i?void 0:o,i=1),t=Object(t);++r<i;)(a=n[r])&&e(t,a,r,o);return t}))}((function(e,t,n,r){tn(e,t,n,r)})),TB=Math.floor,UB=Math.random,is=function(e,t){return e+TB(UB()*(t-e+1))},js=function(e){var t=e.length;return t?e[is(0,t-1)]:void 0},VB=function(e,t){return He(t,(function(t){return e[t]}))},tj=function(e){return null==e?[]:VB(e,Vd(e))},WB=function(e){return js(tj(e))},Xn=function(e){return(pb(e)?js:WB)(e)},xn=[],yn=function(e,t){return new WebSocket(e,t)},XB=Math.floor;ba({target:"Number",stat:!0},{isInteger:function(e){return!va(e)&&isFinite(e)&&XB(e)===e}}),Mp("from",mk,lk);var YB=function(e,t){for(var n=Array(arguments.length-1),r=0,i=2,o=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,a){n[r]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,a(e))}}))},ZB=tb((function(e,t){t.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;1<--t%4&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};var n=Array(64),r=Array(123);for(e=0;64>e;)r[n[e]=26>e?e+65:52>e?e+71:62>e?e-4:e-59|43]=e++;t.encode=function(e,t,r){for(var i,o=null,a=[],s=0,u=0;t<r;){var c=e[t++];switch(u){case 0:a[s++]=n[c>>2],i=(3&c)<<4,u=1;break;case 1:a[s++]=n[i|c>>4],i=(15&c)<<2,u=2;break;case 2:a[s++]=n[i|c>>6],a[s++]=n[63&c],u=0}8191<s&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return u&&(a[s++]=n[i],a[s++]=61,1===u&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))},t.decode=function(e,t,n){for(var i,o=n,a=0,s=0;s<e.length;){var u=e.charCodeAt(s++);if(61===u&&1<a)break;if(void 0===(u=r[u]))throw Error("invalid encoding");switch(a){case 0:i=u,a=1;break;case 1:t[n++]=i<<2|(48&u)>>4,i=u,a=2;break;case 2:t[n++]=(15&i)<<4|(60&u)>>2,i=u,a=3;break;case 3:t[n++]=(3&i)<<6|u,a=0}}if(1===a)throw Error("invalid encoding");return n-o},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}));eh.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},eh.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else{e=this._listeners[e];for(var n=0;n<e.length;)e[n].fn===t?e.splice(n,1):++n}return this},eh.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this};var $B=zn(zn),aC=function(c){try{var b=eval("quire".replace(/^/,"re"))(c);if(b&&(b.length||Object.keys(b).length))return b}catch(e){}return null},bC=tb((function(e,t){t.length=function(e){for(var t,n=0,r=0;r<e.length;++r)128>(t=e.charCodeAt(r))?n+=1:2048>t?n+=2:55296==(64512&t)&&56320==(64512&e.charCodeAt(r+1))?(++r,n+=4):n+=3;return n},t.read=function(e,t,n){if(1>n-t)return"";for(var r,i=null,o=[],a=0;t<n;)128>(r=e[t++])?o[a++]=r:191<r&&224>r?o[a++]=(31&r)<<6|63&e[t++]:239<r&&365>r?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(r>>10),o[a++]=56320+(1023&r)):o[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],8191<a&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))},t.write=function(e,t,n){for(var r,i,o=n,a=0;a<e.length;++a)128>(r=e.charCodeAt(a))?t[n++]=r:(2048>r?t[n++]=r>>6|192:(55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(a+1)))?(r=65536+((1023&r)<<10)+(1023&i),++a,t[n++]=r>>18|240,t[n++]=r>>12&63|128):t[n++]=r>>12|224,t[n++]=r>>6&63|128),t[n++]=63&r|128);return n-o}})),cC=function(e,t,n){var r=n||8192,i=r>>>1,o=null,a=r;return function(n){return 1>n||n>i?e(n):(a+n>r&&(o=e(r),a=0),n=t.call(o,a,a+=n),7&a&&(a=1+(7|a)),n)}},re=qb.zero=new qb(0,0);re.toNumber=function(){return 0},re.zzEncode=re.zzDecode=function(){return this},re.length=function(){return 1};var dC=qb.zeroHash="\0\0\0\0\0\0\0\0";qb.fromNumber=function(e){if(0===e)return re;var t=0>e;t&&(e=-e);var n=e>>>0;return e=(e-n)/4294967296>>>0,t&&(e=~e>>>0,n=~n>>>0,4294967295<++n&&(n=0,4294967295<++e&&(e=0))),new qb(n,e)},qb.from=function(e){if("number"==typeof e)return qb.fromNumber(e);if(na.isString(e)){if(!na.Long)return qb.fromNumber(parseInt(e,10));e=na.Long.fromString(e)}return e.low||e.high?new qb(e.low>>>0,e.high>>>0):re},qb.prototype.toNumber=function(e){if(!e&&this.hi>>>31){e=1+~this.lo>>>0;var t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+4294967296*t)}return this.lo+4294967296*this.hi},qb.prototype.toLong=function(e){return na.Long?new na.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var Nd=String.prototype.charCodeAt;qb.fromHash=function(e){return e===dC?re:new qb((Nd.call(e,0)|Nd.call(e,1)<<8|Nd.call(e,2)<<16|Nd.call(e,3)<<24)>>>0,(Nd.call(e,4)|Nd.call(e,5)<<8|Nd.call(e,6)<<16|Nd.call(e,7)<<24)>>>0)},qb.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},qb.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},qb.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},qb.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?16384>e?128>e?1:2:2097152>e?3:4:16384>t?128>t?5:6:2097152>t?7:8:128>n?9:10};var na=tb((function(e,t){function n(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function r(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}t.asPromise=YB,t.base64=ZB,t.EventEmitter=eh,t.float=$B,t.inquire=aC,t.utf8=bC,t.pool=cC,t.LongBits=qb,t.isNode=!!(void 0!==Va&&Va&&Va.process&&Va.process.versions&&Va.process.versions.node),t.global=t.isNode&&Va||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||Va,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"===oa(e)},t.isset=t.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==oa(n)||0<(Array.isArray(n)?n.length:Object.keys(n).length))},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,n){return e=t.LongBits.fromHash(e),t.Long?t.Long.fromBits(e.lo,e.hi,n):e.toNumber(!!n)},t.merge=n,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=r,t.ProtocolError=r("ProtocolError"),t.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;-1<n;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},t.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}})),kj=xa,Jl,si=na.LongBits,ks=na.base64,ls=na.utf8,ms=function(){return na.Buffer?function(){return(xa.create=function(){return new Jl})()}:function(){return new xa}};xa.create=ms(),xa.alloc=function(e){return new na.Array(e)},na.Array!==Array&&(xa.alloc=na.pool(xa.alloc,na.Array.prototype.subarray)),xa.prototype._push=function(e,t,n){return this.tail=this.tail.next=new Uf(e,t,n),this.len+=t,this},hj.prototype=Object.create(Uf.prototype),hj.prototype.fn=function(e,t,n){for(;127<e;)t[n++]=127&e|128,e>>>=7;t[n]=e},xa.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new hj(128>(e>>>=0)?1:16384>e?2:2097152>e?3:268435456>e?4:5,e)).len,this},xa.prototype.int32=function(e){return 0>e?this._push(ij,10,si.fromNumber(e)):this.uint32(e)},xa.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},xa.prototype.uint64=function(e){return e=si.from(e),this._push(ij,e.length(),e)},xa.prototype.int64=xa.prototype.uint64,xa.prototype.sint64=function(e){return e=si.from(e).zzEncode(),this._push(ij,e.length(),e)},xa.prototype.bool=function(e){return this._push(gj,1,e?1:0)},xa.prototype.fixed32=function(e){return this._push(jj,4,e>>>0)},xa.prototype.sfixed32=xa.prototype.fixed32,xa.prototype.fixed64=function(e){return e=si.from(e),this._push(jj,4,e.lo)._push(jj,4,e.hi)},xa.prototype.sfixed64=xa.prototype.fixed64,xa.prototype.float=function(e){return this._push(na.float.writeFloatLE,4,e)},xa.prototype.double=function(e){return this._push(na.float.writeDoubleLE,8,e)};var eC=na.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};xa.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(gj,1,0);if(na.isString(e)){var n=xa.alloc(t=ks.length(e));ks.decode(e,n,0),e=n}return this.uint32(t)._push(eC,t,e)},xa.prototype.string=function(e){var t=ls.length(e);return t?this.uint32(t)._push(ls.write,t,e):this._push(gj,1,0)},xa.prototype.fork=function(){return this.states=new sv(this),this.head=this.tail=new Uf(fj,0,0),this.len=0,this},xa.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Uf(fj,0,0),this.len=0),this},xa.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},xa.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},xa._configure=function(e){Jl=e,xa.create=ms(),Jl._configure()},(Hc.prototype=Object.create(kj.prototype)).constructor=Hc,Hc._configure=function(){Hc.alloc=na._Buffer_allocUnsafe,Hc.writeBytesBuffer=na.Buffer&&na.Buffer.prototype instanceof Uint8Array&&"set"===na.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},Hc.prototype.bytes=function(e){na.isString(e)&&(e=na._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(Hc.writeBytesBuffer,t,e),this},Hc.prototype.string=function(e){var t=na.Buffer.byteLength(e);return this.uint32(t),t&&this._push(tv,t,e),this},Hc._configure();var mj=eb,Kl,En=na.LongBits,fC=na.utf8,ns="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new eb(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new eb(e);throw Error("illegal buffer")},os=function(){return na.Buffer?function(e){return(eb.create=function(e){return na.Buffer.isBuffer(e)?new Kl(e):ns(e)})(e)}:ns};eb.create=os(),eb.prototype._slice=na.Array.prototype.subarray||na.Array.prototype.slice,eb.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,128>this.buf[this.pos++])return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,128>this.buf[this.pos++])return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,128>this.buf[this.pos++])return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,128>this.buf[this.pos++])return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,128>this.buf[this.pos++])return e;if((this.pos+=5)>this.len)throw this.pos=this.len,pc(this,10);return e}}(),eb.prototype.int32=function(){return 0|this.uint32()},eb.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},eb.prototype.bool=function(){return 0!==this.uint32()},eb.prototype.fixed32=function(){if(this.pos+4>this.len)throw pc(this,4);return fh(this.buf,this.pos+=4)},eb.prototype.sfixed32=function(){if(this.pos+4>this.len)throw pc(this,4);return 0|fh(this.buf,this.pos+=4)},eb.prototype.float=function(){if(this.pos+4>this.len)throw pc(this,4);var e=na.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},eb.prototype.double=function(){if(this.pos+8>this.len)throw pc(this,4);var e=na.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},eb.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw pc(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},eb.prototype.string=function(){var e=this.bytes();return fC.read(e,0,e.length)},eb.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw pc(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw pc(this)}while(128&this.buf[this.pos++]);return this},eb.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},eb._configure=function(e){Kl=e,eb.create=os(),Kl._configure();var t=na.Long?"toLong":"toNumber";na.merge(eb.prototype,{int64:function(){return lj.call(this)[t](!1)},uint64:function(){return lj.call(this)[t](!0)},sint64:function(){return lj.call(this).zzDecode()[t](!1)},fixed64:function(){return Fn.call(this)[t](!0)},sfixed64:function(){return Fn.call(this)[t](!1)}})},(ae.prototype=Object.create(mj.prototype)).constructor=ae,ae._configure=function(){na.Buffer&&(ae.prototype._slice=na.Buffer.prototype.slice)},ae.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},ae._configure(),(Vf.prototype=Object.create(na.EventEmitter.prototype)).constructor=Vf,Vf.prototype.rpcCall=function e(t,n,r,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return na.asPromise(e,a,t,n,r,i);if(a.rpcImpl)try{return a.rpcImpl(t,n[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,n){if(e)return a.emit("error",e,t),o(e);if(null!==n){if(!(n instanceof r))try{n=r[a.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return a.emit("error",e,t),o(e)}return a.emit("data",n,t),o(null,n)}a.end(!0)}))}catch(e){a.emit("error",e,t),setTimeout((function(){o(e)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},Vf.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var gC=tb((function(e,t){t.Service=Vf})),hC={},zc=tb((function(e,t){function n(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}var r=t;r.build="minimal",r.Writer=kj,r.BufferWriter=Hc,r.Reader=mj,r.BufferReader=ae,r.util=na,r.rpc=gC,r.roots=hC,r.configure=n,n()}));zc.util.Long=ma,zc.configure();var K=zc.Reader,fa=zc.Writer,D=zc.util,H=zc.roots.default||(zc.roots.default={}),iC=H.URI=function(){var e={},t=Object.create(e);return t[e[0]="Unknown"]=0,t[e[1]="PingUri"]=1,t[e[2]="PongUri"]=2,t[e[11]="UserJoinUri"]=11,t[e[12]="UserRespUri"]=12,t[e[15]="UserTicketNearlyExpireUri"]=15,t[e[16]="UserRenewTokenReqUri"]=16,t[e[17]="UserRenewTokenRespUri"]=17,t[e[21]="UserQuitUri"]=21,t[e[22]="UserDropUri"]=22,t[e[31]="GroupEnterUri"]=31,t[e[32]="GroupLeaveUri"]=32,t[e[33]="GroupReplyUri"]=33,t[e[36]="GroupEnterNoticeUri"]=36,t[e[37]="GroupLeaveNoticeUri"]=37,t[e[38]="GroupEventNoticeUri"]=38,t[e[39]="GroupCountNoticeUri"]=39,t[e[41]="UserStatusListUri"]=41,t[e[42]="UserStatusResultUri"]=42,t[e[51]="GroupStatusListUri"]=51,t[e[52]="GroupStatusResultUri"]=52,t[e[55]="GroupAllUsersListUri"]=55,t[e[56]="GroupAllUsersResultUri"]=56,t[e[100]="MessageUri"]=100,t[e[101]="AckUri"]=101,t[e[201]="UserJoinNoticeUri"]=201,t[e[202]="UserQuitNoticeUri"]=202,t[e[203]="UserWaitNoticeUri"]=203,t[e[301]="UserAttributeGetUri"]=301,t[e[302]="UserAttributeRetUri"]=302,t[e[303]="UserAttributeSetUri"]=303,t[e[304]="UserAttributeModUri"]=304,t[e[305]="UserAttributeDelUri"]=305,t[e[307]="UserAttributeRspUri"]=307,t[e[308]="UserAttributeErrUri"]=308,t[e[311]="UserAttributeKeysGetUri"]=311,t[e[312]="UserAttributeKeysRetUri"]=312,t[e[351]="GroupAttributeGetUri"]=351,t[e[352]="GroupAttributeRetUri"]=352,t[e[353]="GroupAttributeSetUri"]=353,t[e[354]="GroupAttributeModUri"]=354,t[e[355]="GroupAttributeDelUri"]=355,t[e[356]="GroupAttributeAltUri"]=356,t[e[357]="GroupAttributeRspUri"]=357,t[e[358]="GroupAttributeErrUri"]=358,t[e[361]="GroupAttributeKeysGetUri"]=361,t[e[362]="GroupAttributeKeysRetUri"]=362,t[e[401]="SubscribeUserStatusUri"]=401,t[e[402]="UnsubscribeUserStatusUri"]=402,t[e[499]="SubscribeResponseUri"]=499,t}(),ti=H.Wrapper=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uri=0,e.prototype.data=D.newBuffer([]),e.encode=function(e,t){return t||(t=fa.create()),null!=e.uri&&Object.hasOwnProperty.call(e,"uri")&&t.uint32(8).int32(e.uri),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.Wrapper;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.uri=e.int32();break;case 2:n.data=e.bytes();break;default:e.skipType(7&r)}}return n},e}(),jC=H.Ping=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.ms=D.Long?D.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(16).uint64(e.ms),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.Ping;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.ms=e.uint64();break;default:e.skipType(7&r)}}return n},e}(),kC=H.Pong=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.ms=D.Long?D.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(16).uint64(e.ms),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.Pong;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.ms=e.uint64();break;default:e.skipType(7&r)}}return n},e}(),lC=H.UserJoin=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.opt=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.ticket="",e.encode=function(e,t){return t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.opt&&Object.hasOwnProperty.call(e,"opt")&&t.uint32(16).uint64(e.opt),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(24).uint64(e.instance),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(34).string(e.account),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(42).string(e.ticket),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserJoin;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.opt=e.uint64();break;case 3:n.instance=e.uint64();break;case 4:n.account=e.string();break;case 5:n.ticket=e.string();break;default:e.skipType(7&r)}}return n},e}(),mC=H.UserResp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(24).uint32(e.code),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserResp;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;case 3:n.code=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),nC=H.UserQuit=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=fa.create()),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserQuit;e.pos<t;){var r=e.uint32();e.skipType(7&r)}return n},e}(),oC=H.UserDrop=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.code=0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserDrop;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.code=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),pC=H.UserTicketNearlyExpire=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.expireTs=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.ticket="",e.encode=function(e,t){return t||(t=fa.create()),null!=e.expireTs&&Object.hasOwnProperty.call(e,"expireTs")&&t.uint32(8).uint64(e.expireTs),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(18).string(e.ticket),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserTicketNearlyExpire;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.expireTs=e.uint64();break;case 2:n.ticket=e.string();break;default:e.skipType(7&r)}}return n},e}(),qC=H.UserRenewTokenReq=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.ticket="",e.encode=function(e,t){return t||(t=fa.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(26).string(e.account),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(34).string(e.ticket),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserRenewTokenReq;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.instance=e.uint64();break;case 2:n.seq=e.uint64();break;case 3:n.account=e.string();break;case 4:n.ticket=e.string();break;default:e.skipType(7&r)}}return n},e}(),rC=H.UserRenewTokenResp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserRenewTokenResp;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.code=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),sC=H.GroupEnter=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.encode=function(e,t){return t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupEnter;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;default:e.skipType(7&r)}}return n},e}(),tC=H.GroupLeave=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.encode=function(e,t){return t||(t=fa.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupLeave;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.account=e.string();break;default:e.skipType(7&r)}}return n},e}(),uC=H.GroupReply=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(24).uint32(e.code),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupReply;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;case 3:n.code=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),ps=H.GroupLeaveNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.user="",e.prototype.group="",e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.size=0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(18).string(e.user),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(32).uint64(e.instance),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(40).uint32(e.size),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupLeaveNotice;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.user=e.string();break;case 3:n.group=e.string();break;case 4:n.instance=e.uint64();break;case 5:n.size=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),qs=H.GroupEnterNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.user="",e.prototype.group="",e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.size=0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(18).string(e.user),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(32).uint64(e.instance),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(40).uint32(e.size),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupEnterNotice;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.user=e.string();break;case 3:n.group=e.string();break;case 4:n.instance=e.uint64();break;case 5:n.size=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),rs=H.Message=function(){function e(e){if(this.MiscMap={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.dialogue=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.sequence=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.options=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.src="",e.prototype.dst="",e.prototype.payload=D.newBuffer([]),e.prototype.MiscMap=D.emptyObject,e.prototype.ms=D.Long?D.Long.fromBits(0,0,!0):0,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.dialogue&&Object.hasOwnProperty.call(e,"dialogue")&&t.uint32(16).uint64(e.dialogue),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(24).uint64(e.sequence),null!=e.options&&Object.hasOwnProperty.call(e,"options")&&t.uint32(32).uint64(e.options),null!=e.src&&Object.hasOwnProperty.call(e,"src")&&t.uint32(42).string(e.src),null!=e.dst&&Object.hasOwnProperty.call(e,"dst")&&t.uint32(50).string(e.dst),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(58).bytes(e.payload),null!=e.MiscMap&&Object.hasOwnProperty.call(e,"MiscMap"))for(var n=Object.keys(e.MiscMap),r=0;r<n.length;++r)t.uint32(66).fork().uint32(10).string(n[r]).uint32(18).bytes(e.MiscMap[n[r]]).ldelim();return null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(72).uint64(e.ms),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n,r,i=new H.Message;e.pos<t;)switch(n=e.uint32(),n>>>3){case 1:i.instance=e.uint64();break;case 2:i.dialogue=e.uint64();break;case 3:i.sequence=e.uint64();break;case 4:i.options=e.uint64();break;case 5:i.src=e.string();break;case 6:i.dst=e.string();break;case 7:i.payload=e.bytes();break;case 8:i.MiscMap===D.emptyObject&&(i.MiscMap={});var o=e.uint32()+e.pos;for(n="",r=[];e.pos<o;){var a=e.uint32();switch(a>>>3){case 1:n=e.string();break;case 2:r=e.bytes();break;default:e.skipType(7&a)}}i.MiscMap[n]=r;break;case 9:i.ms=e.uint64();break;default:e.skipType(7&n)}return i},e}(),ss=H.Ack=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.dialogue=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.sequence=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.dialogue&&Object.hasOwnProperty.call(e,"dialogue")&&t.uint32(16).uint64(e.dialogue),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(24).uint64(e.sequence),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(32).uint32(e.code),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.Ack;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.instance=e.uint64();break;case 2:n.dialogue=e.uint64();break;case 3:n.sequence=e.uint64();break;case 4:n.code=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),vC=H.GroupAllUsersList=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.pageSize=0,e.prototype.pageNumber=0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.pageSize&&Object.hasOwnProperty.call(e,"pageSize")&&t.uint32(24).uint32(e.pageSize),null!=e.pageNumber&&Object.hasOwnProperty.call(e,"pageNumber")&&t.uint32(32).uint32(e.pageNumber),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupAllUsersList;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.pageSize=e.uint32();break;case 4:n.pageNumber=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),wC=H.GroupAllUsersResult=function(){function e(e){if(this.memberInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.totalSize=0,e.prototype.pageSize=0,e.prototype.pageNumber=0,e.prototype.memberInfos=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.totalSize&&Object.hasOwnProperty.call(e,"totalSize")&&t.uint32(24).uint32(e.totalSize),null!=e.pageSize&&Object.hasOwnProperty.call(e,"pageSize")&&t.uint32(32).uint32(e.pageSize),null!=e.pageNumber&&Object.hasOwnProperty.call(e,"pageNumber")&&t.uint32(40).uint32(e.pageNumber),null!=e.memberInfos&&e.memberInfos.length)for(var n=0;n<e.memberInfos.length;++n)H.GroupAllUsersResult.MemberInfo.encode(e.memberInfos[n],t.uint32(50).fork()).ldelim();return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupAllUsersResult;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.totalSize=e.uint32();break;case 4:n.pageSize=e.uint32();break;case 5:n.pageNumber=e.uint32();break;case 6:n.memberInfos&&n.memberInfos.length||(n.memberInfos=[]),n.memberInfos.push(H.GroupAllUsersResult.MemberInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.MemberInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.ts=0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).uint32(e.ts),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupAllUsersResult.MemberInfo;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.account=e.string();break;case 2:n.ts=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),e}(),xC=H.UserStatusList=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.users=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.users&&e.users.length)for(var n=0;n<e.users.length;++n)t.uint32(18).string(e.users[n]);return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserStatusList;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.users&&n.users.length||(n.users=[]),n.users.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),yC=H.UserStatusResult=function(){function e(e){if(this.userInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.userInfos=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.userInfos&&e.userInfos.length)for(var n=0;n<e.userInfos.length;++n)H.UserStatusResult.UserStatusInfo.encode(e.userInfos[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserStatusResult;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.userInfos&&n.userInfos.length||(n.userInfos=[]),n.userInfos.push(H.UserStatusResult.UserStatusInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.UserStatusInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.ts=0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).uint32(e.ts),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserStatusResult.UserStatusInfo;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.account=e.string();break;case 2:n.ts=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),e}(),zC=H.UserAttributeGet=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributes=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(26).string(e.attributes[n]);return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserAttributeGet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;case 3:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),AC=H.UserAttributeRet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.attributeInfos=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.attributeInfos&&e.attributeInfos.length)for(var n=0;n<e.attributeInfos.length;++n)H.UserAttributeRet.AttributeInfo.encode(e.attributeInfos[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserAttributeRet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.attributeInfos&&n.attributeInfos.length||(n.attributeInfos=[]),n.attributeInfos.push(H.UserAttributeRet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=fa.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserAttributeRet.AttributeInfo;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;default:e.skipType(7&r)}}return n},e}(),e}(),BC=H.UserAttributeSet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributeInfos=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.attributeInfos&&e.attributeInfos.length)for(var n=0;n<e.attributeInfos.length;++n)H.UserAttributeSet.AttributeInfo.encode(e.attributeInfos[n],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserAttributeSet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;case 3:n.attributeInfos&&n.attributeInfos.length||(n.attributeInfos=[]),n.attributeInfos.push(H.UserAttributeSet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=fa.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserAttributeSet.AttributeInfo;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;default:e.skipType(7&r)}}return n},e}(),e}(),CC=H.UserAttributeMod=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributeInfos=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.attributeInfos&&e.attributeInfos.length)for(var n=0;n<e.attributeInfos.length;++n)H.UserAttributeMod.AttributeInfo.encode(e.attributeInfos[n],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserAttributeMod;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;case 3:n.attributeInfos&&n.attributeInfos.length||(n.attributeInfos=[]),n.attributeInfos.push(H.UserAttributeMod.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=fa.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserAttributeMod.AttributeInfo;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;default:e.skipType(7&r)}}return n},e}(),e}(),DC=H.UserAttributeDel=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributes=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(26).string(e.attributes[n]);return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserAttributeDel;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;case 3:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),EC=H.UserAttributeErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserAttributeErr;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.code=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),FC=H.UserAttributeKeysGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.account="",e.encode=function(e,t){return t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserAttributeKeysGet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.account=e.string();break;default:e.skipType(7&r)}}return n},e}(),GC=H.UserAttributeKeysRet=function(){function e(e){if(this.keys=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.keys=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.keys&&e.keys.length)for(var n=0;n<e.keys.length;++n)t.uint32(18).string(e.keys[n]);return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserAttributeKeysRet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.keys&&n.keys.length||(n.keys=[]),n.keys.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),HC=H.UserAttributeRsp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserAttributeRsp;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;default:e.skipType(7&r)}}return n},e}(),IC=H.GroupStatusList=function(){function e(e){if(this.groups=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.groups=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.groups&&e.groups.length)for(var n=0;n<e.groups.length;++n)t.uint32(18).string(e.groups[n]);return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupStatusList;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.groups&&n.groups.length||(n.groups=[]),n.groups.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),JC=H.GroupStatusResult=function(){function e(e){if(this.groupInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.groupInfos=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.groupInfos&&e.groupInfos.length)for(var n=0;n<e.groupInfos.length;++n)H.GroupStatusResult.GroupInfo.encode(e.groupInfos[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupStatusResult;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.groupInfos&&n.groupInfos.length||(n.groupInfos=[]),n.groupInfos.push(H.GroupStatusResult.GroupInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.GroupInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.group="",e.prototype.memberCount=0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(10).string(e.group),null!=e.memberCount&&Object.hasOwnProperty.call(e,"memberCount")&&t.uint32(16).uint32(e.memberCount),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupStatusResult.GroupInfo;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.group=e.string();break;case 2:n.memberCount=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),e}(),KC=H.GroupCountNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.size=0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(32).uint32(e.size),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupCountNotice;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.instance=e.uint64();break;case 2:n.seq=e.uint64();break;case 3:n.group=e.string();break;case 4:n.size=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),LC=H.GroupAttributeGet=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.attributes=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(26).string(e.attributes[n]);return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupAttributeGet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),MC=H.GroupAttributeRet=function(){function e(e){if(this.attributeMaps=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.attributeMaps=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.attributeMaps&&e.attributeMaps.length)for(var n=0;n<e.attributeMaps.length;++n)H.GroupAttributeRet.AttributeMap.encode(e.attributeMaps[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupAttributeRet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.attributeMaps&&n.attributeMaps.length||(n.attributeMaps=[]),n.attributeMaps.push(H.GroupAttributeRet.AttributeMap.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.AttributeMap=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.prototype.origin="",e.prototype.ms=D.Long?D.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.origin&&Object.hasOwnProperty.call(e,"origin")&&t.uint32(26).string(e.origin),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(32).uint64(e.ms),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupAttributeRet.AttributeMap;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;case 3:n.origin=e.string();break;case 4:n.ms=e.uint64();break;default:e.skipType(7&r)}}return n},e}(),e}(),NC=H.GroupAttributeSet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributeInfos=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&t.uint32(24).bool(e.broadcast),null!=e.attributeInfos&&e.attributeInfos.length)for(var n=0;n<e.attributeInfos.length;++n)H.GroupAttributeSet.AttributeInfo.encode(e.attributeInfos[n],t.uint32(34).fork()).ldelim();return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupAttributeSet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.broadcast=e.bool();break;case 4:n.attributeInfos&&n.attributeInfos.length||(n.attributeInfos=[]),n.attributeInfos.push(H.GroupAttributeSet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=fa.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupAttributeSet.AttributeInfo;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;default:e.skipType(7&r)}}return n},e}(),e}(),OC=H.GroupAttributeMod=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributeInfos=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&t.uint32(24).bool(e.broadcast),null!=e.attributeInfos&&e.attributeInfos.length)for(var n=0;n<e.attributeInfos.length;++n)H.GroupAttributeMod.AttributeInfo.encode(e.attributeInfos[n],t.uint32(34).fork()).ldelim();return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupAttributeMod;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.broadcast=e.bool();break;case 4:n.attributeInfos&&n.attributeInfos.length||(n.attributeInfos=[]),n.attributeInfos.push(H.GroupAttributeMod.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=fa.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupAttributeMod.AttributeInfo;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;default:e.skipType(7&r)}}return n},e}(),e}(),PC=H.GroupAttributeDel=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributes=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&t.uint32(24).bool(e.broadcast),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(34).string(e.attributes[n]);return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupAttributeDel;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.broadcast=e.bool();break;case 4:n.attributes&&n.attributes.length||(n.attributes=[]),n.attributes.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),QC=H.GroupAttributeAlt=function(){function e(e){if(this.attributeMaps=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.attributeMaps=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(24).uint64(e.instance),null!=e.attributeMaps&&e.attributeMaps.length)for(var n=0;n<e.attributeMaps.length;++n)H.GroupAttributeAlt.AttributeMap.encode(e.attributeMaps[n],t.uint32(34).fork()).ldelim();return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupAttributeAlt;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;case 3:n.instance=e.uint64();break;case 4:n.attributeMaps&&n.attributeMaps.length||(n.attributeMaps=[]),n.attributeMaps.push(H.GroupAttributeAlt.AttributeMap.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.AttributeMap=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.prototype.origin="",e.prototype.ms=D.Long?D.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.origin&&Object.hasOwnProperty.call(e,"origin")&&t.uint32(26).string(e.origin),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(32).uint64(e.ms),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupAttributeAlt.AttributeMap;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.key=e.string();break;case 2:n.value=e.string();break;case 3:n.origin=e.string();break;case 4:n.ms=e.uint64();break;default:e.skipType(7&r)}}return n},e}(),e}(),RC=H.GroupAttributeRsp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupAttributeRsp;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;default:e.skipType(7&r)}}return n},e}(),SC=H.GroupAttributeErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupAttributeErr;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.code=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),TC=H.GroupAttributeKeysGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.group="",e.encode=function(e,t){return t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupAttributeKeysGet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.group=e.string();break;default:e.skipType(7&r)}}return n},e}(),UC=H.GroupAttributeKeysRet=function(){function e(e){if(this.keys=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.keys=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.keys&&e.keys.length)for(var n=0;n<e.keys.length;++n)t.uint32(18).string(e.keys[n]);return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.GroupAttributeKeysRet;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.keys&&n.keys.length||(n.keys=[]),n.keys.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),VC=H.SubscribeUserStatus=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.users=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.users&&e.users.length)for(var n=0;n<e.users.length;++n)t.uint32(18).string(e.users[n]);return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.SubscribeUserStatus;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.users&&n.users.length||(n.users=[]),n.users.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),WC=H.UnsubscribeUserStatus=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.users=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.users&&e.users.length)for(var n=0;n<e.users.length;++n)t.uint32(18).string(e.users[n]);return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UnsubscribeUserStatus;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.users&&n.users.length||(n.users=[]),n.users.push(e.string());break;default:e.skipType(7&r)}}return n},e}(),XC=H.UserJoinNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.user="",e.encode=function(e,t){return t||(t=fa.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(26).string(e.user),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserJoinNotice;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.instance=e.uint64();break;case 2:n.seq=e.uint64();break;case 3:n.user=e.string();break;default:e.skipType(7&r)}}return n},e}(),YC=H.UserQuitNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.user="",e.encode=function(e,t){return t||(t=fa.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(26).string(e.user),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserQuitNotice;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.instance=e.uint64();break;case 2:n.seq=e.uint64();break;case 3:n.user=e.string();break;default:e.skipType(7&r)}}return n},e}(),ZC=H.UserWaitNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.user="",e.encode=function(e,t){return t||(t=fa.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(26).string(e.user),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.UserWaitNotice;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.instance=e.uint64();break;case 2:n.seq=e.uint64();break;case 3:n.user=e.string();break;default:e.skipType(7&r)}}return n},e}(),$C=H.SubscribeResponse=function(){function e(e){if(this.errors=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=D.Long?D.Long.fromBits(0,0,!0):0,e.prototype.errors=D.emptyArray,e.encode=function(e,t){if(t||(t=fa.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.errors&&e.errors.length)for(var n=0;n<e.errors.length;++n)H.SubscribeResponse.SubscribeErrorsType.encode(e.errors[n],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.SubscribeResponse;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.seq=e.uint64();break;case 2:n.errors&&n.errors.length||(n.errors=[]),n.errors.push(H.SubscribeResponse.SubscribeErrorsType.decode(e,e.uint32()));break;default:e.skipType(7&r)}}return n},e.SubscribeErrorsType=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=fa.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,t){e instanceof K||(e=K.create(e)),t=void 0===t?e.len:e.pos+t;for(var n=new H.SubscribeResponse.SubscribeErrorsType;e.pos<t;){var r=e.uint32();switch(r>>>3){case 1:n.account=e.string();break;case 2:n.code=e.uint32();break;default:e.skipType(7&r)}}return n},e}(),e}(),aD=Object.freeze({__proto__:null,URI:iC,Wrapper:ti,Ping:jC,Pong:kC,UserJoin:lC,UserResp:mC,UserQuit:nC,UserDrop:oC,UserTicketNearlyExpire:pC,UserRenewTokenReq:qC,UserRenewTokenResp:rC,GroupEnter:sC,GroupLeave:tC,GroupReply:uC,GroupLeaveNotice:ps,GroupEnterNotice:qs,Message:rs,Ack:ss,GroupAllUsersList:vC,GroupAllUsersResult:wC,UserStatusList:xC,UserStatusResult:yC,UserAttributeGet:zC,UserAttributeRet:AC,UserAttributeSet:BC,UserAttributeMod:CC,UserAttributeDel:DC,UserAttributeErr:EC,UserAttributeKeysGet:FC,UserAttributeKeysRet:GC,UserAttributeRsp:HC,GroupStatusList:IC,GroupStatusResult:JC,GroupCountNotice:KC,GroupAttributeGet:LC,GroupAttributeRet:MC,GroupAttributeSet:NC,GroupAttributeMod:OC,GroupAttributeDel:PC,GroupAttributeAlt:QC,GroupAttributeRsp:RC,GroupAttributeErr:SC,GroupAttributeKeysGet:TC,GroupAttributeKeysRet:UC,SubscribeUserStatus:VC,UnsubscribeUserStatus:WC,UserJoinNotice:XC,UserQuitNotice:YC,UserWaitNotice:ZC,SubscribeResponse:$C,default:H}),bD=Math.ceil,ts=function(e){return function(t,n,r){var i=(t=String(Bb(t))).length;return r=void 0===r?" ":String(r),(n=La(n))<=i||""==r?t:(n-=i,(i=So.call(r,bD(n/r.length))).length>n&&(i=i.slice(0,n)),e?t+i:i+t)}},cD=ts(!1),dD=ts(!0),us=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(af);ba({target:"String",proto:!0,forced:us},{padEnd:function(e){return dD(this,e,1<arguments.length?arguments[1]:void 0)}});var eD=cg,vs=function(e){return function(t){t=Ib(t);for(var n,r=$c(t),i=r.length,o=0,a=[];i>o;)n=r[o++],ta&&!eD.call(t,n)||a.push(e?[n,t[n]]:t[n]);return a}},fD=vs(!0),gD=vs(!1);ba({target:"Object",stat:!0},{entries:function(e){return fD(e)}});var hD=Zb.f,ws="".endsWith,iD=Math.min,xs=Kk("endsWith"),jD=!xs&&!!function(){var e=hD(String.prototype,"endsWith");return e&&!e.writable}();ba({target:"String",proto:!0,forced:!jD&&!xs},{endsWith:function(e){var t=String(Bb(this));Jk(e);var n=1<arguments.length?arguments[1]:void 0,r=La(t.length);return n=void 0===n?r:iD(La(n),r),r=String(e),ws?ws.call(t,r,n):t.slice(n-r.length,n)===r}}),yh("match",1,(function(e,t,n){return[function(t){var n=Bb(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;if(e=Ia(e),r=String(this),!e.global)return bf(e,r);var i=e.unicode;e.lastIndex=0;for(var o,a=[],s=0;null!==(o=bf(e,r));)o=String(o[0]),a[s]=o,""===o&&(e.lastIndex=Gj(r,La(e.lastIndex),i)),s++;return 0===s?null:a}]}));var kD=Zb.f,ys="".startsWith,lD=Math.min,zs=Kk("startsWith"),mD=!zs&&!!function(){var e=kD(String.prototype,"startsWith");return e&&!e.writable}();ba({target:"String",proto:!0,forced:!mD&&!zs},{startsWith:function(e){var t=String(Bb(this));Jk(e);var n=La(lD(1<arguments.length?arguments[1]:void 0,t.length)),r=String(e);return ys?ys.call(t,r,n):t.slice(n,n+r.length)===r}});var Nn=function(e){var t=/(%?)(%([jds]))/g,n=Array.prototype.slice.call(arguments,1);return n.length&&(e=e.replace(t,(function(e,t,r,i){switch(r=n.shift(),i){case"s":r=""+r;break;case"d":r=Number(r);break;case"j":r=JSON.stringify(r)}return t?(n.unshift(r),e):r}))),n.length&&(e+=" "+n.join(" ")),""+(e=e.replace(/%{2,2}/g,"%"))},nD=/\s/,oD=/^\s+/,As=NaN,pD=/^[-+]0x[0-9a-f]+$/i,qD=/^0b[01]+$/i,rD=/^0o[0-7]+$/i,sD=parseInt,Ll=function(e){if("number"==typeof e)return e;if(Ie(e))return As;if(Db(e)&&(e="function"==typeof e.valueOf?e.valueOf():e,e=Db(e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;if(e){for(var t=e.slice,n=e.length;n--&&nD.test(e.charAt(n)););e=t.call(e,0,n+1).replace(oD,"")}return(t=qD.test(e))||rD.test(e)?sD(e.slice(2),t?2:8):pD.test(e)?As:+e},tD=Math.max,uD=Math.min,vD=function(e,t,n){function r(t){var n=u,r=c;return u=c=void 0,p=t,l=e.apply(r,n)}function i(e){var n=e-h;return e-=p,void 0===h||n>=t||0>n||b&&e>=g}function o(){var e=Wb.Date.now();if(i(e))return a(e);var n=setTimeout,r=e-p;e=t-(e-h),r=b?uD(e,g-r):e,f=n(o,r)}function a(e){return f=void 0,v&&u?r(e):(u=c=void 0,l)}function s(){var e=Wb.Date.now(),n=i(e);if(u=arguments,c=this,h=e,n){if(void 0===f)return p=e=h,f=setTimeout(o,t),d?r(e):l;if(b)return clearTimeout(f),f=setTimeout(o,t),r(h)}return void 0===f&&(f=setTimeout(o,t)),l}var u,c,l,f,h,p=0,d=!1,b=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");if(t=Ll(t)||0,Db(n)){d=!!n.leading;var g=(b="maxWait"in n)?tD(Ll(n.maxWait)||0,t):g;v="trailing"in n?!!n.trailing:v}return s.cancel=function(){void 0!==f&&clearTimeout(f),p=0,u=h=c=f=void 0},s.flush=function(){return void 0===f?l:a(Wb.Date.now())},s},pd=function(e){function t(e,r){return ua(this,t),x(z(e=n.call(this,Mn(e,r))),"originalError",void 0),x(z(e),"code",void 0),x(z(e),"serverCode",void 0),"number"==typeof r?e.code=r:"string"==typeof r?e.name=r:void 0!==r&&(r.originalError&&(e.originalError=r.originalError),void 0!==r.code&&(e.code=r.code),void 0!==r.serverCode&&(e.serverCode=r.serverCode)),e}Ga(t,e);var n=Ha(t);return t}(If(Error)),qd=function(e){function t(e,r){return ua(this,t),x(z(e=n.call(this,Mn(e,r))),"name","RtmInternalError"),x(z(e),"code",void 0),e.code=r,e}Ga(t,e);var n=Ha(t);return t}(If(Error)),ui=function(){return function(e){function t(e){ua(this,t);var r=Object.keys(e);return n.call(this,e[r[0]],r[0])}Ga(t,e);var n=Ha(t);return t}(qd)},ib=ui(),Qb=function(e){function t(){ua(this,t);for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return x(z(e=n.call.apply(n,[this].concat(r))),"name","RtmTimeoutError"),e}Ga(t,e);var n=Ha(t);return t}(pd),Z=function(e){function t(){ua(this,t);for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return x(z(e=n.call.apply(n,[this].concat(r))),"name","RtmInvalidArgumentError"),e}Ga(t,e);var n=Ha(t);return t}(pd),aa=function(e){function t(){ua(this,t);for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return x(z(e=n.call.apply(n,[this].concat(r))),"name","RtmInvalidStatusError"),e}Ga(t,e);var n=Ha(t);return t}(pd),dc=function(e){function t(){ua(this,t);for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return x(z(e=n.call.apply(n,[this].concat(r))),"name","RtmLimitExceededError"),e}Ga(t,e);var n=Ha(t);return t}(pd),wD=function(e){function t(){ua(this,t);for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return x(z(e=n.call.apply(n,[this].concat(r))),"name","RtmInvokeTooOftenError"),e}Ga(t,e);var n=Ha(t);return t}(pd),Ja=function(e){function t(){ua(this,t);for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return x(z(e=n.call.apply(n,[this].concat(r))),"name","RtmUnavailableError"),x(z(e),"serverCode",void 0),x(z(e),"statusCode",void 0),e}Ga(t,e);var n=Ha(t);return t}(pd),yf=function(e){function t(){ua(this,t);for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return x(z(e=n.call.apply(n,[this].concat(r))),"name","RtmUnauthenticatedError"),x(z(e),"serverCode",void 0),e}Ga(t,e);var n=Ha(t);return t}(pd),se=function(e){function t(){ua(this,t);for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return x(z(e=n.call.apply(n,[this].concat(r))),"name","RtmUnknownError"),e}Ga(t,e);var n=Ha(t);return t}(pd),vb=function(e){return e instanceof Qb||e instanceof Pb},Ma=function(e){return e instanceof pd},te=function(e,t,n){return['Executing "%s.%s" timed out after %ds',e,t,n/1e3]},Ln=new Map,xD=function(){var e=new Date;return"".concat(e.toISOString().split("T")[1].replace(/\..+/,""),".").concat(e.getMilliseconds())},$f=Object.keys,lh=Object.entries.bind(Object),ih=function(e){return"string"==typeof e?e.endsWith(".")?e:"".concat(e,"."):e},yD=ia((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));ba({target:"Date",proto:!0,forced:yD},{toJSON:function(e){e=lb(this);var t=Kc(e);return"number"!=typeof t||isFinite(t)?e.toISOString():null}}),ba({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var wv=Object.prototype.hasOwnProperty,Bs=function(e,t,n){return JSON.stringify(Tn(e),t,n)};Bs.ensureProperties=Tn;var zD=function(e,t){t=t||{};var n=oa(e);if("string"===n&&0<e.length)return xv(e);if("number"===n&&isFinite(e))return t.long?e=864e5<=(t=Math.abs(e))?nh(e,t,864e5,"day"):36e5<=t?nh(e,t,36e5,"hour"):6e4<=t?nh(e,t,6e4,"minute"):1e3<=t?nh(e,t,1e3,"second"):e+" ms":e=864e5<=(t=Math.abs(e))?Math.round(e/864e5)+"d":36e5<=t?Math.round(e/36e5)+"h":6e4<=t?Math.round(e/6e4)+"m":1e3<=t?Math.round(e/1e3)+"s":e+"ms",e;throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},AD=function(e){function t(e){function r(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];if(r.enabled){e=Number(new Date),r.diff=e-(i||e),r.prev=i,i=r.curr=e,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var a=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,i){return"%%"===e?"%":(a++,"function"==typeof(i=t.formatters[i])&&(e=i.call(r,n[a]),n.splice(a,1),a--),e)})),t.formatArgs.call(r,n),(r.log||t.log).apply(r,n)}}var i,o=null;return r.namespace=e,r.useColors=t.useColors(),r.color=t.selectColor(e),r.extend=n,r.destroy=t.destroy,Object.defineProperty(r,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===o?t.enabled(e):o},set:function(e){o=e}}),"function"==typeof t.init&&t.init(r),r}function n(e,n){return(e=t(this.namespace+(void 0===n?":":n)+e)).log=this.log,e}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(W(t.names.map(r)),W(t.skips.map(r).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.names=[],t.skips=[];var n,r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r=0;for(n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=zD,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(n){t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t},Cs=tb((function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){try{var e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))};e:{try{var n=localStorage;break e}catch(r){}n=void 0}var r;t.storage=n,t.destroy=(r=!1,function(){r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" "),t.log=console.debug||console.log||function(){},e.exports=AD(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}})),Ds=Cs("RTM:DEBUG"),zf;Ds.enabled=!1,function(e){e[e.Uploading=0]="Uploading",e[e.Free=1]="Free"}(zf||(zf={}));var BD=function(){function e(t){ua(this,e),x(this,"uploadRequest",void 0),x(this,"uploadState",void 0),x(this,"uploadResendCount",void 0),x(this,"LogCache",void 0),x(this,"LogsToPost",void 0),x(this,"processId",void 0),x(this,"sdkVersion",void 0),x(this,"logId",void 0),x(this,"rtmConfig",void 0),this.processId=t.processId,this.sdkVersion=t.sdkVersion,this.rtmConfig=t.rtmConfig,this.uploadRequest=t.uploadRequest,this.uploadState=zf.Free,this.uploadResendCount=0,this.LogCache=[],this.LogsToPost=[],this.logId=0}return cb(e,[{key:"upload",value:function(e){this.LogCache.push(e),this.uploadState===zf.Free&&(this.LogsToPost=40>this.LogCache.length?this.LogCache.splice(0,this.LogCache.length):this.LogCache.splice(0,40),this.postLog(this.LogsToPost))}},{key:"postLog",value:function(e){var t=this;this.uploadState=zf.Uploading,setTimeout(ja(M.mark((function n(){var r,i,o;return M.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={sdk_version:t.sdkVersion,process_id:t.processId,payload:JSON.stringify(e)},n.prev=1,n.next=4,t.uploadRequest(r,null!==(i=t.rtmConfig.enableCloudProxy)&&void 0!==i&&i);case 4:if(!aj){n.next=6;break}throw Error("RTM is busy");case 6:n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(1),o=2>t.uploadResendCount++?2e3:1e4,setTimeout((function(){return t.postLog(t.LogsToPost)}),o),n.abrupt("return");case 13:if(Ds('The logs uploaded for "process-'.concat(Mg,'"')),0!==t.LogCache.length){n.next=17;break}return t.uploadState=zf.Free,n.abrupt("return");case 17:t.uploadResendCount=0,t.LogsToPost=40>t.LogCache.length?t.LogCache.splice(0,t.LogCache.length):t.LogCache.splice(0,40),t.postLog(t.LogsToPost);case 20:case"end":return n.stop()}}),n,null,[[1,8]])}))),ue.getParameter("LOG_UPLOAD_INTERVAL"))}}]),e}(),Es=function(e,t,n,r,i,o,a,s){var u=0;for(a=!!a&&Cd(a,s,3);u<r;){if(u in n){if(s=a?a(n[u],u,t):n[u],0<o&&Dd(s))i=Es(e,t,s,La(s.length),i,o-1)-1;else{if(9007199254740991<=i)throw TypeError("Exceed the acceptable array length");e[i]=s}i++}u++}return i},CD=Es;ba({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=lb(this),n=La(t.length),r=Ah(t,0);return r.length=CD(r,t,t,n,0,void 0===e?1:rc(e)),r}}),ba({target:"Object",stat:!0},{values:function(e){return gD(e)}});var DD=["CODE"],Xb,Od,R;!function(e){e.CHINA="CN",e.ASIA="AS",e.NORTH_AMERICA="NA",e.EUROPE="EU",e.JAPAN="JP",e.INDIA="IN",e.OCEANIA="OC",e.SOUTH_AMERICA="SA",e.AFRICA="AF",e.OVERSEA="OVERSEA",e.GLOBAL="GLOBAL"}(R||(R={}));var ED={CN:R.CHINA,NA:R.NORTH_AMERICA,EU:R.EUROPE,AS:R.ASIA,JP:R.JAPAN,IN:R.INDIA,GLOB:R.GLOBAL,AF:R.AFRICA,OC:R.OVERSEA,OVS:R.OVERSEA,SA:R.SOUTH_AMERICA},oh=Rn((Xb={},x(Xb,R.ASIA,{CODE:R.ASIA,AP_DOMAINS:["ap-web-1-asia.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-asia.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"],PROXY_AP:["proxy-ap-web-asia.agora.io"],PROXY_NGINX:["southeast-asia.webrtc-cloud-proxy.sd-rtn.com"]}),x(Xb,R.NORTH_AMERICA,{CODE:R.NORTH_AMERICA,AP_DOMAINS:["ap-web-1-north-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-north-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"],PROXY_AP:["proxy-ap-web-america.agora.io"],PROXY_NGINX:["east-usa.webrtc-cloud-proxy.sd-rtn.com"]}),x(Xb,R.EUROPE,{CODE:R.EUROPE,AP_DOMAINS:["ap-web-1-europe.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-europe.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"],PROXY_AP:["proxy-ap-web-europe.agora.io"],PROXY_NGINX:["europe.webrtc-cloud-proxy.sd-rtn.com"]}),x(Xb,R.JAPAN,{CODE:R.JAPAN,AP_DOMAINS:["ap-web-1-japan.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-japan.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"],PROXY_AP:["proxy-ap-web-japan.agora.io"],PROXY_NGINX:["japan.webrtc-cloud-proxy.sd-rtn.com"]}),x(Xb,R.INDIA,{CODE:R.INDIA,AP_DOMAINS:["ap-web-1-india.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-india.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"],PROXY_AP:["proxy-ap-web-india.agora.io"],PROXY_NGINX:["india.webrtc-cloud-proxy.sd-rtn.com"]}),x(Xb,R.OVERSEA,{CODE:R.OVERSEA,AP_DOMAINS:["ap-web-1-oversea.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"],PROXY_AP:["proxy-ap-web-oversea.agora.io"],PROXY_NGINX:["webrtc-cloud-proxy.agora.io"]}),x(Xb,R.GLOBAL,{CODE:R.GLOBAL,AP_DOMAINS:["ap-web-1.agora.io","ap-web-2.agora.io"],AP_BACKUP_DOMAINS:["ap-web-3.agora.io","ap-web-4.agora.io"],EVENT_REPORT_DOMAIN:["webcollector-rtm.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["webcollector-1.agora.io"],LOG_UPLOAD_SERVER:["logservice-rtm.agora.io"],PROXY_AP:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],PROXY_NGINX:["webrtc-cloud-proxy.sd-rtn.com"]}),x(Xb,R.OCEANIA,{CODE:R.OCEANIA,AP_DOMAINS:["ap-web-1-oceania.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oceania.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"],PROXY_AP:["proxy-ap-web-oceania.agora.io"],PROXY_NGINX:["oceania.webrtc-cloud-proxy.sd-rtn.com"]}),x(Xb,R.SOUTH_AMERICA,{CODE:R.SOUTH_AMERICA,AP_DOMAINS:["ap-web-1-south-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-south-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"],PROXY_AP:["proxy-ap-web-south-america.agora.io"],PROXY_NGINX:["south-america.webrtc-cloud-proxy.sd-rtn.com"]}),x(Xb,R.AFRICA,{CODE:R.AFRICA,AP_DOMAINS:["ap-web-1-africa.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-africa.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"],PROXY_AP:["proxy-ap-web-africa.agora.io"],PROXY_NGINX:["africa.webrtc-cloud-proxy.sd-rtn.com"]}),x(Xb,R.CHINA,{CODE:R.CHINA,AP_DOMAINS:["webrtc2-2.ap.sd-rtn.com"],AP_BACKUP_DOMAINS:["webrtc2-4.ap.sd-rtn.com"],EVENT_REPORT_DOMAIN:["web-3.statscollector.sd-rtn.com"],EVENT_REPORT_BACKUP_DOMAIN:["web-4.statscollector.sd-rtn.com"],LOG_UPLOAD_SERVER:["logservice-china.agora.io"],PROXY_AP:["proxy-ap-web.agoraio.cn"],PROXY_NGINX:["east-cn.webrtc-cloud-proxy.sd-rtn.com"]}),Xb)),ag=(Od={},x(Od,R.ASIA,[R.CHINA,R.JAPAN,R.INDIA]),x(Od,R.EUROPE,[]),x(Od,R.NORTH_AMERICA,[]),x(Od,R.SOUTH_AMERICA,[]),x(Od,R.OCEANIA,[]),x(Od,R.AFRICA,[]),Od),Fs=[R.OVERSEA,R.GLOBAL,R.CHINA,R.NORTH_AMERICA,R.EUROPE,R.ASIA,R.JAPAN,R.INDIA,R.OCEANIA,R.SOUTH_AMERICA,R.AFRICA],Un=function(e){return Object.values(ag).flat().includes(e)},zv=function(e){var t;return null===(t=lh(ag).find((function(t){return(t=Xa(t,2))[0],t[1].includes(e)})))||void 0===t?void 0:t[0]},FD=function(e){return e.sort((function(e,t){return Fs.indexOf(e)-Fs.indexOf(t)}))},Ue=function(e){var t=new Set;if(0===(e=FD(e).slice(0,3).map((function(e){var n=oh[e];if(void 0===n)throw new qd("invalid area key");return e=n.CODE,n=Ei(n,DD),t.add(e),n}))).length)throw new qd("areas cannot be empty");return jb({CODES:t},e.reduce((function(e,t){for(var n=0,r=lh(e);n<r.length;n++){var i=Xa(r[n],2),o=i[0];i=i[1],e[o]=Array.from(new Set([].concat(W(t[o]),W(i))))}return e})))},ca,Gs=function(){var e=ja(M.mark((function e(t,n){var r,i,o,a,s,u=arguments;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(2<(i=2<u.length&&void 0!==u[2]?u[2]:0))){e.next=3;break}return e.abrupt("return");case 3:return o={withCredentials:!0,body:t,timeout:2e4},a=0<i?(null==ca?void 0:ca.LOG_UPLOAD_SERVER[0])||"rtm.logservice.sd-rtn.com":(null==ca?void 0:ca.LOG_UPLOAD_SERVER[0])||"logservice-rtm.agora.io",s=n?"https://".concat(null!==(r=null==ca?void 0:ca.PROXY_NGINX[0])&&void 0!==r?r:"webrtc-cloud-proxy.sd-rtn.com","/ls/?h=").concat(a,"&p=443&d=upload/v1"):"https://".concat(a,"/upload/v1"),e.next=8,jh(s,o).catch((function(e){return Gs(t,n,i+1)}));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Hs=new BD({processId:"process-".concat(Mg),sdkVersion:"Agora_RTM_SDK_for_Web_".concat("v1.5.0-0-g83bd874d"),uploadRequest:Gs,rtmConfig:{}}),Ml="text payload rawMessage thumbnail attributeInfos keys value extra".split(" "),Is="account ticket uid detail token account fileName cname user group key origin users src dst lastUpdateUserId channel cert wan_ip".split(" "),Js=["serverReceivedTs","hasPeerReceived","messageType","enableNotificationToChannelMembers","lastUpdateTs"],GD="ChannelMessage MemberLeft MessageFromPeer LocalInvitationRefused LocalInvitationAccepted RemoteInvitationCanceled PeersOnlineStatusChanged AttributesUpdated MemberJoined".split(" "),Ve=function(e){if("string"==typeof e)return Ka(e);if(Array.isArray(e)&&e.every((function(e){return"string"==typeof e})))return e.map((function(e){return Ka(e)}));if(!Hm(e)){for(var t={},n=0;n<Js.length;n++){var r=Js[n];r in e&&(t[r]=e[r])}if(0<Object.keys(t).length)return t;if(5>Object.keys(e).length){for(n=0,e=Object.entries(e);n<e.length;n++){var i=Xa(e[n],2);r=i[0],i=i[1],Ml.includes(r)?t[r]="[Hidden Info]":t[Ka(r)]="string"==typeof i?Ka(i):"[Sensitive Info]"}return t}return"[Sensitive Info]"}return e},Ks=function(e){return"object"===oa(e)?Be(e)?Qn(Fe(e,5),Ml,Is):e.constructor&&e.constructor.name:e},Ls=function(e,t){return e instanceof Error?e.message:"string"!=typeof e?JSON.stringify(Qn(Fe(e,5),Ml,Is)):(t=t.map((function(e){return e instanceof Error?e.message:"object"===oa(e)?Bs(Array.isArray(e)?e.map(Ks):Ks(e)):e})),Nn.apply(void 0,[e.replace(/%[%Oo]/g,(function(e){return"%%"===e?"%":"%o"===e||"%O"===e?"%s":e}))].concat(W(t))))},HD=1,Ms=function(e,t,n){var r=Cs(e);return r.enabled=!0,r.log=n,r.useColors=!1,function(n){for(var i=arguments.length,o=Array(1<i?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(t.enableLogUpload){i=ih(n);var s=Ls(i,o);Hs.upload({log_item_id:"".concat(HD++),log_level:e,payload_str:"[".concat(xD(),"] ").concat(e," - ").concat(256<s.length?s.slice(0,256):s)})}switch(i=function(e){var t=s||Ls(ih(n),o),i=xc.LOG_HANDLER;"function"==typeof i&&i({level:e,message:t}),r(t)},e){case"RTM:INFO":t.logFilter.info&&i("log");break;case"RTM:WARN":t.logFilter.warn&&i("warning");break;case"RTM:ERROR":t.logFilter.error&&i("error");break;case"RTM:TRACK":t.logFilter.track&&i("log");break;case"RTM:MSG:RECV":case"RTM:MSG:SEND":t.logFilter.debug&&i("debug");break;case"RTM:DEBUG":t.logFilter.debug&&i("debug")}}},Nl,Ns=function(e){return function(t){var n=1===Nl||void 0===e?"":"Ins#".concat(e," ");return"".concat(n).concat(t)}},Ol=function(e,t,n){var r=Ns(Nl);return Ms("RTM:".concat(t),n,(function(t){return e(r(t))}))},Ac=function(){return function(e){function t(e,r){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];ua(this,t);var o=n.call(this);if(x(z(o),"logError",void 0),x(z(o),"invokeTracker",void 0),x(z(o),"resultTracker",void 0),x(z(o),"errorTracker",void 0),x(z(o),"eventTracker",void 0),x(z(o),"info",void 0),x(z(o),"warn",void 0),x(z(o),"log",void 0),x(z(o),"genLogger",void 0),x(z(o),"loggerId",void 0),x(z(o),"logger",void 0),x(z(o),"name",void 0),o.logger=e,o.name=r,o.loggerId=e.loggerId,o.info=e.info,o.warn=e.warn,o.logError=e.logError,o.genLogger=e.genLogger,o.log=e.genLogger("RTM:DEBUG","<".concat(r,"> ")),o.invokeTracker=e.genTracker("Invoke"),o.eventTracker=e.genTracker("Event"),o.resultTracker=e.genTracker("Result"),o.errorTracker=e.genTracker("Error"),i){var a=o.emit.bind(z(o));o.emit=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];e=t[0],n=t.slice(1);var i=GD.includes(e);o.eventTracker.apply(o,["%s: ".concat(0<n.length?"%s emitted with args: ".concat(n.map((function(){return"%o"}))):"%s emitted"),r,e].concat(W(i?n.map(Ve):n)));try{a.apply(void 0,t)}catch(t){o.logError("Caught in the callback function of the event %s",e,t)}}}return o}Ga(t,e);var n=Ha(t);return t}(ya)},ID=function(e){return Ol(console.log.bind(console),"INFO",e)},JD=function(e){return Ol(console.warn.bind(console),"WARN",e)},KD=function(e){return Ol(console.error.bind(console),"ERROR",e)},Os=function(e,t){return function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",i=Ns(e),o=console.debug.bind(console),a=Ms(n,t,(function(e){return o(i(e))}));return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return a.apply(void 0,[r+e].concat(n))}}},LD=function(e,t){return function(n){return Os(e,t)("RTM:TRACK","[".concat(n,"] "))}},rj=H.URI,Bv=ti,MD=Ei(aD,["Wrapper"]),Vn=kl(MD,"URI"),Ps=function(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var o=e[r=is(n,i)];e[r]=e[n],e[n]=o}return e.length=t,e},ND=function(e){return Ps(Ji(e))},OD=function(e){return Ps(tj(e))},Af=function(e){return(pb(e)?ND:OD)(e)},Bf={0:9591,1:9593},ve=function(e){var t=Zf(null);return"https://".concat(t?null:e,"/api/v1")},PD=wb.apply(void 0,W(Af(["web-1.ap.sd-rtn.com","web-2.ap.sd-rtn.com"].map(ve)))),QD=wb.apply(void 0,W(Af(["ap-web-1.agora.io","ap-web-2.agora.io"].map(ve)))),RD=wb.apply(void 0,W(Af(["web-3.ap.sd-rtn.com","web-4.ap.sd-rtn.com"].map(ve)))),SD=wb.apply(void 0,W(Af(["ap-web-3.agora.io","ap-web-4.agora.io"].map(ve)))),Qs=ui(),Pl=function(e){function t(e,r,i,o,a,s){ua(this,t);var u=n.call(this,a,nj("Socket-",a.loggerId));if(x(z(u),"isActiveClose",!1),x(z(u),"loggedIn",!1),x(z(u),"useNewDomain",void 0),x(z(u),"receivedPacket",new nb),x(z(u),"open$",void 0),x(z(u),"input$",new nb),x(z(u),"userJoin$",new nb),x(z(u),"attemptsSinceLastError",0),x(z(u),"message$",new nb),x(z(u),"socket$",void 0),x(z(u),"toClose",new nb),x(z(u),"toReconnect",new nb),x(z(u),"sendLogger",void 0),x(z(u),"receiveLogger",void 0),x(z(u),"ip",void 0),x(z(u),"env",void 0),x(z(u),"ticket",void 0),x(z(u),"context",void 0),x(z(u),"getDomain",(function(){return Wn(u.ip,u.useNewDomain)})),x(z(u),"socketReconnector",(function(e){var t=function(e){return u.attemptsSinceLastError+=1,u.warn("The %s of Env %d reconnecting %s",u.name,u.env,e.message),Zc(3e3)};return e.pipe(Ya((function(e){return u.log("socket connection closed"),u.loggedIn=!1,2<=u.attemptsSinceLastError?(u.warn("socket connection failure"),u.emit("connectionFailure"),u.close(),pa(e)):u.isActiveClose?Nb:(u.emit("reconnect"),u.useNewDomain=!u.useNewDomain,pa(e))})),Oe((function(e){return e.pipe(Fc(t))})))})),u.ip=e,u.env=r,u.ticket=i,u.context=o,u.useNewDomain=null!=s?s:.5<=Math.random(),u.sendLogger=u.genLogger("RTM:MSG:SEND"),u.receiveLogger=u.genLogger("RTM:MSG:RECV"),0!==r&&1!==r)throw new Qs({ILLEGAL_RTM_ENV:"The env number is out of rtm env count"});var c=Bf[r];u.log("Opening websocket address %s for the Env %d",u.ip,u.env);var l=Ec(u.input$,u.userJoin$.pipe(qv(2)),u.message$).pipe(Da((function(e){return ti.encode(e).finish()})));return e=Ec(rv("",{protocols:[],makeWebSocket:function(){if(u.context.config.enableCloudProxy||u.context.socketUseProxy){if(0===u.context.cloudProxyServers.length)throw u.logError("No cloud proxy server to connect"),new Ja;var e=Zf(null)?JSON.parse(null.replace(/-/g,".")):u.context.cloudProxyServers;e=Te(e="wss://".concat(Wn(Xn(e),!1),"/"),"sid",u.context.sid),e=Te(e,"remote_port",c.toString()),e=Te(e,"remote_ip",u.ip),e=Te(e,"token",u.context.key),e=new WebSocket(e)}else e=new WebSocket("wss://".concat(u.getDomain(),":").concat(c));return e.binaryType="arraybuffer",e}}),u.toReconnect),u.socket$=ab(e,xl.pipe(Hb(7e3),Ya((function(e){return vb(e)&&u.warn("socket open timed out"),pa(e)})))).pipe(Da((function(e){if(e instanceof Error)throw u.warn("Env_%d: Force reconnect the socket",u.env),e;return e(l).pipe(Da((function(e){return ti.decode(new Uint8Array(e))})))})),u.socketReconnector),u.open$=u.socket$.pipe(sa((function(e){u.log("Websocket opened",u.name),e.subscribe((function(e){var t=e.data;e=rj[e.uri].slice(0,-3),t=Vn[e].decode(t);var n=SB({},kl(t,"toJSON"),(function(e,t){return t instanceof ma?Kn(t):t})),r=!1;if((t instanceof qs||t instanceof ps)&&t.instance.lessThanOrEqual(4294967295)&&(r=!0),t instanceof rs||t instanceof ss){var i=t.instance,o=t.sequence;(t.dialogue.lessThanOrEqual(4294967295)||i.lessThanOrEqual(4294967295)||o.lessThan(1))&&(r=!0)}r?u.warn("Env_%d: Illegal %s, abandoned %o",u.env,e,n):("Pong"!==e&&u.receiveLogger("Env_%d: %s %o",u.env,e,n),u.receivedPacket.next([e,t]))}),(function(){}))})),Sf(void 0),Gc(u.toClose),Pe()),u}Ga(t,e);var n=Ha(t);return cb(t,[{key:"address",get:function(){return"".concat(this.ip,":").concat(Bf[this.env])}},{key:"sendPacket",value:function(e,t){if("Ping"!==e){var n=hd(t,(function(e){return e instanceof ma?Kn(e):e}));this.sendLogger("Env_%d: %s %o",this.env,e,n)}t=Av(e,t),"UserJoin"===e?this.userJoin$.next(t):"Message"===e?this.message$.next(t):this.input$.next(t)}},{key:"close",value:function(){this.isActiveClose=!0,this.loggedIn=!1,this.toClose.next()}},{key:"fromReceived",value:function(e){return this.receivedPacket.pipe(Ob((function(t){return Xa(t,1)[0]===e})),Da((function(e){return Xa(e,2)[1]})))}},{key:"forceReconnect",value:function(){this.toReconnect.next(new Qs({FORCE_RECONNECTING:"Connection seems broken, try force reconnecting"}))}}]),t}(Ac());ba({target:"String",proto:!0,forced:us},{padStart:function(e){return cD(this,e,1<arguments.length?arguments[1]:void 0)}});var TD=function(e){var t=$f(oh);e=vv(e);for(var n=0;n<t.length;n++){var r=oh[t[n]];if(null!=r&&r.AP_DOMAINS.includes(e)||null!=r&&r.AP_BACKUP_DOMAINS.includes(e)||null!=r&&r.PROXY_AP.includes(e))return[r.CODE]}return[R.CHINA,R.GLOBAL]},UD={INVALID_APP_ID:"Illegal App ID",NO_AUTHORIZED:"Signature verification failed",TOKEN_TIMEOUT:"Dynamic key expired",INVALID_TOKEN_UID:"UID in the security key(token) is not valid",APP_ID_NO_ACTIVATED:"The vendor is not activated",DYNAMIC_KEY_NOT_ENABLED:"The vendor did not enable the dynamic key, but uses the dynamic key",DYNAMIC_ENABLED_BUT_STATIC_KEY:"The vendor enabled the dynamic key, but uses the static key",TOKEN_EXPIRED:"The token has expired",INVALID_USER_ID:"The user ID to login does not match the token",FORBIDDEN_REGION:"Forbidden to access the request in this area",CANNOT_MEET_AREA_DEMAND:"Cannot allocate to meet the requirements of the given area limit"},Rs={5:"INVALID_APP_ID",7:"INVALID_USER_ID",9:"NO_AUTHORIZED",10:"TOKEN_TIMEOUT",11:"APP_ID_NO_ACTIVATED",12:"INVALID_TOKEN_UID",13:"TOKEN_EXPIRED",14:"DYNAMIC_KEY_NOT_ENABLED",15:"DYNAMIC_ENABLED_BUT_STATIC_KEY",18:"FORBIDDEN_REGION",19:"CANNOT_MEET_AREA_DEMAND"},VD=[100,101,102],vi=/web-(\d)/,Ss=function(e){function t(e,r){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];ua(this,t);var o=n.call(this,r,"AccessPoint");return x(z(o),"handleUniLbsError",(function(e,t){var n=e;if(4<e.toString().length){var r=e.toString().padStart(8,"0"),i=parseInt(r.slice(0,4),10);if(r=parseInt(r.slice(4,8),10),201===i)n=r;else if(101===i&&!VD.includes(r))return pa(Error("service is currently unavailable"))}if(i=n.toString(),!Object.keys(Rs).includes(i))return(e=new Ja(["Login is rejected by the server. The response code is %d",e],Ng)).serverCode=n,pa(e);switch(i=Rs[i],n=UD[i],i){case"INVALID_APP_ID":case"APP_ID_NO_ACTIVATED":return(t=new yf(n,Vr)).serverCode=e,pa(t);case"INVALID_USER_ID":return(t=new yf(n,pi)).serverCode=e,pa(t);case"TOKEN_EXPIRED":case"TOKEN_TIMEOUT":return(t=new yf(n,qi)).serverCode=e,pa(t);case"NO_AUTHORIZED":case"INVALID_TOKEN_UID":case"DYNAMIC_KEY_NOT_ENABLED":case"DYNAMIC_ENABLED_BUT_STATIC_KEY":return(t=new yf(n,Wr)).serverCode=e,pa(t);case"CANNOT_MEET_AREA_DEMAND":return(t=TD(t)).forEach((function(e){return o.failedAreas.add(e)})),o.failedAreas.size===(void 0===ca?2:ca.CODES.size)?((t=new Z(n,Ng)).serverCode=e,pa(t)):pa(Error("ap ".concat(t.join(", ")," cannot meet requirement")));case"FORBIDDEN_REGION":return(t=new Ja(n,Ng)).serverCode=e,pa(t);default:return pa(In("ApResErrType",i))}})),x(z(o),"getApEdgeInfo$",void 0),x(z(o),"getApEdgeInfoEndFirst$",void 0),x(z(o),"apFinish$",new nb),x(z(o),"retryCount",0),x(z(o),"failedAreas",new Set),x(z(o),"usedUrl",[]),x(z(o),"newDomainUsed",!1),x(z(o),"backupNewDomainUsed",!1),x(z(o),"genUrl",(function(){return void 0===ca?Zi.apply(void 0,W(Af([PD,QD]))).pipe($i((function(e){return wb.apply(void 0,W(e))}))):wb.apply(void 0,W(ca.AP_DOMAINS.slice(0,3).map(ve)))})),x(z(o),"genBackupUrl",(function(){return void 0===ca?Zi.apply(void 0,W(Af([RD,SD]))).pipe($i((function(e){return wb.apply(void 0,W(e))}))):wb.apply(void 0,W(ca.AP_BACKUP_DOMAINS.slice(0,3).map(ve)))})),x(z(o),"getApUrl$",(function(e){var n,r;return o.genUrl().pipe(Ob((function(e){return(!o.newDomainUsed||!e.includes("sd-rtn.com"))&&(e.includes("sd-rtn.com")&&(o.newDomainUsed=!0),!Il(o.usedUrl,(function(t){var n;return t===(null===(n=e.match(vi))||void 0===n?void 0:n[1])})))})),sa((function(e){var t;void 0===ca&&("string"==typeof(e=null===(t=e.match(vi))||void 0===t?void 0:t[1])&&o.usedUrl.push(e))})),db(e?Math.max(xc.RECONNECTING_AP_NUM,null!==(n=null==ca?void 0:ca.CODES.size)&&void 0!==n?n:0):null!==(r=null==ca?void 0:ca.CODES.size)&&void 0!==r?r:2),Zd((function(){return t.runOutOfUrlSymbol})),Ya((function(e,n){return o.newDomainUsed=!1,e===t.runOutOfUrlSymbol?(o.usedUrl=[],n):pa(e)})))})),x(z(o),"getBackupApUrl$",(function(e){var n,r;return o.genBackupUrl().pipe(Ob((function(e){return(!o.backupNewDomainUsed||!e.includes("sd-rtn.com"))&&(e.includes("sd-rtn.com")&&(o.backupNewDomainUsed=!0),!Il(o.usedUrl,(function(t){var n;return t===(null===(n=e.match(vi))||void 0===n?void 0:n[1])})))})),sa((function(e){var t;void 0===ca&&("string"==typeof(e=null===(t=e.match(vi))||void 0===t?void 0:t[1])&&o.usedUrl.push(e))})),db(e?Math.max(xc.RECONNECTING_AP_NUM,null!==(n=null==ca?void 0:ca.CODES.size)&&void 0!==n?n:0):null!==(r=null==ca?void 0:ca.CODES.size)&&void 0!==r?r:2),Zd((function(){return t.runOutOfUrlSymbol})),Ya((function(e,n){return o.backupNewDomainUsed=!1,e===t.runOutOfUrlSymbol?(o.usedUrl=[],n):pa(e)})))})),x(z(o),"getProxyApUrl$",(function(e){var t,n;return wb.apply(void 0,W(((null==ca?void 0:ca.PROXY_AP.slice(0,3))||["ap-proxy-1.agora.io","ap-proxy-2.agora.io"]).map(ve))).pipe(db(e?Math.max(xc.RECONNECTING_AP_NUM,null!==(t=null==ca?void 0:ca.CODES.size)&&void 0!==t?t:0):null!==(n=null==ca?void 0:ca.CODES.size)&&void 0!==n?n:2))})),x(z(o),"context",void 0),x(z(o),"fetchCloudProxy",(function(e,t){var n=nj("AP-",o.loggerId);o.log("The AccessPoint requests %s(%s)",e,n);var r,i=new AbortController;return o.apFinish$.pipe(db(1)).subscribe((function(){return i.abort()})),wd(ja(M.mark((function r(){var a;return M.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=gh(0,Number.MAX_SAFE_INTEGER),o.log("%s request opid: %d",n,a),r.abrupt("return",jh(e,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"90","Content-Type":"application/json"},body:{sid:o.context.sid,opid:a,appid:o.context.appId,client_ts:Math.ceil(Date.now()/1e3),request_bodies:[{uri:22,buffer:{service_ids:[7,16],key:null!=t?t:o.context.key,cname:o.context.uid,uid:0,detail:jb({},void 0===ca?{11:[R.CHINA,R.GLOBAL].join(),12:"1"}:{11:Array.from(ca.CODES).map((function(e){return e===R.OVERSEA?"".concat(R.ASIA,",").concat(R.EUROPE,",").concat(R.AFRICA,",").concat(R.NORTH_AMERICA,",").concat(R.SOUTH_AMERICA,",").concat(R.OCEANIA):e})).join(","),12:"1"})}}]},signal:i.signal}));case 3:case"end":return r.stop()}}),r)})))).pipe(Ya((function(t){return"AbortError"!==t.name&&(o.logError(t),o.warn("The AP server %s request failure",e,t)),Nb})),Ab((r=ja(M.mark((function t(r){var i,a,s,u,c,l,f,h,p,d,b,v,g,y,E,m,w,_,O;return M.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.responseText,a=JSON.parse(i),o.log("The %s response is %o",n,a),(void 0===(s=a.response_body)||0===s.length||s.some((function(e){var t;return void 0===(null===(t=e.buffer)||void 0===t?void 0:t.code)||23!==e.uri})))&&pa(new Ja("cloud proxy response_body not valid",Ng)),0===(u=s.filter((function(e){return 0!==e.buffer.code}))).length){t.next=14;break}if(void 0===(c=u.find((function(e){return 128===e.buffer.flag})))){t.next=12;break}return t.abrupt("return",o.handleUniLbsError(c.buffer.code,e));case 12:return o.logError("cloud proxy error response"),t.abrupt("return",o.handleUniLbsError(u[0].buffer.code,e));case 14:for(l=[],f=0;f<s.length;f++)if(262144===(null==(d=s[f])||null===(h=d.buffer)||void 0===h?void 0:h.flag))null===(b=d.buffer)||void 0===b||null===(v=b.edges_services)||void 0===v||null===(g=v.forEach)||void 0===g||g.call(v,(function(e){Gn(e=e.ip)&&-1===o.context.cloudProxyServers.indexOf(e)&&(o.log("got cloud proxy server: %s",e),o.context.cloudProxyServers.push(e))}));else if(128===(null==d||null===(p=d.buffer)||void 0===p?void 0:p.flag)){for(w=function(e,t){var n=t[e];l.some((function(e){return e.ip===n.ip}))||l.push({ip:n.ip,ticket:d.buffer.cert})},_=0,O=d.buffer.edges_services;_<O.length;_++)w(_,O);o.context.rtmArea=null!==(y=null===(E=d.buffer)||void 0===E||null===(m=E.detail)||void 0===m?void 0:m[9])&&void 0!==y?y:""}return t.abrupt("return",wb.apply(void 0,W(l).concat([Kg])));case 19:case"end":return t.stop()}}),t)}))),function(e){return r.apply(this,arguments)})),Ya((function(e){return Ma(e)?pa(e):Nb})),$g(),Ob((function(e){return void 0!==e&&"string"==typeof e.ip&&"string"==typeof e.ticket&&Gn(e.ip)})))})),x(z(o),"fetchAp",(function(e,t){var n=nj("AP-",o.loggerId);o.log("The AccessPoint requests %s(%s)",e,n);var r,i=new AbortController;return o.apFinish$.pipe(db(1)).subscribe((function(){return i.abort()})),wd(ja(M.mark((function r(){var a;return M.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=gh(0,Number.MAX_SAFE_INTEGER),o.log("%s request opid: %d",n,a),r.abrupt("return",jh(e,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"69","Content-Type":"application/json"},body:{flag:128,opid:a,key:t||o.context.key,cname:o.context.uid,detail:jb({},void 0===ca?{11:[R.CHINA,R.GLOBAL].join(),12:"1"}:{11:Array.from(ca.CODES).map((function(e){return e===R.OVERSEA?"".concat(R.ASIA,",").concat(R.EUROPE,",").concat(R.AFRICA,",").concat(R.NORTH_AMERICA,",").concat(R.SOUTH_AMERICA,",").concat(R.OCEANIA):e})).join(","),12:"1"}),uid:0,sid:o.context.sid},signal:i.signal}));case 3:case"end":return r.stop()}}),r)})))).pipe(Ya((function(t){return"AbortError"!==t.name&&(o.logError(t),o.warn("The AP server %s request failure",e,t)),Nb})),Ab((r=ja(M.mark((function t(r){var i,a,s,u,c,l,f,h;return M.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.responseText,a=JSON.parse(i),o.log("The %s response is %o",n,a),u=(s=a).code,c=s.addresses,l=s.detail,o.info(a),0===u){t.next=7;break}return t.abrupt("return",o.handleUniLbsError(u,e));case 7:if(f=c,Zf(null)&&(h=JSON.parse(null.replace(/-/g,".")),f=h.map((function(e){return{ip:e,ticket:f[0].ticket}}))),0!==f.length){t.next=12;break}return t.abrupt("return",pa(Error("No available edge address to connect")));case 12:return o.context.rtmArea=null==l?void 0:l[9],t.abrupt("return",wb.apply(void 0,W(f).concat([Kg])));case 14:case"end":return t.stop()}}),t)}))),function(e){return r.apply(this,arguments)})),$g(),Ya((function(e){return Ma(e)?pa(e):Nb})),Ob((function(e){return void 0!==e&&"string"==typeof e.ip&&"string"==typeof e.ticket})))})),o.context=e,o.getApEdgeInfoEndFirst$=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return Zc(0,e||i?xc.RECONNECTING_AP_INTERVAL:2e3).pipe(db(1),sa((function(){o.retryCount+=1})),Ab((function(){return o.context.config.enableCloudProxy||o.context.socketUseProxy?o.getProxyApUrl$(e||i):(4<=o.retryCount&&(o.retryCount=0),3>=o.retryCount?o.getApUrl$(e||i):o.getBackupApUrl$(e||i))})),Ab((function(e){return o.context.config.enableCloudProxy||o.context.socketUseProxy?o.fetchCloudProxy(e):o.fetchAp(e)})),Ya((function(e){return e instanceof Pb&&o.warn("AP request timeout"),pa(e)})),nn((function(e){return e.ip})),Gc(o.apFinish$))},o.getApEdgeInfo$=function(e){return Zc(0,e||i?xc.RECONNECTING_AP_INTERVAL:2e3).pipe(db(8),sa((function(){o.retryCount+=1})),Ab((function(){return o.context.config.enableCloudProxy||o.context.socketUseProxy?o.getProxyApUrl$(e||i):3>=o.retryCount?o.getApUrl$(e||i):o.getBackupApUrl$(e||i)})),Ab((function(e){return(o.context.config.enableCloudProxy||o.context.socketUseProxy?o.fetchCloudProxy(e):o.fetchAp(e)).pipe()})),Ya((function(e){return e instanceof Pb&&o.warn("AP request timeout"),pa(e)})),nn((function(e){return e.ip})),Gc(o.apFinish$))},o}Ga(t,e);var n=Ha(t);return cb(t,[{key:"clearUp",value:function(){this.failedAreas.clear(),this.retryCount=0}}]),t}(Ac());x(Ss,"runOutOfUrlSymbol",Symbol("AP urls are used up"));var Ts=ui(),Us=function(e){function t(e,r,i){ua(this,t);var o=n.call(this,r,"Connection");x(z(o),"apClient",void 0),x(z(o),"lastOpenSockets",[new Qe(1),new Qe(1)]),x(z(o),"curOpenSockets",[void 0,void 0]),x(z(o),"ipIterator",0),x(z(o),"loginSocketOpenFailureCount",0),x(z(o),"firstEnv",.5<=Math.random()?1:0),x(z(o),"firstSocketOpener",void 0),x(z(o),"secondSocketOpener",void 0),x(z(o),"firstOpenKeeperSubject",new nb),x(z(o),"secondOpenKeeperSubject",new nb),x(z(o),"blacklistedIP",{}),x(z(o),"edgeInfoReplayed",void 0),x(z(o),"firstEnvOpenSocket",void 0),x(z(o),"firstOpenKeeperSub",void 0),x(z(o),"secondOpenKeeperSub",void 0),x(z(o),"context",void 0),x(z(o),"logger",void 0),o.context=e,o.logger=r,o.apClient=new Ss(o.context,r),o.apClient.apFinish$.subscribe((function(){o.log("Ap client fetch finished")}));var a,s=[];return o.edgeInfoReplayed=o.apClient.getApEdgeInfo$(i).pipe(Oe((function(e){return e.pipe(sa((function(e){if(Ma(e))throw e})),Yd(i?ue.getParameter("RECONNECTING_AP_INTERVAL"):900),Gc(Zc(2e4)))})),Ob((function(e){var t;return!Il(s,e)&&1>=(null!==(t=o.blacklistedIP[e.ip])&&void 0!==t?t:0)})),Zd((function(){return new Ts({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})})),sa((function(e){s.push(e),o.log("An edge info got %o",e)})),sa({error:function(e){o.emit("connectionInitFailure",e)}}),ch((function(){o.apClient.clearUp()})),qn()),o.firstEnvOpenSocket=o.edgeInfoReplayed.pipe(Ab((function(e){if(void 0===e)return pa(Error("Invalid edge info"));var t=new Pl(e.ip,o.firstEnv,e.ticket,o.context,r,a);if(o.firstEnv=1===o.firstEnv?0:1,t.once("connectionFailure",(function(){return o.onSocketConnectionFailure(t)})),!i&&xc.ENABLE_EDGE_AUTO_FALLBACK&&!o.context.config.enableCloudProxy){var n,s=Date.now();t.on("reconnect",(function(){var e;o.loginSocketOpenFailureCount+=1,null!==(e=n)&&void 0!==e||(n=Date.now()-s),500>n&&1<o.loginSocketOpenFailureCount&&(o.context.socketUseProxy=!0)}))}return a=!t.useNewDomain,t.open$.pipe(Sf(t))})),sa((function(e){o.log("The websocket of ENV_%d opened to %s:%d",e.env,e.ip,Bf[e.env]),o.curOpenSockets[e.env]=e,o.lastOpenSockets[e.env].next(e),o.firstEnv=e.env,o.openSecondSocket(e.env,e.ip,e.useNewDomain)})),db(1),Pe()),o.firstSocketOpener=o.firstEnvOpenSocket.pipe(Ab((function(e){return e.open$.pipe(sa((function(){o.log("The websocket of first ENV_%d re-opened to %s:%d",e.env,e.ip,Bf[e.env]),o.curOpenSockets[e.env]=e,o.lastOpenSockets[e.env].next(e)})))}))),e=o.firstOpenKeeperSubject.pipe(Fc(td)),o.firstOpenKeeperSub=e.subscribe({error:o.logError}),o}Ga(t,e);var n=Ha(t);return cb(t,[{key:"initConnection",value:function(){this.firstOpenKeeperSubject.next(this.firstSocketOpener)}},{key:"closeSocket",value:function(e,t){if(![0,1].includes(e))throw new ib({INVALID_ENV:"The env argument is not 0 or 1"});var n=e===this.firstEnv?this.firstOpenKeeperSub:this.secondOpenKeeperSub;this.firstOpenKeeperSub=void 0;var r=this.curOpenSockets[e];this.curOpenSockets[e]=void 0,r&&(r.isActiveClose=!0,setTimeout((function(){r.close()}),t)),void 0!==n&&setTimeout((function(){null==n||n.unsubscribe()}),t)}},{key:"waitClosing",value:function(e){var t=this;return e.isActiveClose=!0,e.open$.pipe(Vu(),Ya((function(e){return e.message===hs.normalClosureMessage?Nb:pa(e)})),Hb(5e3),Ya((function(n){return n instanceof Pb?(t.warn("Force closing the ENV_%d connection",e.env),Nb):pa(n)})))}},{key:"onSocketConnectionFailure",value:function(e){var t=[0,1].filter((function(t){return t!==e.env}))[0];(t=this.curOpenSockets[t])&&t.loggedIn?this.reopenSocketWithApRequest(e.env):this.emit("socketsFailure")}},{key:"openSecondSocket",value:function(e,t,n){var r=this,i=1===e?0:1;this.secondSocketOpener=this.edgeInfoReplayed.pipe(pn((function(e,t){return[].concat(W(e),[t])}),[]),Da((function(e){return fs(e,(function(e){return Jn(t,e.ip)})).slice(-1)[0]})),db(1),Ab((function(e){if(void 0===e)return pa(Error("Invalid edge info"));var t=new Pl(e.ip,i,e.ticket,r.context,r.logger,n);return t.on("connectionFailure",(function(){return r.onSocketConnectionFailure(t)})),t.open$.pipe(sa((function(){r.lastOpenSockets[i].next(t),r.curOpenSockets[i]=t})))})),Pe()),this.secondOpenKeeperSub=this.secondOpenKeeperSubject.pipe(Fc(td)).subscribe({error:this.logError}),this.secondOpenKeeperSubject.next(this.secondSocketOpener)}},{key:"reopenSocketWithApRequest",value:function(e){var t=this,n=[0,1].filter((function(t){return t!==e}))[0];if(void 0!==(n=this.curOpenSockets[n])){var r,i=n.ip;n=this.apClient.getApEdgeInfoEndFirst$(!0).pipe(Zd((function(){return new Ts({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})})),Oe((function(e){return e.pipe(sa((function(e){if(e.code===qi)t.emit("tokenExpired"),t.apClient.apFinish$.next(void 0);else if(Ma(e))throw e})),Yd(ue.getParameter("RECONNECTING_AP_INTERVAL")),Gc(Zc(15e3)))})),sa((function(e){t.log("An edge info got %o",e)})),ch((function(){t.apClient.clearUp()}))).pipe(pn((function(e,t){return[].concat(W(e),[t])}),[]),Da((function(e){return(e=fs(e,(function(e){return Jn(i,e.ip)}))).length-1>=t.ipIterator?e.slice(-t.ipIterator++-1)[0]:(t.ipIterator=0,e.slice(-1)[0])})),Zd(),Ab((function(n){if(void 0===n)return pa(Error("Invalid edge info"));var i=new Pl(n.ip,e,n.ticket,t.context,t.logger,r);return i.on("connectionFailure",(function(){return t.onSocketConnectionFailure(i)})),r=!i.useNewDomain,i.open$.pipe(Sf(i))})),sa((function(n){t.log("The websocket of ENV_%d re-opened to %s:%d using ap",n.env,n.ip,Bf[n.env]),t.curOpenSockets[e]=n,t.lastOpenSockets[e].next(n)})),Ab((function(n){return n.open$.pipe(sa((function(){t.log("The websocket of ENV_%d re-opened to %s:%d",n.env,n.ip,Bf[n.env]),t.curOpenSockets[e]=n,t.lastOpenSockets[e].next(n)})))})),Pe()),e===this.firstEnv?this.firstOpenKeeperSubject.next(n):this.secondOpenKeeperSubject.next(n)}}}]),t}(Ac()),rd=zc.Writer,Ba=zc.util,Uc=zc.roots.default||(zc.roots.default={}),XD=Uc.Session=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=Ba.Long?Ba.Long.fromBits(0,0,!1):0,e.prototype.elapse=Ba.Long?Ba.Long.fromBits(0,0,!1):0,e.prototype.appId="",e.prototype.ver="",e.prototype.buildno=0,e.prototype.installId="",e.prototype.os=0,e.prototype.did="",e.prototype.index=null,e.prototype.token="",e.prototype.version=0,e.prototype.subVersion=0,e.encode=function(e,t){return t||(t=rd.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.appId&&Object.hasOwnProperty.call(e,"appId")&&t.uint32(42).string(e.appId),null!=e.ver&&Object.hasOwnProperty.call(e,"ver")&&t.uint32(50).string(e.ver),null!=e.buildno&&Object.hasOwnProperty.call(e,"buildno")&&t.uint32(56).int32(e.buildno),null!=e.installId&&Object.hasOwnProperty.call(e,"installId")&&t.uint32(66).string(e.installId),null!=e.os&&Object.hasOwnProperty.call(e,"os")&&t.uint32(128).int32(e.os),null!=e.did&&Object.hasOwnProperty.call(e,"did")&&t.uint32(138).string(e.did),null!=e.index&&Object.hasOwnProperty.call(e,"index")&&Uc.Session.CommonIndex.encode(e.index,t.uint32(162).fork()).ldelim(),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(170).string(e.token),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(176).int32(e.version),null!=e.subVersion&&Object.hasOwnProperty.call(e,"subVersion")&&t.uint32(184).int32(e.subVersion),t},e.CommonIndex=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.index1="",e.prototype.index2="",e.prototype.index3="",e.encode=function(e,t){return t||(t=rd.create()),null!=e.index1&&Object.hasOwnProperty.call(e,"index1")&&t.uint32(10).string(e.index1),null!=e.index2&&Object.hasOwnProperty.call(e,"index2")&&t.uint32(18).string(e.index2),null!=e.index3&&Object.hasOwnProperty.call(e,"index3")&&t.uint32(26).string(e.index3),t},e}(),e}(),YD=Uc.Link=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=Ba.Long?Ba.Long.fromBits(0,0,!1):0,e.prototype.elapse=Ba.Long?Ba.Long.fromBits(0,0,!1):0,e.prototype.ec=0,e.prototype.sc=0,e.prototype.destServerIp="",e.prototype.ackedServerIp="",e.prototype.responseTime=0,e.encode=function(e,t){return t||(t=rd.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.ec&&Object.hasOwnProperty.call(e,"ec")&&t.uint32(40).int32(e.ec),null!=e.sc&&Object.hasOwnProperty.call(e,"sc")&&t.uint32(48).int32(e.sc),null!=e.destServerIp&&Object.hasOwnProperty.call(e,"destServerIp")&&t.uint32(58).string(e.destServerIp),null!=e.ackedServerIp&&Object.hasOwnProperty.call(e,"ackedServerIp")&&t.uint32(66).string(e.ackedServerIp),null!=e.responseTime&&Object.hasOwnProperty.call(e,"responseTime")&&t.uint32(72).int32(e.responseTime),t},e}(),ZD=Uc.Logout=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=Ba.Long?Ba.Long.fromBits(0,0,!1):0,e.prototype.elapse=Ba.Long?Ba.Long.fromBits(0,0,!1):0,e.encode=function(e,t){return t||(t=rd.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),t},e}(),$D=Uc.KickedOff=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=Ba.Long?Ba.Long.fromBits(0,0,!1):0,e.prototype.elapse=Ba.Long?Ba.Long.fromBits(0,0,!1):0,e.prototype.linkId=0,e.prototype.code=0,e.prototype.server="",e.prototype.serverCode=0,e.encode=function(e,t){return t||(t=rd.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.linkId&&Object.hasOwnProperty.call(e,"linkId")&&t.uint32(48).int32(e.linkId),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(56).int32(e.code),null!=e.server&&Object.hasOwnProperty.call(e,"server")&&t.uint32(66).string(e.server),null!=e.serverCode&&Object.hasOwnProperty.call(e,"serverCode")&&t.uint32(72).int32(e.serverCode),t},e}(),aE=Uc.ChnJoin=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=Ba.Long?Ba.Long.fromBits(0,0,!1):0,e.prototype.elapse=Ba.Long?Ba.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.encode=function(e,t){return t||(t=rd.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),t},e}(),bE=Uc.ChnJoinRes=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=Ba.Long?Ba.Long.fromBits(0,0,!1):0,e.prototype.elapse=Ba.Long?Ba.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.prototype.serverErrCode=0,e.encode=function(e,t){return t||(t=rd.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),null!=e.serverErrCode&&Object.hasOwnProperty.call(e,"serverErrCode")&&t.uint32(64).int32(e.serverErrCode),t},e}(),cE=Uc.ChnLeave=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=Ba.Long?Ba.Long.fromBits(0,0,!1):0,e.prototype.elapse=Ba.Long?Ba.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.encode=function(e,t){return t||(t=rd.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),t},e}(),dE=Uc.ConnectionStateChange=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=Ba.Long?Ba.Long.fromBits(0,0,!1):0,e.prototype.elapse=Ba.Long?Ba.Long.fromBits(0,0,!1):0,e.prototype.oldState=0,e.prototype.newState=0,e.prototype.reason=0,e.prototype.reconnId=0,e.encode=function(e,t){return t||(t=rd.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.oldState&&Object.hasOwnProperty.call(e,"oldState")&&t.uint32(40).int32(e.oldState),null!=e.newState&&Object.hasOwnProperty.call(e,"newState")&&t.uint32(48).int32(e.newState),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(56).int32(e.reason),null!=e.reconnId&&Object.hasOwnProperty.call(e,"reconnId")&&t.uint32(64).int32(e.reconnId),t},e}(),Cv=Object.freeze({__proto__:null,Session:XD,Link:YD,Logout:ZD,KickedOff:$D,ChnJoin:aE,ChnJoinRes:bE,ChnLeave:cE,ConnectionStateChange:dE,default:Uc}),Dv=Object.freeze({__proto__:null,Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191,default:{Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191}}),eE=function(e){function t(e,r,i){return ua(this,t),x(z(i=n.call(this,i,"Context")),"_token",void 0),x(z(i),"config",void 0),x(z(i),"_uid",void 0),x(z(i),"_sid",void 0),x(z(i),"_area","CN"),x(z(i),"_socketUseProxy",!1),x(z(i),"appId",void 0),x(z(i),"enableCloudProxy",!1),x(z(i),"cloudProxyServers",[]),i.appId=e,i.config=r,i}Ga(t,e);var n=Ha(t);return cb(t,[{key:"socketUseProxy",get:function(){return this._socketUseProxy&&xc.ENABLE_EDGE_AUTO_FALLBACK},set:function(e){this.log("socketUseProxy is set to %s",e),this._socketUseProxy=e}},{key:"token",set:function(e){this._token="string"==typeof e&&e?e:void 0}},{key:"uid",get:function(){if("string"==typeof this._uid&&this._uid)return this._uid;throw new qd("Cannot get illegal uid")},set:function(e){if(this.log("The user ID is set to %s",Ka(e)),!Sa(e))throw new qd;this._uid=e}},{key:"key",get:function(){if("string"==typeof this._token&&this._token)return this._token;if("string"==typeof this.appId&&this.appId)return this.appId;throw new qd("Cannot get illegal key")}},{key:"sid",get:function(){if("string"==typeof this._sid&&this._sid)return this._sid;throw new qd("Cannot get illegal sid")},set:function(e){if(this.log("sid is set to %s",e),"string"!=typeof e||!e)throw new qd;this._sid=e}},{key:"rtmArea",get:function(){if("string"==typeof this._area&&this._area)return this._area;throw new qd("Cannot get illegal area")},set:function(e){this.log("area is set to %s",e),"string"==typeof e&&e?this._area=e:this.warn("set area failed")}}]),t}(Ac());Mp("of",(function(){for(var e=0,t=arguments.length,n=new(nf(this))(t);t>e;)n[e]=arguments[e++];return n}),lk);var Vs=1/0,fE=Math.max,Fv=function(e,t,n){var r=Object(e);if(!$d(e)){var i=tf(t);e=Vd(e),t=function(e){return i(r[e],e,r)}}return-1<(t=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;if(null==n)n=0;else{var i=(n=n?(n=Ll(n))===Vs||n===-Vs?17976931348623157e292*(0>n?-1:1):n==n?n:0:0===n?n:0)%1;n=n==n?i?n-i:n:0}return 0>n&&(n=fE(r+n,0)),Sq(e,tf(t),n)}(e,t,n))?r[i?e[t]:t]:void 0},Ev=function(e,t){return e&&e.length?$k(e,void 0,"function"==typeof t?t:void 0):[]},Ws=function(){function e(){ua(this,e),x(this,"size",0),x(this,"fields",new Map)}return cb(e,[{key:"define",value:function(e,t,n){if(this.size+=n,64<this.size)throw new RangeError("the struct over 64 bits is not supported");qh(t={val:0,isNumber:"number"===t,isBoolean:"boolean"===t,oneof:"number"===t||"boolean"===t?void 0:t,len:n}),this.fields.set(e,t)}},{key:"set",value:function(e,t){if(!(e=this.fields.get(e)))throw Error("field not found");var n=e.oneof;if(!ma.isLong(t)&&"number"!=typeof t)if("boolean"==typeof t)t=t?1:0;else{if(void 0===n)throw Error("invalid field type");if(void 0===(t=n[t]))throw Error("field type not found")}qh(e,t),e.val=t}},{key:"toNumber",value:function(){for(var e=0,t=0,n=0,r=Array.from(this.fields);n<r.length;n++){var i=Xa(r[n],2)[1],o=i.len;void 0!==(i=i.val)&&(e+=ma.fromValue(i).shiftLeft(t).toNumber(),t+=o)}return e}},{key:"toLong",value:function(){for(var e=ma.fromNumber(0,!0),t=0,n=0,r=Array.from(this.fields);n<r.length;n++){var i=Xa(r[n],2)[1],o=i.len;void 0!==(i=i.val)&&(e=ma.fromValue(i).shiftLeft(t).add(e),t+=o)}return e}},{key:"assert",value:function(e,t){function n(e){if(!ma.isLong(e)&&"number"!=typeof e)if("boolean"==typeof e)e=e?1:0;else{if(void 0===i)throw Error("invalid field type");if(void 0===(e=i[e]))throw Error("field type not found")}return qh(r,e),ph(e,r.val)}var r=this.fields.get(e);if(!r)throw Error("field not found");var i=r.oneof;if(!Array.isArray(t))return n(t);if(1===t.length)return n(t[0]);if(t.every((function(e){return"string"==typeof e}))&&void 0!==i)return t.some((function(e){return n(e)}));throw Error("invalid valueTypes")}},{key:"from",value:function(e){e=ma.fromValue(e);for(var t=0,n=0,r=Array.from(this.fields);n<r.length;n++){var i=Xa(r[n],2)[1],o=i.len,a=ma.fromNumber(Math.pow(2,o)-1,!0).shiftLeft(t);qh(i,a=e.and(a).shiftRightUnsigned(t)),i.val=a,t+=o}}},{key:"typeOf",value:function(e){if(void 0!==(e=this.fields.get(e))){var t=e.oneof;if(e=e.val,void 0!==t){var n=0;for(t=Object.entries(t);n<t.length;n++){var r=Xa(t[n],2),i=r[0];if(ph(e,r[1]))return i}}}throw new TypeError("can only get type of oneof type")}}]),e}(),Xs=function(e){function t(e){ua(this,t);var r=n.call(this);return r.define("Rejoin","boolean",1),r.define("Unused","number",31),r.define("Platform","number",8),r.define("Version","number",12),r.define("Subversion","number",12),r.set("Platform",7),r.set("Version",4),r.set("Subversion",17),r.set("Rejoin",e),r}Ga(t,e);var n=Ha(t);return t}(Ws),gE=jb(jb({},{PeerTextMessage:0,ChannelTextMessage:1,VendorTextMessage:2}),{PeerRawMessage:3,ChannelRawMessage:4,VendorRawMessage:5}),Ys={CallInvite:101,CallAccept:102,CallReject:103,CallCancel:104},hE=jb(jb({},gE),Ys),iE={Uncompressed:0,Zlib:1},Cf=function(e){function t(e){ua(this,t);var r=n.call(this);if(r.define("MessageType",hE,8),r.define("BroadcastJumps","number",2),r.define("ToCache","boolean",1),r.define("FromCache","boolean",1),r.define("CompressionMethod",iE,2),r.define("IterationNumber","number",4),r.define("BufferedMessage","boolean",1),r.define("ToArchive","boolean",1),r.define("FromArchive","boolean",1),"number"==typeof e||ma.isLong(e))r.from(e);else if(void 0!==e){var i=0;for(e=lh(e);i<e.length;i++){var o=Xa(e[i],2);r.set(o[0],o[1])}}return r}Ga(t,e);var n=Ha(t);return cb(t,[{key:"isTextMessage",value:function(){return this.assert("MessageType",["PeerTextMessage","ChannelTextMessage","VendorTextMessage"])}},{key:"isRawMessage",value:function(){return this.assert("MessageType",["ChannelRawMessage","PeerRawMessage","VendorRawMessage"])}},{key:"isRawPeerMessage",value:function(){return this.assert("MessageType","PeerRawMessage")}},{key:"isRawChannelMessage",value:function(){return this.assert("MessageType","ChannelRawMessage")}},{key:"isPeerTextMessage",value:function(){return this.assert("MessageType","PeerTextMessage")}},{key:"isChannelTextMessage",value:function(){return this.assert("MessageType","ChannelTextMessage")}},{key:"isInvitation",value:function(e){var t=this;return void 0!==e?this.assert("MessageType",e):$f(Ys).some((function(e){return t.assert("MessageType",e)}))}},{key:"isPeerMessage",value:function(){return this.assert("MessageType",["PeerTextMessage","PeerRawMessage"])}},{key:"isZlibCompressed",value:function(){return this.assert("CompressionMethod","Zlib")}},{key:"isFromCache",value:function(){return this.assert("FromCache",!0)}},{key:"isBufferedMessage",value:function(){return this.assert("BufferedMessage",!0)}},{key:"getInvitationType",value:function(){if(!this.isInvitation())throw new TypeError("cannot get InvitationType of a normal message type");return this.typeOf("MessageType")}}]),t}(Ws),jE=function(e){function t(e){return ua(this,t),x(z(e=n.call(this,e,"ChatManager")),"dialogueLru",new nz(void 0,{maxlen:1e4,ttl:1e4})),e}Ga(t,e);var n=Ha(t);return cb(t,[{key:"getChatInfo",value:function(e){var t=this.dialogueLru.get(e);if(this.dialogueLru.prune(),t){var n=t.dialogue,r={dialogue:n,sequence:t=t.sequence.add(1)};return this.dialogueLru.set(e,{dialogue:n,sequence:t}),r}return n={dialogue:hh(),sequence:ma.fromNumber(1,!0)},this.dialogueLru.set(e,n),n}}]),t}(Ac()),F={};"object"==("undefined"==typeof module?"undefined":oa(module))&&(module.exports=F),F.parse=function(e,t){var n,r=F.bin.readUshort,i=F.bin.readUint,o={};for(n=(e=new Uint8Array(e)).length-4;101010256!=i(e,n);)n--;var a=r(e,n=n+4+4);r(e,n+=2),i(e,n+=2),n=i(e,n+=4);for(var s=0;s<a;s++){i(e,n),n+=4,n+=4,n+=4,i(e,n+=4);var u=i(e,n+=4),c=i(e,n+=4),l=r(e,n+=4),f=r(e,n+2),h=r(e,n+4);n+=6;var p=i(e,n+=8);n+=4,n+=l+f+h,F._readLocal(e,p,o,u,c,t)}return o},F._readLocal=function(e,t,n,r,i,o){var a=F.bin.readUshort,s=F.bin.readUint;s(e,t),a(e,t+=4),a(e,t+=2);var u=a(e,t+=2);s(e,t+=2),s(e,t+=4),s=a(e,t=t+4+8);var c=a(e,t+=2);if(t+=2,a=F.bin.readUTF8(e,t,s),t=t+s+c,o)n[a]={size:i,csize:r};else if(e=new Uint8Array(e.buffer,t),0==u)n[a]=new Uint8Array(e.buffer.slice(t,t+r));else{if(8!=u)throw"unknown compression method: "+u;t=new Uint8Array(i),F.inflateRaw(e,t),n[a]=t}},F.inflateRaw=function(e,t){return F.F.inflate(e,t)},F.inflate=function(e,t){return e[0],e[1],F.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-2),t)},F.deflate=function(e,t){null==t&&(t={level:6});var n=0,r=new Uint8Array(50+Math.floor(1.1*e.length));return r[n]=120,r[n+1]=156,n=F.F.deflateRaw(e,r,n+2,t.level),e=F.adler(e,0,e.length),r[n+0]=e>>>24&255,r[n+1]=e>>>16&255,r[n+2]=e>>>8&255,r[n+3]=e>>>0&255,new Uint8Array(r.buffer,0,n+4)},F.deflateRaw=function(e,t){null==t&&(t={level:6});var n=new Uint8Array(50+Math.floor(1.1*e.length)),r=F.F.deflateRaw(e,n,r,t.level);return new Uint8Array(n.buffer,0,r)},F.encode=function(e,t){null==t&&(t=!1);var n,r=0,i=F.bin.writeUint,o=F.bin.writeUshort,a={};for(n in e){var s=!F._noNeed(n)&&!t,u=e[n],c=F.crc.crc(u,0,u.length);a[n]={cpr:s,usize:u.length,crc:c,file:s?F.deflateRaw(u):u}}for(n in a)r+=a[n].file.length+30+46+2*F.bin.sizeUTF8(n);for(n in e=new Uint8Array(r+22),t=0,u=[],a)c=a[n],u.push(t),t=F._writeHeader(e,t,n,c,0);for(n in r=0,s=t,a)c=a[n],u.push(t),t=F._writeHeader(e,t,n,c,1,u[r++]);return a=t-s,i(e,t,101010256),o(e,t=t+4+4,r),o(e,t+=2,r),i(e,t+=2,a),i(e,t+4,s),e.buffer},F._noNeed=function(e){return e=e.split(".").pop().toLowerCase(),-1!="png,jpg,jpeg,zip".indexOf(e)},F._writeHeader=function(e,t,n,r,i,o){var a=F.bin.writeUint,s=F.bin.writeUshort,u=r.file;return a(e,t,0==i?67324752:33639248),t+=4,1==i&&(t+=2),s(e,t,20),s(e,t+=2,0),s(e,t+=2,r.cpr?8:0),a(e,t+=2,0),a(e,t+=4,r.crc),a(e,t+=4,u.length),a(e,t+=4,r.usize),s(e,t+=4,F.bin.sizeUTF8(n)),s(e,t+=2,0),t+=2,1==i&&(a(e,t=t+2+2+6,o),t+=4),t+=n=F.bin.writeUTF8(e,t,n),0==i&&(e.set(u,t),t+=u.length),t},F.crc={table:function(){for(var e=new Uint32Array(256),t=0;256>t;t++){for(var n=t,r=0;8>r;r++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}(),update:function(e,t,n,r){for(var i=0;i<r;i++)e=F.crc.table[255&(e^t[n+i])]^e>>>8;return e},crc:function(e,t,n){return 4294967295^F.crc.update(4294967295,e,t,n)}},F.adler=function(e,t,n){var r=1,i=0,o=t;for(t+=n;o<t;){for(n=Math.min(o+5552,t);o<n;)i+=r+=e[o++];r%=65521,i%=65521}return i<<16|r},F.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},writeASCII:function(e,t,n){for(var r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r)},pad:function(e){return 2>e.length?"0"+e:e},readUTF8:function(e,t,n){for(var r,i="",o=0;o<n;o++)i+="%"+F.bin.pad(e[t+o].toString(16));try{r=decodeURIComponent(i)}catch(r){return F.bin.readASCII(e,t,n)}return r},writeUTF8:function(e,t,n){for(var r=n.length,i=0,o=0;o<r;o++){var a=n.charCodeAt(o);if(0==(4294967168&a))e[t+i]=a,i++;else if(0==(4294965248&a))e[t+i]=192|a>>6,e[t+i+1]=128|a>>0&63,i+=2;else if(0==(4294901760&a))e[t+i]=224|a>>12,e[t+i+1]=128|a>>6&63,e[t+i+2]=128|a>>0&63,i+=3;else{if(0!=(4292870144&a))throw"e";e[t+i]=240|a>>18,e[t+i+1]=128|a>>12&63,e[t+i+2]=128|a>>6&63,e[t+i+3]=128|a>>0&63,i+=4}}return i},sizeUTF8:function(e){for(var t=e.length,n=0,r=0;r<t;r++){var i=e.charCodeAt(r);if(0==(4294967168&i))n++;else if(0==(4294965248&i))n+=2;else if(0==(4294901760&i))n+=3;else{if(0!=(4292870144&i))throw"e";n+=4}}return n}},F.F={},F.F.deflateRaw=function(e,t,n,r){var i=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][r],o=F.F.U,a=F.F._goodIndex;F.F._hash;var s=F.F._putsE,u=0;n<<=3;var c=0,l=e.length;if(0==r){for(;u<l;){var f=Math.min(65535,l-u);s(t,n,u+f==l?1:0),n=F.F._copyExact(e,u,f,t,n+8),u+=f}return n>>>3}s=o.lits,r=o.strt;var h=o.prev,p=0,d=0,b=0,v=0,g=0;for(2<l&&(r[g=F.F._hash(e,0)]=0),u=0;u<l;u++){if(f=g,u+1<l-2){g=F.F._hash(e,u+1);var y=u+1&32767;h[y]=r[g],r[g]=y}if(c<=u){if((14e3<p||26697<d)&&100<l-u&&(c<u&&(s[p]=u-c,p+=2,c=u),n=F.F._writeBlock(u==l-1||c==l?1:0,s,p,v,e,b,u-b,t,n),p=d=v=0,b=u),y=0,u<l-2&&(y=F.F._bestMatch(e,u,h,f,Math.min(i[2],l-u),i[3])),0!=y){f=y>>>16,y&=65535;var E=a(f,o.of0);o.lhst[257+E]++;var m=a(y,o.df0);o.dhst[m]++,v+=o.exb[E]+o.dxb[m],s[p]=f<<23|u-c,s[p+1]=y<<16|E<<8|m,p+=2,c=u+f}else o.lhst[e[u]]++;d++}}for(b==u&&0!=e.length||(c<u&&(s[p]=u-c,p+=2),n=F.F._writeBlock(1,s,p,v,e,b,u-b,t,n));0!=(7&n);)n++;return n>>>3},F.F._bestMatch=function(e,t,n,r,i,o){var a=32767&t,s=n[a],u=a-s+32768&32767;if(s==a||r!=F.F._hash(e,t-u))return 0;for(var c=r=0,l=Math.min(32767,t);u<=l&&0!=--o&&s!=a;){if((0==r||e[t+r]==e[t+r-u])&&(a=F.F._howLong(e,t,u))>r){if(c=u,(r=a)>=i)break;u+2<a&&(a=u+2);for(var f=0,h=0;h<a-2;h++){var p=t-u+h+32768&32767,d=p-n[p]+32768&32767;d>f&&(f=d,s=p)}}u+=(a=s)-(s=n[a])+32768&32767}return r<<16|c},F.F._howLong=function(e,t,n){if(e[t]!=e[t-n]||e[t+1]!=e[t+1-n]||e[t+2]!=e[t+2-n])return 0;var r=t,i=Math.min(e.length,t+258);for(t+=3;t<i&&e[t]==e[t-n];)t++;return t-r},F.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},F.saved=0,F.F._writeBlock=function(e,t,n,r,i,o,a,s,u){var c=F.F.U,l=F.F._putsF,f=F.F._putsE;c.lhst[256]++;var h=F.F.getTrees(),p=h[0],d=h[1],b=h[2],v=h[3],g=h[4],y=h[5],E=h[6];h=h[7];var m=32+(0==(u+3&7)?0:8-(u+3&7))+(a<<3),w=r+F.F.contSize(c.fltree,c.lhst)+F.F.contSize(c.fdtree,c.dhst);r=r+F.F.contSize(c.ltree,c.lhst)+F.F.contSize(c.dtree,c.dhst),r+=14+3*y+F.F.contSize(c.itree,c.ihst)+(2*c.ihst[16]+3*c.ihst[17]+7*c.ihst[18]);for(var _=0;286>_;_++)c.lhst[_]=0;for(_=0;30>_;_++)c.dhst[_]=0;for(_=0;19>_;_++)c.ihst[_]=0;if(m=m<w&&m<r?0:w<r?1:2,l(s,u,e),l(s,u+1,m),u+=3,0==m){for(;0!=(7&u);)u++;u=F.F._copyExact(i,o,a,s,u)}else{if(1==m)var O=c.fltree,A=c.fdtree;if(2==m){for(F.F.makeCodes(c.ltree,p),F.F.revCodes(c.ltree,p),F.F.makeCodes(c.dtree,d),F.F.revCodes(c.dtree,d),F.F.makeCodes(c.itree,b),F.F.revCodes(c.itree,b),O=c.ltree,A=c.dtree,f(s,u,v-257),f(s,u+=5,g-1),f(s,u+=5,y-4),u+=4,e=0;e<y;e++)f(s,u+3*e,c.itree[1+(c.ordr[e]<<1)]);u=F.F._codeTiny(E,c.itree,s,u+3*y),u=F.F._codeTiny(h,c.itree,s,u)}for(y=0;y<n;y+=2){for(E=(e=t[y])>>>23,e=o+(8388607&e);o<e;)u=F.F._writeLit(i[o++],O,s,u);0!=E&&(e=(p=t[y+1])>>16,a=p>>8&255,p&=255,f(s,u=F.F._writeLit(257+a,O,s,u),E-c.of0[a]),u+=c.exb[a],l(s,u=F.F._writeLit(p,A,s,u),e-c.df0[p]),u+=c.dxb[p],o+=E)}u=F.F._writeLit(256,O,s,u)}return u},F.F._copyExact=function(e,t,n,r,i){var o=i>>>3;return r[o]=n,r[o+1]=n>>>8,r[o+2]=255-r[o],r[o+3]=255-r[o+1],o+=4,r.set(new Uint8Array(e.buffer,t,n),o),i+(n+4<<3)},F.F.getTrees=function(){for(var e=F.F.U,t=F.F._hufTree(e.lhst,e.ltree,15),n=F.F._hufTree(e.dhst,e.dtree,15),r=[],i=F.F._lenCodes(e.ltree,r),o=[],a=F.F._lenCodes(e.dtree,o),s=0;s<r.length;s+=2)e.ihst[r[s]]++;for(s=0;s<o.length;s+=2)e.ihst[o[s]]++;s=F.F._hufTree(e.ihst,e.itree,7);for(var u=19;4<u&&0==e.itree[1+(e.ordr[u-1]<<1)];)u--;return[t,n,s,i,a,u,r,o]},F.F.getSecond=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(e[n+1]);return t},F.F.nonZero=function(e){for(var t="",n=0;n<e.length;n+=2)0!=e[n+1]&&(t+=(n>>1)+",");return t},F.F.contSize=function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[1+(r<<1)];return n},F.F._codeTiny=function(e,t,n,r){for(var i=0;i<e.length;i+=2){var o=e[i],a=e[i+1];r=F.F._writeLit(o,t,n,r);var s=16==o?2:17==o?3:7;15<o&&(F.F._putsE(n,r,a,s),r+=s)}return r},F.F._lenCodes=function(e,t){for(var n=e.length;2!=n&&0==e[n-1];)n-=2;for(var r=0;r<n;r+=2){var i=e[r+1],o=r+3<n?e[r+3]:-1,a=r+5<n?e[r+5]:-1,s=0==r?-1:e[r-1];if(0==i&&o==i&&a==i){for(o=r+5;o+2<n&&e[o+2]==i;)o+=2;11>(i=Math.min(o+1-r>>>1,138))?t.push(17,i-3):t.push(18,i-11),r+=2*i-2}else if(i==s&&o==i&&a==i){for(o=r+5;o+2<n&&e[o+2]==i;)o+=2;i=Math.min(o+1-r>>>1,6),t.push(16,i-3),r+=2*i-2}else t.push(i,0)}return n>>>1},F.F._hufTree=function(e,t,n){var r=[],i=e.length,o=t.length,a=0;for(a=0;a<o;a+=2)t[a]=0,t[a+1]=0;for(a=0;a<i;a++)0!=e[a]&&r.push({lit:a,f:e[a]});if(e=r.length,i=r.slice(0),0==e)return 0;if(1==e)return t[1+((n=r[0].lit)<<1)]=1,t[1+((0==n?1:0)<<1)]=1;r.sort((function(e,t){return e.f-t.f})),a=r[0],o=r[1];var s=0,u=1,c=2;for(r[0]={lit:-1,f:a.f+o.f,l:a,r:o,d:0};u!=e-1;)a=s!=u&&(c==e||r[s].f<r[c].f)?r[s++]:r[c++],o=s!=u&&(c==e||r[s].f<r[c].f)?r[s++]:r[c++],r[u++]={lit:-1,f:a.f+o.f,l:a,r:o};for((r=F.F.setDepth(r[u-1],0))>n&&(F.F.restrictDepth(i,n,r),r=n),a=0;a<e;a++)t[1+(i[a].lit<<1)]=i[a].d;return r},F.F.setDepth=function(e,t){return-1!=e.lit?e.d=t:Math.max(F.F.setDepth(e.l,t+1),F.F.setDepth(e.r,t+1))},F.F.restrictDepth=function(e,t,n){var r=0,i=1<<n-t,o=0;for(e.sort((function(e,t){return t.d==e.d?e.f-t.f:t.d-e.d})),r=0;r<e.length&&e[r].d>t;r++){var a=e[r].d;e[r].d=t,o+=i-(1<<n-a)}for(o>>>=n-t;0<o;)(a=e[r].d)<t?(e[r].d++,o-=1<<t-a-1):r++;for(;0<=r;r--)e[r].d==t&&0>o&&(e[r].d--,o++);0!=o&&console.log("debt left")},F.F._goodIndex=function(e,t){var n=0;return t[16|n]<=e&&(n|=16),t[8|n]<=e&&(n|=8),t[4|n]<=e&&(n|=4),t[2|n]<=e&&(n|=2),t[1|n]<=e&&(n|=1),n},F.F._writeLit=function(e,t,n,r){return F.F._putsF(n,r,t[e<<1]),r+t[1+(e<<1)]},F.F.inflate=function(e,t){var n=Uint8Array;if(3==e[0]&&0==e[1])return t||new n(0);var r=F.F,i=r._bitsF,o=r._bitsE,a=r._decodeTiny,s=r.makeCodes,u=r.codes2map,c=r._get17,l=r.U,f=null==t;f&&(t=new n(e.length>>>2<<3));for(var h,p,d,b,v=0,g=0,y=p=0,E=0;0==v;)if(v=i(e,E,1),h=i(e,E+1,2),E+=3,0==h)0!=(7&E)&&(E+=8-(7&E)),h=e[(E=4+(E>>>3))-4]|e[E-3]<<8,f&&(t=F.F._check(t,y+h)),t.set(new n(e.buffer,e.byteOffset+E,h),y),E=E+h<<3,y+=h;else{if(f&&(t=F.F._check(t,y+131072)),1==h&&(d=l.flmap,b=l.fdmap,g=511,p=31),2==h){for(p=o(e,E,5)+257,h=o(e,E+5,5)+1,d=o(e,E+10,4)+4,E+=14,b=0;38>b;b+=2)l.itree[b]=0,l.itree[b+1]=0;for(g=1,b=0;b<d;b++){var m=o(e,E+3*b,3);l.itree[1+(l.ordr[b]<<1)]=m,m>g&&(g=m)}E+=3*d,s(l.itree,g),u(l.itree,g,l.imap),d=l.lmap,b=l.dmap,E=a(l.imap,(1<<g)-1,p+h,e,E,l.ttree),g=(1<<(m=r._copyOut(l.ttree,0,p,l.ltree)))-1,p=(1<<(h=r._copyOut(l.ttree,p,h,l.dtree)))-1,s(l.ltree,m),u(l.ltree,m,d),s(l.dtree,h),u(l.dtree,h,b)}for(;;)if(E+=15&(h=d[c(e,E)&g]),0==(m=h>>>4)>>>8)t[y++]=m;else{if(256==m)break;h=y+m-254,264<m&&(h=y+((m=l.ldef[m-257])>>>3)+o(e,E,7&m),E+=7&m),E+=15&(m=b[c(e,E)&p]);var w=((m=l.ddef[m>>>4])>>>4)+i(e,E,15&m);for(E+=15&m,f&&(t=F.F._check(t,y+131072));y<h;)t[y]=t[y++-w],t[y]=t[y++-w],t[y]=t[y++-w],t[y]=t[y++-w];y=h}}return t.length==y?t:t.slice(0,y)},F.F._check=function(e,t){var n=e.length;return t<=n?e:((t=new Uint8Array(Math.max(n<<1,t))).set(e,0),t)},F.F._decodeTiny=function(e,t,n,r,i,o){for(var a=F.F._bitsE,s=F.F._get17,u=0;u<n;){var c=e[s(r,i)&t];i+=15&c;var l=c>>>4;if(15>=l)o[u]=l,u++;else{var f=c=0;for(16==l?(f=3+a(r,i,2),i+=2,c=o[u-1]):17==l?(f=3+a(r,i,3),i+=3):18==l&&(f=11+a(r,i,7),i+=7),l=u+f;u<l;)o[u]=c,u++}}return i},F.F._copyOut=function(e,t,n,r){for(var i=0,o=0,a=r.length>>>1;o<n;){var s=e[o+t];r[o<<1]=0,r[1+(o<<1)]=s,s>i&&(i=s),o++}for(;o<a;)r[o<<1]=0,r[1+(o<<1)]=0,o++;return i},F.F.makeCodes=function(e,t){var n,r,i=F.F.U,o=e.length,a=i.bl_count;for(n=0;n<=t;n++)a[n]=0;for(n=1;n<o;n+=2)a[e[n]]++;for(i=i.next_code,n=0,a[0]=0,r=1;r<=t;r++)n=n+a[r-1]<<1,i[r]=n;for(t=0;t<o;t+=2)0!=(a=e[t+1])&&(e[t]=i[a],i[a]++)},F.F.codes2map=function(e,t,n){for(var r=e.length,i=F.F.U.rev15,o=0;o<r;o+=2)if(0!=e[o+1]){var a=e[o+1],s=o>>1<<4|a,u=t-a;for(u=(a=e[o]<<u)+(1<<u);a!=u;)n[i[a]>>>15-t]=s,a++}},F.F.revCodes=function(e,t){for(var n=F.F.U.rev15,r=15-t,i=0;i<e.length;i+=2)e[i]=n[e[i]<<t-e[i+1]]>>>r},F.F._putsE=function(e,t,n){n<<=7&t,e[t>>>=3]|=n,e[t+1]|=n>>>8},F.F._putsF=function(e,t,n){n<<=7&t,e[t>>>=3]|=n,e[t+1]|=n>>>8,e[t+2]|=n>>>16},F.F._bitsE=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1},F.F._bitsF=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1},F.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},F.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},F.F.U=function(){var e=Uint16Array,t=Uint32Array;return{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}}(),function(){function e(e,t,n){for(;0!=t--;)e.push(0,n)}for(var t=F.F.U,n=0;32768>n;n++){var r=n;r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8,t.rev15[n]=(r>>>16|r<<16)>>>17}for(n=0;32>n;n++)t.ldef[n]=t.of0[n]<<3|t.exb[n],t.ddef[n]=t.df0[n]<<4|t.dxb[n];e(t.fltree,144,8),e(t.fltree,112,9),e(t.fltree,24,7),e(t.fltree,8,8),F.F.makeCodes(t.fltree,9),F.F.codes2map(t.fltree,9,t.flmap),F.F.revCodes(t.fltree,9),e(t.fdtree,32,5),F.F.makeCodes(t.fdtree,5),F.F.codes2map(t.fdtree,5,t.fdmap),F.F.revCodes(t.fdtree,5),e(t.itree,19,0),e(t.ltree,286,0),e(t.dtree,30,0),e(t.ttree,320,0)}();var kE=Array.isArray||function(e){return e&&"number"==typeof e.length},lE=Object.defineProperty({isArray:kE},"__esModule",{value:!0}),mE=Object.defineProperty({isObject:function(e){return null!==e&&"object"===oa(e)}},"__esModule",{value:!0}),nE=Object.defineProperty({isFunction:function(e){return"function"==typeof e}},"__esModule",{value:!0}),oE=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),rh=Object.defineProperty({UnsubscriptionError:oE},"__esModule",{value:!0}),pE=function(){function e(e){this.closed=!1,this._subscriptions=this._parentOrParents=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){if(!this.closed){var t=this._parentOrParents,n=this._ctorUnsubscribe,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._subscriptions=this._parentOrParents=null,t instanceof e)t.remove(this);else if(null!==t)for(var o=0;o<t.length;++o)t[o].remove(this);if(nE.isFunction(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(e){var a=e instanceof rh.UnsubscriptionError?Yn(e.errors):[e]}}if(lE.isArray(i))for(o=-1,t=i.length;++o<t;)if(n=i[o],mE.isObject(n))try{n.unsubscribe()}catch(e){a=a||[],e instanceof rh.UnsubscriptionError?a=a.concat(Yn(e.errors)):a.push(e)}if(a)throw new rh.UnsubscriptionError(a)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(oa(t)){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof e||(t=n,(n=new e)._subscriptions=[t]);break;default:throw Error("unrecognized teardown "+t+" added to Subscription.")}if(null===(t=n._parentOrParents))n._parentOrParents=this;else if(t instanceof e){if(t===this)return n;n._parentOrParents=[t,this]}else{if(-1!==t.indexOf(this))return n;t.push(this)}return null===(t=this._subscriptions)?this._subscriptions=[n]:t.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;t&&(-1!==(e=t.indexOf(e))&&t.splice(e,1))},e.EMPTY=((t=new e).closed=!0,t),e}(),qE=Object.defineProperty({Subscription:pE},"__esModule",{value:!0}),rE=Va&&Va.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),sE=function(e){function t(t,n){return e.call(this)||this}return rE(t,e),t.prototype.schedule=function(e,t){return this},t}(qE.Subscription),tE=Object.defineProperty({Action:sE},"__esModule",{value:!0}),uE=Va&&Va.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zs=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return uE(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,e=this.id;var n=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(n,e,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){return this.closed?Error("executing a cancelled action"):(this.pending=!1,(e=this._execute(e,t))?e:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))))},t.prototype._execute=function(e,t){t=!1;var n=void 0;try{this.work(e)}catch(e){t=!0,n=!!e&&e||Error(e)}if(t)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.state=this.work=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(tE.Action);Object.defineProperty({AsyncAction:Zs},"__esModule",{value:!0});var vE=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),$s=Object.defineProperty({Scheduler:vE},"__esModule",{value:!0}),wE=Va&&Va.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),at=function(e){function t(n,r){void 0===r&&(r=$s.Scheduler.now);var i=e.call(this,n,(function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return wE(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}($s.Scheduler);Object.defineProperty({AsyncScheduler:at},"__esModule",{value:!0});var xE=Ea("iterator"),Ql=!ia((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[xE]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://ÑÐµÑÑ").host||"#%D0%B1"!==new URL("http://a#Ð±").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),yE=/[^\0-\u007E]/,zE=/[.\u3002\uFF0E\uFF61]/g,Df=Math.floor,Rl=String.fromCharCode,bt=function(e){var t=jg(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return Ia(t.call(e))},ct=Lc("fetch"),Sl=Lc("Headers"),AE=Ea("iterator"),dt=Za.set,Yb=Za.getterFor("URLSearchParams"),BE=Za.getterFor("URLSearchParamsIterator"),CE=/\+/g,et=Array(4),DE=function(e){try{return decodeURIComponent(e)}catch(t){return e}},ft=function(e){var t=e.replace(CE," ");e=4;try{return decodeURIComponent(t)}catch(i){for(;e;){var n=t.replace,r=e--;r=et[r-1]||(et[r-1]=RegExp("((?:%[\\da-f]{2}){"+r+"})","gi")),t=n.call(t,r,DE)}return t}},gt=/[!'()~]|%20/g,EE={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ht=function(e){return EE[e]},it=function(e,t){if(t){t=t.split("&");for(var n,r=0;r<t.length;)(n=t[r++]).length&&(n=n.split("="),e.push({key:ft(n.shift()),value:ft(n.join("="))}))}},FE=function(e){this.entries.length=0,it(this.entries,e)},Ef=function(e,t){if(e<t)throw TypeError("Not enough arguments")},Tl=Qo((function(e,t){dt(this,{type:"URLSearchParamsIterator",iterator:bt(Yb(e).entries),kind:t})}),"Iterator",(function(){var e=BE(this),t=e.kind,n=(e=e.iterator.next()).value;return e.done||(e.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),e})),Pg=function(){tc(this,Pg,"URLSearchParams");var e,t,n,r=0<arguments.length?arguments[0]:void 0,i=[];if(dt(this,{type:"URLSearchParams",entries:i,updateURL:function(){},updateSearchParams:FE}),void 0!==r)if(va(r)){var o=jg(r);if("function"==typeof o)for(r=o.call(r),o=r.next;!(e=o.call(r)).done;){var a=(e=bt(Ia(e.value))).next;if((t=a.call(e)).done||(n=a.call(e)).done||!a.call(e).done)throw TypeError("Expected sequence with length 2");i.push({key:t.value+"",value:n.value+""})}else for(e in r)ha(r,e)&&i.push({key:e,value:r[e]+""})}else it(i,"string"==typeof r?"?"===r.charAt(0)?r.slice(1):r:r+"")},wi=Pg.prototype;gf(wi,{append:function(e,t){Ef(arguments.length,2);var n=Yb(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){Ef(arguments.length,1);for(var t=Yb(this),n=t.entries,r=e+"",i=0;i<n.length;)n[i].key===r?n.splice(i,1):i++;t.updateURL()},get:function(e){Ef(arguments.length,1);for(var t=Yb(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){Ef(arguments.length,1);for(var t=Yb(this).entries,n=e+"",r=[],i=0;i<t.length;i++)t[i].key===n&&r.push(t[i].value);return r},has:function(e){Ef(arguments.length,1);for(var t=Yb(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){Ef(arguments.length,1);for(var n,r=Yb(this),i=r.entries,o=!1,a=e+"",s=t+"",u=0;u<i.length;u++)(n=i[u]).key===a&&(o?i.splice(u--,1):(o=!0,n.value=s));o||i.push({key:a,value:s}),r.updateURL()},sort:function(){var e,t,n=Yb(this),r=n.entries,i=r.slice();for(t=r.length=0;t<i.length;t++){var o=i[t];for(e=0;e<t;e++)if(r[e].key>o.key){r.splice(e,0,o);break}e===t&&r.push(o)}n.updateURL()},forEach:function(e){for(var t,n=Yb(this).entries,r=Cd(e,1<arguments.length?arguments[1]:void 0,3),i=0;i<n.length;)r((t=n[i++]).value,t.key,this)},keys:function(){return new Tl(this,"keys")},values:function(){return new Tl(this,"values")},entries:function(){return new Tl(this,"entries")}},{enumerable:!0}),Wa(wi,AE,wi.entries),Wa(wi,"toString",(function(){for(var e,t=Yb(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(encodeURIComponent(e.key).replace(gt,ht)+"="+encodeURIComponent(e.value).replace(gt,ht));return n.join("&")}),{enumerable:!0}),sc(Pg,"URLSearchParams"),ba({global:!0,forced:!Ql},{URLSearchParams:Pg}),Ql||"function"!=typeof ct||"function"!=typeof Sl||ba({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t=[e];if(1<arguments.length){var n=arguments[1];if(va(n)){var r=n.body;if("URLSearchParams"===ff(r)){var i=n.headers?new Sl(n.headers):new Sl;i.has("content-type")||i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),n=ec(n,{body:Jc(0,String(r)),headers:Jc(0,i)})}}t.push(n)}return ct.apply(this,t)}});var Qg=Q.URL,GE=Pg,HE=Za.set,$a=Za.getterFor("URL"),IE=Math.floor,jt=Math.pow,kt=/[A-Za-z]/,JE=/[\d+-.A-Za-z]/,Ul=/\d/,KE=/^(0x|0X)/,LE=/^[0-7]+$/,ME=/^\d+$/,lt=/^[\dA-Fa-f]+$/,NE=/[\0\t\n\r #%/:?@[\\]]/,OE=/[\0\t\n\r #/:?@[\\]]/,PE=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,QE=/[\t\n\r]/g,Vl=function(e,t){var n;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return"Invalid host";var r=RE(t.slice(1,-1));if(!r)return"Invalid host"}else if(sb(e)){for(r=[],t=t.toLowerCase().replace(zE,".").split("."),n=0;n<t.length;n++){var i=t[n],o=r,a=o.push;if(yE.test(i)){var s=i;i=[];var u=s;s=[];for(var c=0,l=u.length;c<l;){var f=u.charCodeAt(c++);if(55296<=f&&56319>=f&&c<l){var h=u.charCodeAt(c++);56320==(64512&h)?s.push(((1023&f)<<10)+(1023&h)+65536):(s.push(f),c--)}else s.push(f)}c=s.length,l=128;var p=0,d=72;for(u=0;u<s.length;u++){var b=s[u];128>b&&i.push(Rl(b))}for((h=f=i.length)&&i.push("-");h<c;){var v=2147483647;for(u=0;u<s.length;u++)(b=s[u])>=l&&b<v&&(v=b);var g=h+1;if(v-l>Df((2147483647-p)/g))throw RangeError("Overflow: input needs wider integers to process");for(p+=(v-l)*g,l=v,u=0;u<s.length;u++){if((b=s[u])<l&&2147483647<++p)throw RangeError("Overflow: input needs wider integers to process");if(b==l){var y=p;for(b=36;!(y<(v=b<=d?1:b>=d+26?26:b-d));b+=36){var E=36-v,m=i;v+=(y-=v)%E,m.push.call(m,Rl(v+22+75*(26>v))),y=Df(y/E)}for(i.push(Rl(y+22+75*(26>y))),d=g,b=0,p=h==f?Df(p/700):p>>1,p+=Df(p/d);455<p;b+=36)p=Df(p/35);d=Df(b+36*p/(p+38)),p=0,++h}}++p,++l}i="xn--"+i.join("")}a.call(o,i)}if(t=r.join("."),NE.test(t))return"Invalid host";if(null===(r=SE(t)))return"Invalid host"}else{if(OE.test(t))return"Invalid host";for(r="",t=fe(t),n=0;n<t.length;n++)r+=Pd(t[n],xi)}e.host=r},SE=function(e){var t,n=e.split(".");n.length&&""==n[n.length-1]&&n.pop();var r=n.length;if(4<r)return e;var i=[];for(t=0;t<r;t++){var o=n[t];if(""==o)return e;var a=10;if(1<o.length&&"0"==o.charAt(0)&&(a=KE.test(o)?16:8,o=o.slice(8==a?1:2)),""===o)o=0;else{if(!(10==a?ME:8==a?LE:lt).test(o))return e;o=parseInt(o,a)}i.push(o)}for(t=0;t<r;t++)if(o=i[t],t==r-1){if(o>=jt(256,5-r))return null}else if(255<o)return null;for(e=i.pop(),t=0;t<i.length;t++)e+=i[t]*jt(256,3-t);return e},RE=function(e){var t,n,r=[0,0,0,0,0,0,0,0],i=0,o=null,a=0,s=function(){return e.charAt(a)};if(":"==s()){if(":"!=e.charAt(1))return;a+=2,o=++i}for(;s();){if(8==i)return;if(":"==s()){if(null!==o)return;a++,o=++i}else{for(t=n=0;4>n&&lt.test(s());)t=16*t+parseInt(s(),16),a++,n++;if("."==s()){if(0==n)return;if(a-=n,6<i)return;for(t=0;s();){if(n=null,0<t){if(!("."==s()&&4>t))return;a++}if(!Ul.test(s()))return;for(;Ul.test(s());){var u=parseInt(s(),10);if(null===n)n=u;else{if(0==n)return;n=10*n+u}if(255<n)return;a++}r[i]=256*r[i]+n,2!=++t&&4!=t||i++}if(4!=t)return;break}if(":"==s()){if(a++,!s())return}else if(s())return;r[i++]=t}}if(null!==o)for(s=i-o,i=7;0!=i&&0<s;)t=r[i],r[i--]=r[o+s-1],r[o+--s]=t;else if(8!=i)return;return r},Rg=function(e){var t,n;if("number"==typeof e){var r=[];for(t=0;4>t;t++)r.unshift(e%256),e=IE(e/256);return r.join(".")}if("object"==typeof e){r="",t=null;for(var i=1,o=null,a=0,s=0;8>s;s++)0!==e[s]?(a>i&&(t=o,i=a),o=null,a=0):(null===o&&(o=s),++a);for(a>i&&(t=o),i=t,t=0;8>t;t++)n&&0===e[t]||(n&&(n=!1),i===t?(r+=t?":":"::",n=!0):(r+=e[t].toString(16),7>t&&(r+=":")));return"["+r+"]"}return e},xi={},mt=zg({},xi,{" ":1,'"':1,"<":1,">":1,"`":1}),nt=zg({},mt,{"#":1,"?":1,"{":1,"}":1}),Wl=zg({},nt,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Pd=function(e,t){var n=kw(e,0);return 32<n&&127>n&&!ha(t,e)?e:encodeURIComponent(e)},yi={ftp:21,file:null,http:80,https:443,ws:80,wss:443},sb=function(e){return ha(yi,e.scheme)},Xl=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Sg=function(e,t){var n;return 2==e.length&&kt.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},ot=function(e){var t;return 1<e.length&&Sg(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},pt=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&Sg(t[0],!0)||t.pop()},Yl={},qt={},Zl={},rt={},st={},$l={},tt={},ut={},zi={},Ai={},am={},bm={},cm={},dm={},vt={},em={},Tg={},Vc={},wt={},we={},sd={},Wc=function(e,t,n,r){var i=n||Yl,o=0,a="",s=!1,u=!1,c=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(PE,"")),t=t.replace(QE,""),t=fe(t);o<=t.length;){var l=t[o];switch(i){case Yl:if(!l||!kt.test(l)){if(n)return"Invalid scheme";i=Zl;continue}a+=l.toLowerCase(),i=qt;break;case qt:if(l&&(JE.test(l)||"+"==l||"-"==l||"."==l))a+=l.toLowerCase();else{if(":"!=l){if(n)return"Invalid scheme";a="",i=Zl,o=0;continue}if(n&&(sb(e)!=ha(yi,a)||"file"==a&&(""!=e.username||""!=e.password||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=a,n)return void(sb(e)&&yi[e.scheme]==e.port&&(e.port=null));a="","file"==e.scheme?i=dm:sb(e)&&r&&r.scheme==e.scheme?i=rt:sb(e)?i=ut:"/"==t[o+1]?(i=st,o++):(e.cannotBeABaseURL=!0,e.path.push(""),i=wt)}break;case Zl:if(!r||r.cannotBeABaseURL&&"#"!=l)return"Invalid scheme";if(r.cannotBeABaseURL&&"#"==l){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,i=sd;break}i="file"==r.scheme?dm:$l;continue;case rt:if("/"!=l||"/"!=t[o+1]){i=$l;continue}i=zi,o++;break;case st:if("/"==l){i=Ai;break}i=Vc;continue;case $l:if(e.scheme=r.scheme,null==l)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==l||"\\"==l&&sb(e))i=tt;else if("?"==l)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",i=we;else{if("#"!=l){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),i=Vc;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",i=sd}break;case tt:if(!sb(e)||"/"!=l&&"\\"!=l){if("/"!=l){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,i=Vc;continue}i=Ai}else i=zi;break;case ut:if(i=zi,"/"!=l||"/"!=a.charAt(o+1))continue;o++;break;case zi:if("/"!=l&&"\\"!=l){i=Ai;continue}break;case Ai:if("@"==l){for(s&&(a="%40"+a),s=!0,a=fe(a),l=0;l<a.length;l++){var f=a[l];":"!=f||c?(f=Pd(f,Wl),c?e.password+=f:e.username+=f):c=!0}a=""}else if(null==l||"/"==l||"?"==l||"#"==l||"\\"==l&&sb(e)){if(s&&""==a)return"Invalid authority";o-=fe(a).length+1,a="",i=am}else a+=l;break;case am:case bm:if(n&&"file"==e.scheme){i=em;continue}if(":"!=l||u){if(null==l||"/"==l||"?"==l||"#"==l||"\\"==l&&sb(e)){if(sb(e)&&""==a)return"Invalid host";if(n&&""==a&&(""!=e.username||""!=e.password||null!==e.port))return;if(i=Vl(e,a))return i;if(a="",i=Tg,n)return;continue}"["==l?u=!0:"]"==l&&(u=!1),a+=l}else{if(""==a)return"Invalid host";if(i=Vl(e,a))return i;if(a="",i=cm,n==bm)return}break;case cm:if(!Ul.test(l)){if(null==l||"/"==l||"?"==l||"#"==l||"\\"==l&&sb(e)||n){if(""!=a){if(65535<(i=parseInt(a,10)))return"Invalid port";e.port=sb(e)&&i===yi[e.scheme]?null:i,a=""}if(n)return;i=Tg;continue}return"Invalid port"}a+=l;break;case dm:if(e.scheme="file","/"==l||"\\"==l)i=vt;else{if(!r||"file"!=r.scheme){i=Vc;continue}if(null==l)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==l)e.host=r.host,e.path=r.path.slice(),e.query="",i=we;else{if("#"!=l){ot(t.slice(o).join(""))||(e.host=r.host,e.path=r.path.slice(),pt(e)),i=Vc;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",i=sd}}break;case vt:if("/"==l||"\\"==l){i=em;break}r&&"file"==r.scheme&&!ot(t.slice(o).join(""))&&(Sg(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),i=Vc;continue;case em:if(null==l||"/"==l||"\\"==l||"?"==l||"#"==l){if(!n&&Sg(a))i=Vc;else{if(""==a){if(e.host="",n)return}else{if(i=Vl(e,a))return i;if("localhost"==e.host&&(e.host=""),n)return;a=""}i=Tg}continue}a+=l;break;case Tg:if(sb(e)){if(i=Vc,"/"!=l&&"\\"!=l)continue}else if(n||"?"!=l)if(n||"#"!=l){if(null!=l&&(i=Vc,"/"!=l))continue}else e.fragment="",i=sd;else e.query="",i=we;break;case Vc:if(null==l||"/"==l||"\\"==l&&sb(e)||!n&&("?"==l||"#"==l)){if(".."===(f=(f=a).toLowerCase())||"%2e."===f||".%2e"===f||"%2e%2e"===f?(pt(e),"/"==l||"\\"==l&&sb(e)||e.path.push("")):"."===a||"%2e"===a.toLowerCase()?"/"==l||"\\"==l&&sb(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Sg(a)&&(e.host&&(e.host=""),a=a.charAt(0)+":"),e.path.push(a)),a="","file"==e.scheme&&(null==l||"?"==l||"#"==l))for(;1<e.path.length&&""===e.path[0];)e.path.shift();"?"==l?(e.query="",i=we):"#"==l&&(e.fragment="",i=sd)}else a+=Pd(l,nt);break;case wt:"?"==l?(e.query="",i=we):"#"==l?(e.fragment="",i=sd):null!=l&&(e.path[0]+=Pd(l,xi));break;case we:n||"#"!=l?null!=l&&("'"==l&&sb(e)?e.query+="%27":e.query="#"==l?e.query+"%23":e.query+Pd(l,xi)):(e.fragment="",i=sd);break;case sd:null!=l&&(e.fragment+=Pd(l,mt))}o++}},Qd=function(e){var t=tc(this,Qd,"URL"),n=1<arguments.length?arguments[1]:void 0,r=String(e),i=HE(t,{type:"URL"});if(void 0!==n)if(n instanceof Qd)var o=$a(n);else if(n=Wc(o={},String(n)))throw TypeError(n);if(n=Wc(i,r,null,o))throw TypeError(n);var a=i.searchParams=new GE;(r=Yb(a)).updateSearchParams(i.query),r.updateURL=function(){i.query=String(a)||null},ta||(t.href=Bi.call(t),t.origin=xt.call(t),t.protocol=yt.call(t),t.username=zt.call(t),t.password=At.call(t),t.host=Bt.call(t),t.hostname=Ct.call(t),t.port=Dt.call(t),t.pathname=Et.call(t),t.search=Ft.call(t),t.searchParams=Gt.call(t),t.hash=Ht.call(t))},fm=Qd.prototype,Bi=function(){var e=$a(this),t=e.scheme,n=e.username,r=e.password,i=e.host,o=e.port,a=e.path,s=e.query,u=e.fragment,c=t+":";return null!==i?(c+="//",""==e.username&&""==e.password||(c+=n+(r?":"+r:"")+"@"),c+=Rg(i),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(c+="?"+s),null!==u&&(c+="#"+u),c},xt=function(){var e=$a(this),t=e.scheme,n=e.port;if("blob"==t)try{return new Qd(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&sb(e)?t+"://"+Rg(e.host)+(null!==n?":"+n:""):"null"},yt=function(){return $a(this).scheme+":"},zt=function(){return $a(this).username},At=function(){return $a(this).password},Bt=function(){var e=$a(this),t=e.host;return e=e.port,null===t?"":null===e?Rg(t):Rg(t)+":"+e},Ct=function(){var e=$a(this).host;return null===e?"":Rg(e)},Dt=function(){var e=$a(this).port;return null===e?"":String(e)},Et=function(){var e=$a(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Ft=function(){var e=$a(this).query;return e?"?"+e:""},Gt=function(){return $a(this).searchParams},Ht=function(){var e=$a(this).fragment;return e?"#"+e:""},mc=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(ta&&No(fm,{href:mc(Bi,(function(e){var t=$a(this);if(e=Wc(t,String(e)))throw TypeError(e);Yb(t.searchParams).updateSearchParams(t.query)})),origin:mc(xt),protocol:mc(yt,(function(e){var t=$a(this);Wc(t,String(e)+":",Yl)})),username:mc(zt,(function(e){var t=$a(this);if(e=fe(String(e)),!Xl(t)){t.username="";for(var n=0;n<e.length;n++)t.username+=Pd(e[n],Wl)}})),password:mc(At,(function(e){var t=$a(this);if(e=fe(String(e)),!Xl(t)){t.password="";for(var n=0;n<e.length;n++)t.password+=Pd(e[n],Wl)}})),host:mc(Bt,(function(e){var t=$a(this);t.cannotBeABaseURL||Wc(t,String(e),am)})),hostname:mc(Ct,(function(e){var t=$a(this);t.cannotBeABaseURL||Wc(t,String(e),bm)})),port:mc(Dt,(function(e){var t=$a(this);Xl(t)||(""==(e=String(e))?t.port=null:Wc(t,e,cm))})),pathname:mc(Et,(function(e){var t=$a(this);t.cannotBeABaseURL||(t.path=[],Wc(t,e+"",Tg))})),search:mc(Ft,(function(e){var t=$a(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Wc(t,e,we)),Yb(t.searchParams).updateSearchParams(t.query)})),searchParams:mc(Gt),hash:mc(Ht,(function(e){var t=$a(this);""==(e=String(e))?t.fragment=null:("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Wc(t,e,sd))}))}),Wa(fm,"toJSON",(function(){return Bi.call(this)}),{enumerable:!0}),Wa(fm,"toString",(function(){return Bi.call(this)}),{enumerable:!0}),Qg){var It=Qg.createObjectURL,Jt=Qg.revokeObjectURL;It&&Wa(Qd,"createObjectURL",(function(e){return It.apply(Qg,arguments)})),Jt&&Wa(Qd,"revokeObjectURL",(function(e){return Jt.apply(Qg,arguments)}))}sc(Qd,"URL"),ba({global:!0,forced:!Ql,sham:!ta},{URL:Qd});var TE=new Blob(["var fakeIdToId = {};onmessage = function (event) {\tvar data = event.data,\t\tname = data.name,\t\tfakeId = data.fakeId,\t\ttime;\tif(data.hasOwnProperty('time')) {\t\ttime = data.time;\t}\tswitch (name) {\t\tcase 'setInterval':\t\t\tfakeIdToId[fakeId] = setInterval(function () {\t\t\t\tpostMessage({fakeId: fakeId});\t\t\t}, time);\t\t\tbreak;\t\tcase 'clearInterval':\t\t\tif (fakeIdToId.hasOwnProperty (fakeId)) {\t\t\t\tclearInterval(fakeIdToId[fakeId]);\t\t\t\tdelete fakeIdToId[fakeId];\t\t\t}\t\t\tbreak;\t}}"]),UE=window.URL.createObjectURL(TE),We={},bg=0,uj=new Worker(UE);uj.onmessage=function(e){if(e=e.data.fakeId,We.hasOwnProperty(e)){var t=We[e];e=t.callback,t=t.parameters,e.apply(window,t)}};var VE=function(e){function t(){return ua(this,t),n.apply(this,arguments)}Ga(t,e);var n=Ha(t);return cb(t,[{key:"requestAsyncId",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return Gv(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;We.hasOwnProperty(t)&&(delete We[t],uj.postMessage({name:"clearInterval",fakeId:t}))}}]),t}(Zs),WE=new at(VE),XE=["group"],gm=F.inflate,Kt=F.deflate,Lt=function(e){function t(e,n,i,o){ua(this,t);var a=r.call(this,o,"Session");return x(z(a),"lastNoticeTicket",""),x(z(a),"chatManager",void 0),x(z(a),"usedChannelIds",[]),x(z(a),"msgDedupLru",new Sc(void 0,{maxlen:200})),x(z(a),"startTime",Date.now()),x(z(a),"seq",ma.fromNumber(1,!0)),x(z(a),"userJoinOptions",new Xs(!1)),x(z(a),"seqSentStatuses",[!1,!1]),x(z(a),"dialogueSequenceLru",new Sc(void 0,{maxlen:1e4})),x(z(a),"loggedOut",!1),x(z(a),"messageSentTimes",[]),x(z(a),"curLoginSockets",[void 0,void 0]),x(z(a),"loginSocketSubs",[{channels:new Map,receivers:[]},{channels:new Map,receivers:[]}]),x(z(a),"lastLoginSockets",[new Qe(1),new Qe(1)]),x(z(a),"dialPendingMsgSubjectMap",new Map),x(z(a),"context",void 0),x(z(a),"connection",void 0),x(z(a),"instanceId",void 0),x(z(a),"lastPingTime",void 0),x(z(a),"registerSocketsFailureListener",(function(){a.connection.once("socketsFailure",(function(){a.log("socketsFailure, creating a new connection"),wd((function(){return a.connection.removeAllListeners(),a.connection=new Us(a.context,a.logger,!0),a.loginHandler(15e3,!0)})).pipe(Oe((function(e){return e.pipe(Yd(ue.getParameter("RECONNECTING_AP_INTERVAL")))})),Gc(a.connection.apClient.apFinish$)).subscribe((function(){a.log("new connection connected")}))})),0===a.connection.listenerCount("tokenExpired")&&a.connection.on("tokenExpired",(function(){a.emit("tokenExpired")}))})),a.context=e,a.connection=n,a.instanceId=i,a.chatManager=new jE(o),a.lastPingTime=[0,0],a.setMaxListeners(512),a.log("The instanceId is %s",a.instanceId.toString()),a}Ga(t,e);var n,r=Ha(t);return cb(t,[{key:"loginHandler",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:12e3,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(this.loggedOut&&n)throw new aa("Already logged out, request ignored");n&&this.registerSocketsFailureListener(),this.connection.initConnection();var r=this.getSocketLoginObservables(this.connection.lastOpenSockets,this.seq),i=Date.now();return r.forEach((function(t,r){var o=e.loginSocketSubs[r].login;void 0!==o&&o.unsubscribe(),e.loginSocketSubs[r].login=t.pipe(sa((function(t){var o;e.curLoginSockets[r]=t;var a=Date.now();xb("Link",{ackedServerIp:t.address,destServerIp:t.ip,ec:0,sc:0,elapse:yb(e.startTime),lts:ma.fromNumber(a),responseTime:a-i,sid:rb(e.instanceId),userId:e.context.uid},null!==(o=e.context.config.enableCloudProxy)&&void 0!==o&&o),e.emit("userJoined",t.env),n&&e.connection.apClient.apFinish$.next(void 0)}))).subscribe(e.lastLoginSockets[r])})),this.initKeepAliveSender(),this.initKeepAliveReconnector(),this.initLoginReceiver(),Ec.apply(void 0,W(r).concat([Gb(this.connection,"connectionInitFailure").pipe(sa((function(e){if(Ma(e)||vb(e))throw e;throw new Ja("Login failure",{code:Ur,originalError:e})})))])).pipe(db(1),Hb(t),Ya((function(t){return t instanceof Pb&&e.warn("Client login timeout"),t&&t.code===qi&&(e.connection.emit("tokenExpired"),e.connection.apClient.apFinish$.next(void 0)),e.clearSockets(0,n),pa(t)})),sa((function(){n||e.registerSocketsFailureListener()})),ch((function(){n||e.connection.apClient.apFinish$.next(void 0)})))}},{key:"logoutHandler",value:(n=ja(M.mark((function e(){var t,n,r,i=this;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loggedOut=!0,this.connection.apClient.apFinish$.next(void 0),t=this.getLoginSockets(),n=t.map((function(e){return e.sendPacket("UserQuit",{}),i.connection.waitClosing(e)})),this.clearSockets(5e3),r=t.map((function(e){return e.env})),[0,1].filter((function(e){return!r.includes(e)})).forEach((function(e){i.connection.closeSocket(e,0)})),e.abrupt("return",Ec.apply(void 0,W(n)).toPromise());case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"requestChannelJoin",value:function(){var e=ja(M.mark((function e(t){var n,r,i,o=this;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.getLoginSockets().length){e.next=2;break}throw new aa("Client is not logged in. Cannot join the channel",Qr);case 2:return n=Gb(this,"channelLeft").pipe(Ob((function(e){return t===e})),db(1)),r=this.incGetSeq(),(i=this.lastLoginSockets.map((function(e){return e.pipe(Fc((function(e,n){0!==n&&o.incSeqIfNeeded(e.env);var i=0===n?r:o.seq;return e.sendPacket("GroupEnter",{account:t,seq:i}),e.fromReceived("GroupReply").pipe(Aa((function(e){return i.eq(e.seq)})),sa((function(e){if(0!==(e=e.code))throw new Ja(["Channel join failure. The response code is %d",e],Mr)})))})),Gc(n),Pe())}))).forEach((function(e,n){var r=function(){return o.loginSocketSubs[n].channels.delete(t)};o.loginSocketSubs[n].channels.set(t,e.subscribe({error:r,complete:r}))})),e.next=8,Ec.apply(void 0,W(i)).pipe(db(1),Hb(1e4),Ya((function(e){return e instanceof Pb&&o.warn("Channel join timeout"),pa(e)}))).toPromise();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestChannelLeave",value:function(e){this.getLoginSockets().forEach((function(t){t.sendPacket("GroupLeave",{account:e})}))}},{key:"requestUpdateEdgeTicket",value:function(e){var n=this,r=this.getLoginSockets();if(0===r.length)throw new aa("Client is not logged in. Cannot renew token",bs);var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserRenewTokenReq",{instance:n.instanceId,seq:i,account:n.context.uid,ticket:e})})),ab.apply(void 0,[t.genTimeoutError(Gl)].concat(W(r.map((function(e){return e.fromReceived("UserRenewTokenResp").pipe(Aa((function(e){var t=e.code;return i.eq(e.seq)&&0===t})))})))))}},{key:"requestChannelMemberList",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new aa("Client is not logged in. Cannot get the channel members",xB);var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("GroupAllUsersList",{group:e,pageNumber:0,pageSize:200,seq:r})})),ab.apply(void 0,[t.genTimeoutError(Kr)].concat(W(n.map((function(t){return t.fromReceived("GroupAllUsersResult").pipe(Aa((function(t){var n=t.seq;return t.group===e&&r.eq(n)})))})))))}},{key:"requestPeersOnlineStatus",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new aa("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("UserStatusList",{users:e,seq:r})})),ab.apply(void 0,[t.genTimeoutError(IB)].concat(W(n.map((function(e){return e.fromReceived("UserStatusResult").pipe(Aa((function(e){return r.eq(e.seq)})))})))))}},{key:"requestSetLocalUserAttributes",value:function(e,n){var r=this,i=this.getLoginSockets();if(0===i.length)throw new aa("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t,i){void 0!==n&&i!==n||t.sendPacket("UserAttributeSet",{account:r.context.uid,attributeInfos:Object.entries(e).map((function(e){return{key:(e=Xa(e,2))[0],value:e[1]}})),seq:o})})),ab.apply(void 0,W(i.map((function(e){return e.fromReceived("UserAttributeErr").pipe(Aa((function(e){return o.eq(e.seq)})),Da((function(e){throw new Ja(["The user attributes set failure, code %d",e.code],jc)})))}))).concat([t.genTimeoutError(kc)],W(i.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(Aa((function(e){return o.eq(e.seq)})))})))))}},{key:"requestSetChannelAttributes",value:function(e,n,r){var i=this.getLoginSockets();if(0===i.length)throw new aa("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t){t.sendPacket("GroupAttributeSet",{broadcast:r,group:e,attributeInfos:Object.entries(n).map((function(e){return{key:(e=Xa(e,2))[0],value:e[1]}})),seq:o})})),ab.apply(void 0,W(i.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(Aa((function(e){return o.eq(e.seq)})),Da((function(e){throw new Ja(["The group attributes set failure, code %d",e.code],jc)})))}))).concat([t.genTimeoutError(kc)],W(i.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(Aa((function(e){return o.eq(e.seq)})))})))))}},{key:"requestAddOrUpdateLocalUserAttributes",value:function(e){var n=this,r=this.getLoginSockets();if(0===r.length)throw new aa("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserAttributeMod",{account:n.context.uid,attributeInfos:Object.entries(e).map((function(e){return{key:(e=Xa(e,2))[0],value:e[1]}})),seq:i})})),ab.apply(void 0,W(r.map((function(e){return e.fromReceived("UserAttributeErr").pipe(Aa((function(e){return i.eq(e.seq)})),Da((function(e){throw new Ja(["The user attributes add or update failure, code %d",e.code],jc)})))}))).concat([t.genTimeoutError(kc)],W(r.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(Aa((function(e){return i.eq(e.seq)})))})))))}},{key:"requestAddOrUpdateChannelAttributes",value:function(e,n,r){var i=this.getLoginSockets();if(0===i.length)throw new aa("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t){t.sendPacket("GroupAttributeMod",{broadcast:r,group:e,attributeInfos:Object.entries(n).map((function(e){return{key:(e=Xa(e,2))[0],value:e[1]}})),seq:o})})),ab.apply(void 0,W(i.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(Aa((function(e){return o.eq(e.seq)})),Da((function(e){throw new Ja(["The group attributes add or update failure, code %d",e.code],jc)})))}))).concat([t.genTimeoutError(kc)],W(i.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(Aa((function(e){return o.eq(e.seq)})))})))))}},{key:"requestDeleteLocalUserAttributesByKeys",value:function(e){var n=this,r=this.getLoginSockets();if(0===r.length)throw new aa("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserAttributeDel",{account:n.context.uid,attributes:e,seq:i})})),ab.apply(void 0,W(r.map((function(e){return e.fromReceived("UserAttributeErr").pipe(Aa((function(e){return i.eq(e.seq)})),Da((function(e){throw new Ja(["The user attributes delete failure, code %d",e.code],jc)})))}))).concat([t.genTimeoutError(kc)],W(r.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(Aa((function(e){return i.eq(e.seq)})))})))))}},{key:"requestDeleteChannelAttributesByKeys",value:function(e,n,r){var i=this.getLoginSockets();if(0===i.length)throw new aa("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t){t.sendPacket("GroupAttributeDel",{group:e,broadcast:r,attributes:n,seq:o})})),ab.apply(void 0,W(i.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(Aa((function(e){return o.eq(e.seq)})),Da((function(e){throw new Ja(["The channel attributes delete failure, code %d",e.code],jc)})))}))).concat([t.genTimeoutError(kc)],W(i.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(Aa((function(e){return o.eq(e.seq)})))})))))}},{key:"requestClearLocalUserAttributes",value:function(){var e=this,n=this.getLoginSockets();if(0===n.length)throw new aa("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("UserAttributeSet",{account:e.context.uid,seq:r,attributeInfos:[]})})),ab.apply(void 0,W(n.map((function(e){return e.fromReceived("UserAttributeErr").pipe(Aa((function(e){return r.eq(e.seq)})),Da((function(e){throw new Ja(["The user attributes clear failure, code %d",e.code],jc)})))}))).concat([t.genTimeoutError(kc)],W(n.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(Aa((function(e){return r.eq(e.seq)})))})))))}},{key:"requestClearChannelAttributes",value:function(e,n){var r=this.getLoginSockets();if(0===r.length)throw new aa("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("GroupAttributeSet",{group:e,seq:i,attributeInfos:[],broadcast:n})})),ab.apply(void 0,W(r.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(Aa((function(e){return i.eq(e.seq)})),Da((function(e){throw new Ja(["The channel attributes clear failure, code %d",e.code],jc)})))}))).concat([t.genTimeoutError(kc)],W(r.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(Aa((function(e){return i.eq(e.seq)})))})))))}},{key:"requestGetUserAttributesByKeys",value:function(e,n){var r=this.getLoginSockets();if(0===r.length)throw new aa("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserAttributeGet",{account:e,seq:i,attributes:n})})),ab.apply(void 0,[t.genTimeoutError(kc)].concat(W(r.map((function(e){return e.fromReceived("UserAttributeErr").pipe(Aa((function(e){return i.eq(e.seq)})),Da((function(e){if(10008===(e=e.code))throw new Ja("The user requested is not online",Gr);throw new se(["User attribute operation unknown error code: %d",e],jc)})))}))),W(r.map((function(e){return e.fromReceived("UserAttributeRet").pipe(Aa((function(e){return i.eq(e.seq)})))})))))}},{key:"requestGetChannelAttributesByKeys",value:function(e,n){var r=this.getLoginSockets();if(0===r.length)throw new aa("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("GroupAttributeGet",{group:e,seq:i,attributes:n})})),ab.apply(void 0,[t.genTimeoutError(kc)].concat(W(r.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(Aa((function(e){return i.eq(e.seq)})),Da((function(e){throw new Ja(["The channel attributes get failure, code %d",e.code],jc)})))}))),W(r.map((function(e){return e.fromReceived("GroupAttributeRet").pipe(Aa((function(e){return i.eq(e.seq)})))})))))}},{key:"requestGetUserAttributeKeys",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new aa("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("UserAttributeKeysGet",{account:e,seq:r})})),ab.apply(void 0,[t.genTimeoutError(kc)].concat(W(n.map((function(e){return e.fromReceived("UserAttributeErr").pipe(Aa((function(e){return r.eq(e.seq)})),Da((function(e){if(10008===(e=e.code))throw new Ja("The user requested is not online",Gr);throw new se(["User attribute operation unknown error code: %d",e],jc)})))}))),W(n.map((function(e){return e.fromReceived("UserAttributeKeysRet").pipe(Aa((function(e){return r.eq(e.seq)})))})))))}},{key:"requestGetChannelAttributesKeys",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new aa("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("GroupAttributeKeysGet",{group:e,seq:r})})),ab.apply(void 0,[t.genTimeoutError(kc)].concat(W(n.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(Aa((function(e){return r.eq(e.seq)})),Da((function(e){throw new se(["Channel attribute operation unknown error code: %d",e.code],jc)})))}))),W(n.map((function(e){return e.fromReceived("GroupAttributeKeysRet").pipe(Aa((function(e){return r.eq(e.seq)})))})))))}},{key:"requestGetChannelMemberCount",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new aa("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("GroupStatusList",{groups:e,seq:r})})),ab.apply(void 0,[t.genTimeoutError(Kr)].concat(W(n.map((function(e){return e.fromReceived("GroupStatusResult").pipe(Aa((function(e){return r.eq(e.seq)})))})))))}},{key:"requestSubscribePeersOnlineStatus",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new aa("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("SubscribeUserStatus",{seq:r,users:e})})),ab.apply(void 0,[t.genTimeoutError(NB)].concat(W(n.map((function(e){return e.fromReceived("SubscribeResponse").pipe(Aa((function(e){return r.eq(e.seq)})))})))))}},{key:"requestUnsubscribePeersOnlineStatus",value:function(e){var t=this.getLoginSockets();if(0===t.length)throw new aa("Client is not logged in");var n=this.incGetSeq();t.forEach((function(t){t.sendPacket("UnsubscribeUserStatus",{seq:n,users:e})}))}},{key:"sendInvitationMessage",value:function(){var e=ja(M.mark((function e(t){var n,r,i,o,a,s,u,c,l,f,h,p,d=this;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.peerId,r=t.callId,i=t.extra,o=t.isAcceptAck,a=t.channelId,s=t.type,u={callId:r},void 0===o){e.next=6;break}if("CallAccept"===s){e.next=5;break}throw Error("invalid invitation type");case 5:u.type=o?"ack":"request";case 6:return u.channel=a,("CallInvite"===s||"CallCancel"===s||"CallReject"===s||"CallAccept"===s&&!1===o)&&void 0!==i&&(u.extra=i),c=hh(),this.log("The sent invitation body is %o",u),l=function(e){return{MiscMap:{},sequence:ma.fromNumber(1),dialogue:c,instance:d.instanceId,dst:n,ms:ma.fromNumber(Date.now(),!0),options:new Cf({IterationNumber:e,MessageType:s}).toLong(),payload:(new TextEncoder).encode(JSON.stringify(u)),src:d.context.uid}},e.next=14,Dc(this.sendMessageToRetry(l,!0)).pipe(Hb(1e4),Ya((function(e){return e instanceof Pb&&d.warn("Send invitation timeout"),pa(e)}))).toPromise();case 14:return f=e.sent,h=f.code,p=f.retryTimes,e.abrupt("return",{hasPeerReceived:0===h,hasReSent:0!==p});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendRawMessage",value:function(){var e=ja(M.mark((function e(t,n,r,i,o){var a,s,u,c,l,f,h,p,d=this;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sa(r)&&t instanceof Uint8Array&&"string"==typeof n){e.next=2;break}throw new Z("The send message arguments are not valid",i?$r:ni);case 2:if(!(32768<t.byteLength+new Blob([n]).size)){e.next=4;break}throw new dc("The message size is over the 32KB limit",i?Xf:Cl);case 4:return a=!ue.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=t.byteLength,s=this.chatManager.getChatInfo(r),u=s.dialogue,c=s.sequence,l=this.instanceId,this.log('A%s %s raw message is sending to %s: "'.concat(l,"-").concat(u,"#").concat(c,'"'),a?" compressed":"",i?"peer":"channel",Ka(r)),f=function(e){return{MiscMap:{description:(new TextEncoder).encode(n)},sequence:c,dialogue:u,instance:l,dst:r,ms:ma.fromNumber(Date.now(),!0),options:new Cf({IterationNumber:e,CompressionMethod:a?"Zlib":"Uncompressed",MessageType:i?"PeerRawMessage":"ChannelRawMessage",ToCache:!1,ToArchive:!1}).toLong(),payload:a?Kt(t):t,src:d.context.uid}},e.next=11,Dc(this.sendMessageToRetry(f,!0)).pipe(Hb(void 0===o?1e4:o),Ya((function(e){return e instanceof Pb&&d.warn("Send message timeout"),pa(e)}))).toPromise();case 11:return h=e.sent,p=h.code,e.abrupt("return",{hasPeerReceived:0===p});case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}()},{key:"sendTextMessage",value:function(){var e=ja(M.mark((function e(t,n,r,i){var o,a,s,u,c,l,f,h,p,d=this;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sa(n)){e.next=2;break}throw new Z("The send message arguments are not valid",r?$r:ni);case 2:if(!(32768<new Blob([t]).size)){e.next=4;break}throw new dc("The message size is over the 32KB limit",r?Xf:Cl);case 4:return o=!ue.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=new Blob([t]).size,a=this.chatManager.getChatInfo(n),s=a.dialogue,u=a.sequence,c=this.instanceId,this.log('A%s %s message is sending to %s: "'.concat(c,"-").concat(s,"#").concat(u,'"'),o?" compressed":"",r?"peer":"channel",Ka(n)),l=(new TextEncoder).encode(t),f=function(e){return{MiscMap:{},sequence:u,dialogue:s,instance:c,dst:n,ms:ma.fromNumber(Date.now(),!0),options:new Cf({IterationNumber:e,CompressionMethod:o?"Zlib":"Uncompressed",MessageType:r?"PeerTextMessage":"ChannelTextMessage",ToCache:!1,ToArchive:!1}).toLong(),payload:o?Kt(l):l,src:d.context.uid}},e.next=12,Dc(this.sendMessageToRetry(f,!0)).pipe(Hb(void 0===i?1e4:i),Ya((function(e){return e instanceof Pb&&d.warn("Send message timeout"),pa(e)}))).toPromise();case 12:return h=e.sent,p=h.code,e.abrupt("return",{hasPeerReceived:0===p});case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"cleanLoginSubs",value:function(e,t){Object.entries(this.loginSocketSubs[e]).forEach((function(e){var n=(e=Xa(e,2))[1];"channels"===e[0]&&t||(Array.isArray(n)||n instanceof Map?n.forEach((function(e){return e.unsubscribe()})):n&&n.unsubscribe())})),this.loginSocketSubs[e]={channels:t?this.loginSocketSubs[e].channels:new Map,receivers:[]}}},{key:"sendMessageToRetry",value:function(){var e=ja(M.mark((function e(t,n){var r,i,o,a,s,u,c,l,f,h=this,p=arguments;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<p.length&&void 0!==p[2]?p[2]:0,this.log("Attempt to send the message ".concat(n?" with retrying, %o":"without retrying"),{retryTimes:r}),0!==(i=this.getLoginSockets()).length){e.next=5;break}throw Error("no logged-in sockets");case 5:return o=t(r),i.forEach((function(e){e.sendPacket("Message",o)})),a=o.dialogue,s=o.sequence,u=o.instance,c=i.map((function(e){return e.fromReceived("Ack").pipe(Ob((function(e){return a.eq(e.dialogue)&&s.eq(e.sequence)&&u.eq(e.instance)})))})),e.prev=9,e.next=12,Ec.apply(void 0,W(c)).pipe(Hb(6e3),Ya((function(e){return vb(e)&&h.warn("Message send timeout, retry times %d",r),pa(e)})),db(1)).toPromise();case 12:return l=e.sent,f=l.code,this.log("The message has been acked, %o",{code:f}),e.abrupt("return",{code:f,retryTimes:r});case 18:if(e.prev=18,e.t0=e.catch(9),!(e.t0 instanceof Pb&&n)){e.next=22;break}return e.abrupt("return",this.sendMessageToRetry(t,!1,r+1));case 22:throw e.t0;case 23:case"end":return e.stop()}}),e,this,[[9,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"initKeepAliveSender",value:function(){var e=this;this.lastLoginSockets.map((function(t){return t.pipe(Fc((function(t){return Zc(0,2500,Ae()?void 0:WE).pipe(sa((function(){e.sendPing(t)})))})))})).forEach((function(t,n){var r=e.loginSocketSubs[n].keepAlive;void 0!==r&&r.unsubscribe(),e.loginSocketSubs[n].keepAlive=t.subscribe({error:function(){}})}))}},{key:"initKeepAliveReconnector",value:function(){var e=this;this.lastLoginSockets.map((function(e){return e.pipe(Fc((function(e){var t,n=!1,r=e.userJoin$.pipe(sa((function(){n=!0}))),i=e.input$.pipe(sa((function(e){"Ping"!==rj[e.uri].slice(0,-3)&&(n=!1)})));return Ec(Zc(6e3,1e4).pipe(ov(e.receivedPacket),sa((function(r){r=Xa(r,2),r=Xa(r[1],2)[1],t!==r||n||e.forceReconnect(),t=r}))),r,i)})))})).forEach((function(t,n){var r=e.loginSocketSubs[n].keepAliveReconnector;void 0!==r&&r.unsubscribe(),e.loginSocketSubs[n].keepAliveReconnector=t.subscribe({error:function(){}})}))}},{key:"initLoginReceiver",value:function(){var e=this;ab.apply(void 0,W(this.lastLoginSockets.map((function(t){return t.pipe(Fc((function(t){return t.fromReceived("UserTicketNearlyExpire").pipe(iv(5e3),sa(e.onUserTicketNearlyExpire(t)))})))})))).subscribe(),this.lastLoginSockets.map((function(t){return t.pipe(Fc((function(t){return Ec(Gb(t,"reconnect").pipe(sa(e.onSocketReconnect(t))),t.fromReceived("Message").pipe(sa(e.onMessage(t))),t.fromReceived("GroupEnterNotice").pipe(sa(e.onGroupEnterNotice())),t.fromReceived("GroupLeaveNotice").pipe(sa(e.onGroupLeaveNotice())),t.fromReceived("GroupCountNotice").pipe(sa(e.onGroupCountNotice())),t.fromReceived("GroupAttributeAlt").pipe(sa(e.onGroupAttributeAlt())),t.fromReceived("UserJoinNotice").pipe(sa(e.onUserNotice(qa.PeerOnlineState.ONLINE))),t.fromReceived("UserQuitNotice").pipe(sa(e.onUserNotice(qa.PeerOnlineState.OFFLINE))),t.fromReceived("UserWaitNotice").pipe(sa(e.onUserNotice(qa.PeerOnlineState.UNREACHABLE))),t.fromReceived("Pong").pipe(sa(e.onPong())),t.fromReceived("UserDrop").pipe(sa(e.onUserDrop(t)))).pipe(Sf(void 0))})))})).forEach((function(t,n){e.loginSocketSubs[n].receivers.push(t.subscribe({error:function(){}}))}))}},{key:"requestSocketLogin",value:function(e,t,n){var r=this;return hn(wd((function(){r.userJoinOptions=new Xs(t),e.sendPacket("UserJoin",{account:r.context.uid,instance:r.instanceId,opt:r.userJoinOptions.toLong(),seq:n,ticket:e.ticket})})),e.fromReceived("UserResp").pipe(Aa((function(e){return n.eq(e.seq)})),sa((function(t){if(0!==(t=t.code))throw r.clearSockets(),r.logError("Connected to gateway success but the Rtm server rejected login"),new Ja(["Login failure. The response code from the RTM service is %d",t],Ng);e.attemptsSinceLastError=0,e.loggedIn=!0,r.log("ENV_%d logged in",e.env)})),Sf(e),Hb(6e3))).pipe(Ob((function(e){return void 0!==e})),Ya((function(n){return n instanceof Pb&&r.warn("Login response timeout, rejoin: %s",t),r.clearSockets(),n.name="loginRespTimeout",r.emit("banEdgeIP",e.ip),pa(n)})))}},{key:"getSocketLoginObservables",value:function(e,t){var n=this;return e.map((function(e){return e.pipe(Fc((function(e,r){return n.incSeqIfNeeded(e.env),n.requestSocketLogin(e,0!==r,0===r?t:n.seq)})),Pe())}))}},{key:"incSeqIfNeeded",value:function(e){if(![0,1].includes(e))throw new ib({INVALID_ENV:"The env argument is not 0 or 1"});this.seqSentStatuses[e]&&(this.seq=this.seq.add(1),this.seqSentStatuses=[!1,!1]),this.seqSentStatuses[e]=!0}},{key:"incGetSeq",value:function(){return this.seq=this.seq.add(1),this.seqSentStatuses=[!0,!0],this.seq}},{key:"getLoginSockets",value:function(){for(var e=this.curLoginSockets,t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i}},{key:"emitMessage",value:function(e,n){var r,i=e.options,o=e.payload,a=e.src,s=e.dst,u=e.instance,c=e.dialogue,l=e.sequence,f=e.ms,h=e.MiscMap;this.dialogueSequenceLru.set(c.toString(),l),u="".concat(u,"-").concat(c,"#").concat(l),this.msgDedupLru.has(u)?this.warn("Env_%d: Messages out-of-order or not start with 1: %s",n,u):(this.msgDedupLru.set(u,void 0),i=new Cf(i),this.lastLoginSockets.forEach((r=ja(M.mark((function n(r){var i;return M.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.pipe(db(1)).toPromise();case 2:i=n.sent,t.sendMessageAck(e,i);case 4:case"end":return n.stop()}}),n)}))),function(e){return r.apply(this,arguments)})),n=i.isZlibCompressed(),i.isInvitation()?(s=Yf(n?gm(Sn(o,Uint8Array.of(0,0,0,0))):o),s=JSON.parse(s),this.log("The received invitation body is %o",s),this.emit("invitationMessage",{body:s,type:i.getInvitationType(),peerId:a,serverReceivedTs:f.toNumber()})):i.isTextMessage()?(h=i.isPeerTextMessage(),o=Yf(n?gm(Sn(o,Uint8Array.of(0,0,0,0))):o),this.info("Received a %s %s text message from %s to %s, %s",n?" compressed":"",h?"peer":"channel",Ka(a),Ka(s),u),h?(a={text:o,peerId:a,properties:{serverReceivedTs:f.toNumber()}},this.emit("peerTextMessage",a)):this.emit("channelTextMessage",{channelId:s,memberId:a,text:o,properties:{serverReceivedTs:f.toNumber()}})):i.isRawMessage()&&(i=i.isRawPeerMessage(),h=void 0===(h=h.description)?"":Yf(h),o=n?gm(o):o,this.info("Received a %s %s raw message from %s to %s, %s",n?" compressed":"",i?"peer":"channel",Ka(a),Ka(s),u),i?(a={desc:h,raw:o,peerId:a,properties:{serverReceivedTs:f.toNumber()}},this.emit("peerRawMessage",a)):this.emit("channelRawMessage",{desc:h,raw:o,channelId:s,memberId:a,properties:{serverReceivedTs:f.toNumber()}})))}},{key:"onSocketReconnect",value:function(e){var t=this;return function(){var n=[0,1].filter((function(t){return t!==e.env}))[0];(n=t.connection.curOpenSockets[n])&&!n.loggedIn&&t.emit("connectionLost")}}},{key:"onUserTicketNearlyExpire",value:function(e){var t=this;return function(n){(n=n.ticket)!==t.lastNoticeTicket&&n===e.ticket?(t.lastNoticeTicket=n,t.emit("TokenPrivilegeWillExpire")):t.requestUpdateEdgeTicket(e.ticket).toPromise()}}},{key:"onUserDrop",value:function(e){var t=this;return function(n){var r;n=n.code,xb("KickedOff",{code:0,elapse:yb(t.startTime),linkId:parseInt(e.name.split("-")[1],10),lts:ma.fromNumber(Date.now()),server:e.address,serverCode:n,sid:rb(t.instanceId),userId:t.context.uid},null!==(r=t.context.config.enableCloudProxy)&&void 0!==r&&r),10006===n||10001===n?t.warn("Login too often and kicked off, reconnect and login"):10009===n?(t.warn("The instance ID conflicts, reconnecting"),t.instanceId=hh(),t.context.sid=rb(t.instanceId),t.emit("instanceChanged",t.instanceId)):[2,11,14,15,16].includes(n)&&(t.emit("userDrop",n),t.clearSockets())}}},{key:"clearSockets",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];[0,1].forEach((function(r){e.cleanLoginSubs(r,n),e.connection.closeSocket(r,t)}))}},{key:"onMessage",value:function(e){var t=this;return function(n){var r=n.dialogue,i=n.instance,o=n.sequence,a=n.options;if(n.src===t.context.uid)t.log("The message is from the local account, ignored");else{var s=r.toString(),u=t.dialPendingMsgSubjectMap.get(s);if(r="".concat(i,"-").concat(r,"#").concat(o),u)u.next(n),t.log("Env_%d: The dialogue has pending messages, next: %s",e.env,r);else{var c=t.dialogueSequenceLru.get(s);if(u=!c&&o.eq(1),i=void 0!==c&&o.sub(c).eq(1),u||i)t.emitMessage(n,e.env);else{if(c){if(o.lte(c))return;t.log("Env_%d: The message pended, the sequence is not continuous with the last: %s",e.env,r)}else t.log("Env_%d: The message pended, the first sequence is not equal to 1: %s",e.env,r);o=new nb,t.dialPendingMsgSubjectMap.set(s,o);var l=o.pipe(su(tl),dh((function(e,t){return[].concat(W(e),[t])}),[]),Da((function(e){return W(e).sort((function(e,t){return e=e.sequence,t=t.sequence,e.eq(t)?0:e.gt(t)?1:-1}))})),qn(1));a=!(a=new Cf(a)).isFromCache()&&!a.isBufferedMessage(),l.pipe(Gc(Zc(a?750:1500)),Aa((function(e){if(2>e.length)return!1;for(var t=void 0===c?ma.fromNumber(1,!0):c.add(1),n=0;n<e.length;t=t.add(1),n++)if(!e[n].sequence.eq(t))return!1;return!0})),ch((function(){t.dialPendingMsgSubjectMap.delete(s)}))).subscribe((function(n){n.forEach((function(n){t.emitMessage(n,e.env),t.log("Env_%d: The message queue has fully ordered, emitting: %s",e.env,"".concat(n.instance,"-").concat(n.dialogue,"#").concat(n.sequence))}))}),(function(n){n instanceof bh&&l.pipe(db(1)).subscribe((function(n){return n.forEach((function(n){t.log("Env_%d: The message pending queue expired, emitting: %s",e.env,"".concat(n.instance,"-").concat(n.dialogue,"#").concat(n.sequence)),t.emitMessage(n,e.env)}))}))})),o.next(n)}}}}}},{key:"onPong",value:function(){var e=this;return function(){document.hidden&&e.getLoginSockets().forEach((function(t){e.sendPing(t)}))}}},{key:"onGroupEnterNotice",value:function(){var e=this;return function(t){e.emit("memberNotice",{channelId:t.group,seq:t.seq,instance:t.instance,memberId:t.user,type:"MemberJoined",size:t.size})}}},{key:"onGroupLeaveNotice",value:function(){var e=this;return function(t){e.emit("memberNotice",{channelId:t.group,seq:t.seq,instance:t.instance,memberId:t.user,type:"MemberLeft",size:t.size})}}},{key:"onGroupCountNotice",value:function(){var e=this;return function(t){e.emit("memberNotice",{channelId:t.group,seq:t.seq,instance:t.instance,type:"MemberCountUpdated",size:t.size})}}},{key:"onGroupAttributeAlt",value:function(){var e=this;return function(t){var n=t.group;t=Ei(t,XE),e.emit("channelAttributesUpdated",jb({channelId:n},t))}}},{key:"onUserNotice",value:function(e){var t=this;return function(n){t.emit("peerOnlineStatusChanged",{peerId:n.user,instance:n.instance,seq:n.seq,state:e})}}},{key:"sendPing",value:function(e){2500>=Date.now()-this.lastPingTime[e.env]||(this.incSeqIfNeeded(e.env),e.sendPacket("Ping",{ms:ma.fromNumber(Date.now(),!0),seq:this.seq}),this.lastPingTime[e.env]=Date.now())}}],[{key:"sendMessageAck",value:function(e,t){var n=new Cf(e.options);(n.isInvitation()||n.isPeerMessage())&&t.sendPacket("Ack",{code:0,dialogue:e.dialogue,instance:e.instance,sequence:e.sequence})}}]),t}(Ac());x(Lt,"genTimeoutError",(function(e,t){return wb(void 0).pipe(Yd(void 0===t?1e4:t),Da((function(){throw new Qb(["Request timed out after %ds",(void 0===t?1e4:t)/1e3],e)})))}));var Mt,hm,im=0,jm=0;Lg.v1=function(e,t,n){n=t&&n||0;var r=t||[],i=(e=e||{}).node||Mt,o=void 0!==e.clockseq?e.clockseq:hm;if(null==i||null==o){var a=Er();null==i&&(i=Mt=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==o&&(o=hm=16383&(a[6]<<8|a[7]))}a=void 0!==e.msecs?e.msecs:(new Date).getTime();var s=void 0!==e.nsecs?e.nsecs:jm+1,u=a-im+(s-jm)/1e4;if(0>u&&void 0===e.clockseq&&(o=o+1&16383),(0>u||a>im)&&void 0===e.nsecs&&(s=0),1e4<=s)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");for(im=a,jm=s,hm=o,e=(1e4*(268435455&(a+=122192928e5))+s)%4294967296,r[n++]=e>>>24&255,r[n++]=e>>>16&255,r[n++]=e>>>8&255,r[n++]=255&e,e=a/4294967296*1e4&268435455,r[n++]=e>>>8&255,r[n++]=255&e,r[n++]=e>>>24&15|16,r[n++]=e>>>16&255,r[n++]=o>>>8|128,r[n++]=255&o,o=0;6>o;++o)r[n+o]=i[o];return t||Fr(r)},Lg.v4=Lg;var km=ui(),Rd,Ff=qa.LocalInvitationFailureReason,Ra=qa.LocalInvitationState,YE=(Rd=function(e){function t(e,r,i){ua(this,t);var o=n.call(this,i,"RtmLocalInvitation",!0);return x(z(o),"state",Ra.IDLE),x(z(o),"localInvitationEnd$",ab(Gb(z(o),"LocalInvitationAccepted"),Gb(z(o),"LocalInvitationRefused"),Gb(z(o),"LocalInvitationFailure"),Gb(z(o),"LocalInvitationCanceled")).pipe(db(1))),x(z(o),"callId",Lg.v4()),x(z(o),"_content",""),x(z(o),"_channelId",""),x(z(o),"_response",""),x(z(o),"calleeId",void 0),x(z(o),"logger",void 0),x(z(o),"getSession",void 0),o.calleeId=e,o.getSession=r,o.logger=i,o}Ga(t,e);var n=Ha(t);return cb(t,[{key:"channelId",get:function(){return this._channelId},set:function(e){this.state!==Ra.IDLE?this.info("set channelId only allow before invitation sent to remote"):(this.log("set channelId for %s",this.callId),this._channelId=e)}},{key:"content",get:function(){return this._content},set:function(e){this.log("set content for %s",this.callId),this._content=e}},{key:"response",get:function(){return this._response},set:function(e){throw new Z('Cannot set the "response" of the LocalInvitation instance.',Tc)}},{key:"send",value:function(){var e,t=this;if(this.state===Ra.SENT_TO_REMOTE||this.state===Ra.RECEIVED_BY_REMOTE)throw new aa("The local invitation send failure. The call invitation has already been sent.",BB);if(this.isLocalInvitationEnd())throw new aa("The local invitation send failure. The call invitation has ended.",oi);if(0<this._channelId.length&&!Sa(this._channelId))throw new Z("Illegal invitation channel ID",Tc);if(!Sa(this.calleeId))throw new Z("Illegal invitation callee user ID",Tc);if(8192<mh(this._content))throw new Z('The length of the "content" overflows. The number of bytes representing content must not exceed 8 Ã 1024 if encoded in UTF-8.',Tc);this.state=Ra.SENT_TO_REMOTE,wd(ja(M.mark((function n(){var r,i,o;return M.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getSession().sendInvitationMessage({peerId:t.calleeId,callId:t.callId,extra:t._content,type:"CallInvite",channelId:t._channelId});case 2:if(r=n.sent,i=r.hasPeerReceived,o=r.hasReSent,!t.isLocalInvitationEnd()){n.next=7;break}throw new Qb("send invitation timeout");case 7:if(t.log("The local invitation has sent to the callee"),i||o){n.next=11;break}throw e=new km({PEER_NOT_ONLINE:"The peer of the invitation is not online"});case 11:if(i){n.next=14;break}throw e=new km({RESENT_AND_OFFLINE:"Resent and the peer of the invitation is not online"});case 14:case"end":return n.stop()}}),n)})))).pipe(Oe((function(e){return e.pipe(sa((function(e){if(!(e instanceof km))throw e})),Yd(2e3))})),Hb(3e4),Ya((function(e){return vb(e)&&t.warn("local invitation ack timed out"),pa(e)})),Gc(this.localInvitationEnd$)).subscribe({next:function(){t.state===Ra.RECEIVED_BY_REMOTE?t.log('The local invitation state is already "RECEIVED_BY_REMOTE", skipped emitting "LocalInvitationReceivedByPeer"'):t.state!==Ra.SENT_TO_REMOTE?t.log("The invitation has ended, skipped emitting the %s event","LocalInvitationReceivedByPeer"):(t.info("The peer received the local invitation %s.",t.callId),t.state=Ra.RECEIVED_BY_REMOTE,t.emit("LocalInvitationReceivedByPeer"),t.localInvitationEnd$.pipe(Hb(6e4),Ya((function(e){return vb(e)&&t.warn("local invitation expired"),pa(e)}))).subscribe({error:function(){t.state=Ra.FAILURE,t.emit("LocalInvitationFailure",Ff.INVITATION_EXPIRE)}}))},error:function(n){t.isLocalInvitationEnd()?t.log("The invitation has ended, skipped emitting the %s event","LocalInvitationFailure"):(t.state=Ra.FAILURE,vb(n)&&e?"PEER_NOT_ONLINE"===e.code?t.emit("LocalInvitationFailure",Ff.PEER_OFFLINE):"RESENT_AND_OFFLINE"===e.code&&t.emit("LocalInvitationFailure",Ff.PEER_NO_RESPONSE):vb(n)?t.emit("LocalInvitationFailure",Ff.PEER_NO_RESPONSE):"RtmInvalidStatusError"===n.name?t.emit("LocalInvitationFailure",Ff.NOT_LOGGEDIN):t.emit("LocalInvitationFailure",Ff.UNKNOWN))}})}},{key:"cancel",value:function(){if(this.isLocalInvitationEnd())throw new aa("The local invitation cancel failure",oi);if(this.state===Ra.IDLE)throw new aa("The local invitation has not been sent",AB);if(8192<mh(this._content))throw new Z('The length of the "content" overflows. The number of bytes representing content must not exceed 8 Ã 1024 if encoded in UTF-8.',Tc);this.getSession().sendInvitationMessage({callId:this.callId,peerId:this.calleeId,type:"CallCancel",channelId:this._channelId,extra:this._content}),this.state=Ra.CANCELED,this.emit("LocalInvitationCanceled")}},{key:"onAcceptReceived",value:function(e){if(this.isLocalInvitationEnd()&&this.state!==Ra.ACCEPTED_BY_REMOTE)this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationAccepted");else{if(this.state===Ra.IDLE)throw new aa("the local have not sent the invitation, how can remote accept it?");this.getSession().sendInvitationMessage({callId:this.callId,isAcceptAck:!0,type:"CallAccept",peerId:this.calleeId,channelId:this.channelId}),this.state===Ra.ACCEPTED_BY_REMOTE?this.log("already in ACCEPTED_BY_REMOTE state, ignore emit ACCEPTED_BY_REMOTE"):(this.state===Ra.SENT_TO_REMOTE&&(this.log("receive LocalInvitationAccepted before remote response to the invitation"),this.state=Ra.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this.state=Ra.ACCEPTED_BY_REMOTE,this._response=e,this.emit("LocalInvitationAccepted",e))}}},{key:"onRefuseReceived",value:function(e){if(this.isLocalInvitationEnd())this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationRefused");else{if(this.state===Ra.IDLE)throw new aa("the local have not sent the invitation, how can remote refuse it?");this.state===Ra.SENT_TO_REMOTE&&(this.log("receive LocalInvitationRefused before remote response to the invitation"),this.state=Ra.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this._response=e,this.state=Ra.REFUSED_BY_REMOTE,this.emit("LocalInvitationRefused",e)}}},{key:"isLocalInvitationEnd",value:function(){return[Ra.CANCELED,Ra.FAILURE,Ra.ACCEPTED_BY_REMOTE,Ra.REFUSED_BY_REMOTE].includes(this.state)}}]),t}(Ac()),Ca(Rd.prototype,"send",[Ic],Object.getOwnPropertyDescriptor(Rd.prototype,"send"),Rd.prototype),Ca(Rd.prototype,"cancel",[Ic],Object.getOwnPropertyDescriptor(Rd.prototype,"cancel"),Rd.prototype),Rd),Ci=qa.RemoteInvitationFailureReason,Cb=qa.RemoteInvitationState,ZE=function(e){function t(e){var r=e.invitationChannel,i=e.extraContent,o=e.callId,a=e.callerId,s=e.logger;e=e.getSession,ua(this,t);var u=n.call(this,s,"RtmRemoteInvitation",!0);return x(z(u),"state",Cb.INVITATION_RECEIVED),x(z(u),"remoteInvitationEnd$",ab(Gb(z(u),"RemoteInvitationCanceled"),Gb(z(u),"RemoteInvitationRefused"),Gb(z(u),"RemoteInvitationAccepted"),Gb(z(u),"RemoteInvitationFailure")).pipe(db(1))),x(z(u),"callerId",void 0),x(z(u),"callId",void 0),x(z(u),"_getSession",void 0),x(z(u),"logger",void 0),x(z(u),"_content",void 0),x(z(u),"_channelId",void 0),x(z(u),"_response",""),u._channelId=r,u._content=i,u.callId=o,u.callerId=a,u._getSession=e,u.logger=s,u.remoteInvitationEnd$.pipe(Hb(6e4),Ya((function(e){return vb(e)&&u.warn("Remote invitation expired"),pa(e)}))).subscribe({error:function(){u.state=Cb.FAILURE,u.emit("RemoteInvitationFailure",Ci.INVITATION_EXPIRE)}}),u}Ga(t,e);var n=Ha(t);return cb(t,[{key:"channelId",get:function(){return this._channelId},set:function(e){throw new Z('Cannot set the "response" of the RemoteInvitation instance.',Tc)}},{key:"content",get:function(){return this._content},set:function(e){throw new Z('Cannot set the "content" of the RemoteInvitation instance.',Tc)}},{key:"response",get:function(){return this._response},set:function(e){this._response=e}},{key:"accept",value:function(){var e,t=this;if(this.isRemoteInvitationEnd())throw new aa("The local invitation has ended. Cannot accept.",oi);if(this.state===Cb.ACCEPT_SENT_TO_LOCAL)throw new aa("The remote invitation is accepting. Cannot do the operation.",Lr);if(8192<mh(this._response))throw new Z('The length of the "response" overflows. The number of bytes representing content must not exceed 8 Ã 1024 if encoded in UTF-8.',Tc);this.state=Cb.ACCEPT_SENT_TO_LOCAL,Ec(ln(1e3).pipe(Ab((function(){return wd(ja(M.mark((function e(){return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._getSession().sendInvitationMessage({peerId:t.callerId,callId:t.callId,extra:t.response,type:"CallAccept",isAcceptAck:!1,channelId:t.channelId}));case 1:case"end":return e.stop()}}),e)}))))})),Ob((function(t){return e=t.hasPeerReceived})),db(1)),Gb(this,"RemoteInvitationAccepted")).pipe(Hb(5e3),Gc(this.remoteInvitationEnd$)).subscribe({error:function(n){if(t.logError(n),t.state=Cb.FAILURE,vb(n))switch(e){case void 0:case!0:return void t.emit("RemoteInvitationFailure",Ci.ACCEPT_FAILURE);case!1:return void t.emit("RemoteInvitationFailure",Ci.PEER_OFFLINE)}t.emit("RemoteInvitationFailure",Ci.UNKNOWN)}})}},{key:"refuse",value:function(){if(this.state===Cb.ACCEPT_SENT_TO_LOCAL)throw new aa("The remote invitation is accepting. Cannot do the operation.",Lr);if(this.isRemoteInvitationEnd())throw new aa("The invitation is end. Cannot refuse",oi);if(8192<mh(this._response))throw new Z('The length of the "response" overflows. The number of bytes representing content must not exceed 8 Ã 1024 if encoded in UTF-8.',Tc);this._getSession().sendInvitationMessage({peerId:this.callerId,callId:this.callId,extra:this.response,type:"CallReject",channelId:this.channelId}),this.state=Cb.REFUSED,this.emit("RemoteInvitationRefused")}},{key:"onCancelReceived",value:function(e){this.isRemoteInvitationEnd()?this.log("The invitation has ended, skipped emitting the %s event","RemoteInvitationCanceled"):(this.state===Cb.ACCEPT_SENT_TO_LOCAL&&this.log("caller canceled before receive accept"),this._content=e,this.state=Cb.CANCELED,this.emit("RemoteInvitationCanceled",e))}},{key:"onAcceptAckReceived",value:function(){this.state!==Cb.ACCEPT_SENT_TO_LOCAL?this.log("The invitation has ended, skipped emitting the %s event","ori:".concat(this.state,", to: RemoteInvitationAccepted")):(this.state=Cb.ACCEPTED,this.emit("RemoteInvitationAccepted"))}},{key:"isRemoteInvitationEnd",value:function(){return[Cb.ACCEPTED,Cb.REFUSED,Cb.CANCELED,Cb.FAILURE].includes(this.state)}}]),t}(Ac()),$E=function(e){function t(e,r){ua(this,t);var i=n.call(this,r,"InvitationManager");return x(z(i),"getSession",void 0),x(z(i),"invitationDispatcher",new ya.EventEmitter),x(z(i),"outgoingLocalInvitations",new Map),x(z(i),"receivedRemoteInvitations",new Sc(void 0,{maxlen:1e4})),x(z(i),"logger",void 0),i.getSession=Zn(e),i.logger=r,i.invitationDispatcher.on("remoteInvitationToManager",(function(e){var t=e.callId,n=e.extra,o=e.callerId;e=e.channelId,i.receivedRemoteInvitations.has(t)||((n=new ZE({callerId:o,callId:t,getSession:i.getSession,logger:r,extraContent:n,invitationChannel:e})).remoteInvitationEnd$.subscribe((function(){i.receivedRemoteInvitations.delete(t)})),i.receivedRemoteInvitations.set(t,n),i.emit("remoteInvitationInstance",n))})),i.invitationDispatcher.on("acceptAckToRemoteInvitation",(function(e){(e=i.receivedRemoteInvitations.get(e.callId))&&e.onAcceptAckReceived()})),i.invitationDispatcher.on("cancelToRemoteInvitation",(function(e){var t=e.extra;(e=i.receivedRemoteInvitations.get(e.callId))&&e.onCancelReceived(t)})),i.invitationDispatcher.on("acceptToLocalInvitation",(function(e){var t=e.extra;(e=i.outgoingLocalInvitations.get(e.callId))&&e.onAcceptReceived(t)})),i.invitationDispatcher.on("refuseToLocalInvitation",(function(e){var t=e.extra;(e=i.outgoingLocalInvitations.get(e.callId))&&e.onRefuseReceived(t)})),i}Ga(t,e);var n=Ha(t);return cb(t,[{key:"invitationMessageHandler",value:function(e){var t=e.body,n=t.callId,r=t.extra;r=void 0===r?"":r;var i=t.type,o=void 0===(t=t.channel)?"":t,a=e.type;switch(t=e.peerId,e=e.serverReceivedTs,a){case"CallAccept":"ack"===i?this.invitationDispatcher.emit("acceptAckToRemoteInvitation",{callId:n}):"request"===i&&this.invitationDispatcher.emit("acceptToLocalInvitation",{callId:n,extra:r});break;case"CallInvite":this.invitationDispatcher.emit("remoteInvitationToManager",{callId:n,callerId:t,extra:r,channelId:o});break;case"CallCancel":if("0"===n){n="".concat("AgoraRTMLegacyEndcallCompatibleMessagePrefix","_").concat(o,"_").concat(r),this.getSession().emit("peerTextMessage",{peerId:t,properties:{serverReceivedTs:e},text:n});break}this.invitationDispatcher.emit("cancelToRemoteInvitation",{callId:n,extra:r});break;case"CallReject":this.invitationDispatcher.emit("refuseToLocalInvitation",{callId:n,extra:r});break;default:throw In("invitationType",a)}}},{key:"genLocalInvitation",value:function(e){var t=this,n=new YE(e,this.getSession,this.logger);return n.localInvitationEnd$.subscribe((function(){t.outgoingLocalInvitations.delete(n.callId)})),this.outgoingLocalInvitations.set(n.callId,n),n}}]),t}(Ac()),aF=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Db(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),vD(e,t,{leading:r,maxWait:t,trailing:i})},Lb,Gf;!function(e){e[e.JOINED=0]="JOINED",e[e.LEFT=1]="LEFT"}(Gf||(Gf={}));var lm=qa.ConnectionState,bF=(Lb=function(e){function t(e,n,i,o){ua(this,t);var a=r.call(this,o,"RtmChannel",!0);return x(z(a),"onMemberCountUpdated",aF((function(e){e!==a.memberCount&&(a.memberCount=e,a.emit("MemberCountUpdated",e))}),1e3)),x(z(a),"getSession",void 0),x(z(a),"memberCount",0),x(z(a),"joinState","LEFT"),x(z(a),"joinPromise",void 0),x(z(a),"memberJoinedLru",new Sc(void 0,{maxlen:1e4})),x(z(a),"memberLeftLru",new Sc(void 0,{maxlen:1e4})),x(z(a),"memberJoinStateLru",new Sc(void 0,{maxlen:1e4})),x(z(a),"attributesSeqLru",new Sc(void 0,{maxlen:1e4})),x(z(a),"channelId",void 0),x(z(a),"client",void 0),x(z(a),"onChannelMemberCountUpdated",(function(e,t){a.channelId===e&&a.onMemberCountUpdated(t)})),x(z(a),"onLogout",(function(){try{a.clearChannel(a.getSession())}catch(e){}})),x(z(a),"onAttributesUpdated",(function(e){var t=e.channelId,n=e.attributeMaps,r=e.seq;e=e.instance.toString();var i=a.attributesSeqLru.get(e);if((!i||r.greaterThan(i))&&(a.attributesSeqLru.set(e,r),t===a.channelId)){for(t={},r=0;r<n.length;r++){var o=n[r];e=o.key,i=o.ms;var s=o.value;if(o=o.origin,"string"!=typeof e||!ma.isLong(i)||"string"!=typeof s||!Sa(o))break;t[e]={value:s,lastUpdateUserId:o,lastUpdateTs:i.toNumber()}}a.emit("AttributesUpdated",t)}})),x(z(a),"onChannelTextMessage",(function(e){var t=e.memberId,n=e.text,r=e.properties;e.channelId===a.channelId&&a.emit("ChannelMessage",{text:n,messageType:qa.MessageType.TEXT},t,r)})),x(z(a),"onChannelRawMessage",(function(e){var t=e.desc,n=e.raw,r=e.memberId,i=e.properties;e.channelId===a.channelId&&a.emit("ChannelMessage",{messageType:qa.MessageType.RAW,rawMessage:n,description:t},r,i)})),x(z(a),"onMemberNotice",(function(e){var t=e.memberId,n=e.type,r=e.size;if(e.channelId===a.channelId){var i=e.instance.toString();e=e.seq.toString();var o={MemberLeft:a.memberLeftLru,MemberJoined:a.memberJoinedLru,MemberCountUpdated:void 0}[n];if(o){if(o.has(i+e))return void a.log("received duplicated %s notice (seq: %s), channel '%s', member '%s'",n,e,Ka(a.channelId),Ka(t||""));if(o.set(i+e,void 0),"string"!=typeof t)return;if(t!==a.getSession().context.uid){if((i=a.memberJoinStateLru.get(t))===Gf.JOINED&&"MemberJoined"===n)return void a.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",n,e,Ka(a.channelId),Ka(t||""));if(i===Gf.LEFT&&"MemberLeft"===n)return void a.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",n,e,Ka(a.channelId),Ka(t||""))}a.memberJoinStateLru.set(t,"MemberJoined"===n?Gf.JOINED:Gf.LEFT)}a.info("Channel %s - %s, memberId: %s",n,Ka(a.channelId),"MemberCountUpdated"===n?"[unknown]":Ka(t||"")),i=t===a.getSession().context.uid,"MemberLeft"===n&&Sa(t)||"MemberJoined"===n&&Sa(t)?(i||a.emit(n,t),a.onMemberCountUpdated(r)):"MemberCountUpdated"===n&&"number"==typeof r&&a.onMemberCountUpdated(r)}})),a.getSession=Zn(n),a.channelId=e,a.client=i,a.info("A channel created, id %s",Ka(e)),a}Ga(t,e);var n,r=Ha(t);return cb(t,[{key:"join",value:(n=ja(M.mark((function e(){var t,n,r,i,o,a,s,u=this;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=this.getSession(),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new aa("The client is not logged in. Cannot do the operation",Qr);case 7:if(e.prev=7,Sa(this.channelId)){e.next=10;break}throw new Z(["The %s in the arguments is invalid","channelId"],CB);case 10:if("LEFT"===this.joinState){e.next=13;break}throw xb("ChnJoin",{cname:this.channelId,lts:ma.fromNumber(Date.now()),userId:t.context.uid,elapse:yb(t.startTime),errCode:Pr,sid:rb(t.instanceId)},null!==(i=this.client.context.config.enableCloudProxy)&&void 0!==i&&i),new aa("The channel has joined. Cannot rejoin",Pr);case 13:if(!t.usedChannelIds.includes(this.channelId)){e.next=16;break}throw xb("ChnJoin",{cname:this.channelId,lts:ma.fromNumber(Date.now()),userId:t.context.uid,elapse:yb(t.startTime),errCode:Rr,sid:rb(t.instanceId)},null!==(o=this.client.context.config.enableCloudProxy)&&void 0!==o&&o),new aa("A channel of the same channel ID has already joined. Cannot rejoin",Rr);case 16:if(!(20<=t.usedChannelIds.length)){e.next=19;break}throw xb("ChnJoin",{cname:this.channelId,lts:ma.fromNumber(Date.now()),userId:t.context.uid,elapse:yb(t.startTime),errCode:Or,sid:rb(t.instanceId)},null!==(a=this.client.context.config.enableCloudProxy)&&void 0!==a&&a),new dc("The joined channels has exceeded the limit of 20",Or);case 19:return xb("ChnJoin",{cname:this.channelId,lts:ma.fromNumber(Date.now()),userId:t.context.uid,elapse:yb(t.startTime),errCode:0,sid:rb(t.instanceId)},null!==(n=this.client.context.config.enableCloudProxy)&&void 0!==n&&n),this.log("Joining the channel %s",Ka(this.channelId)),this.joinState="JOINING",t.usedChannelIds.push(this.channelId),this.joinPromise=t.requestChannelJoin(this.channelId).then((function(){u.joinState="JOINED"})),e.next=26,this.joinPromise;case 26:xb("ChnJoinRes",{cname:this.channelId,lts:ma.fromNumber(Date.now()),elapse:yb(t.startTime),errCode:0,sid:rb(t.instanceId),serverErrCode:0,userId:t.context.uid},null!==(r=this.client.context.config.enableCloudProxy)&&void 0!==r&&r),this.info("The channel %s joined successfully",Ka(this.channelId)),t.on("channelTextMessage",this.onChannelTextMessage),t.on("channelRawMessage",this.onChannelRawMessage),t.on("memberNotice",this.onMemberNotice),t.on("channelAttributesUpdated",this.onAttributesUpdated),this.client.internalEmitter.on("channelMemberCountUpdated",this.onChannelMemberCountUpdated),this.client.internalEmitter.once("LOGOUT",this.onLogout),e.next=46;break;case 36:if(e.prev=36,e.t1=e.catch(7),"JOINING"===this.joinState&&(this.joinState="LEFT"),this.logError(e.t1),!Ma(e.t1)){e.next=42;break}throw e.t1;case 42:if(!vb(e.t1)){e.next=45;break}throw xb("ChnJoinRes",{cname:this.channelId,lts:ma.fromNumber(Date.now()),elapse:yb(t.startTime),errCode:Nr,sid:rb(t.instanceId),serverErrCode:0,userId:t.context.uid},null!==(s=this.client.context.config.enableCloudProxy)&&void 0!==s&&s),new Qb(["Join channel %s timed out",Ka(this.channelId)],Nr);case 45:throw new se(["The channel %s join failure",Ka(this.channelId)],{code:Mr,originalError:e.t1});case 46:case"end":return e.stop()}}),e,this,[[0,4],[7,36]])}))),function(){return n.apply(this,arguments)})},{key:"leave",value:function(){var e=ja(M.mark((function e(){var t,n,r,i;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=this.getSession(),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new aa("The client is not logged in. Cannot do the operation",EB);case 7:if("LEFT"!==this.joinState){e.next=9;break}throw new aa("The channel does not join. Cannot do the operation",DB);case 9:return e.prev=9,n.requestChannelLeave(this.channelId),e.next=13,this.clearChannel(n);case 13:e.next=24;break;case 15:if(e.prev=15,e.t1=e.catch(9),this.logError(e.t1),!Ma(e.t1)){e.next=22;break}throw void 0===e.t1.code&&(e.t1.code=Tr),xb("ChnLeave",{cname:this.channelId,lts:ma.fromNumber(Date.now()),elapse:yb(n.startTime),errCode:Tr,sid:rb(n.instanceId),userId:n.context.uid},null!==(i=this.client.context.config.enableCloudProxy)&&void 0!==i&&i),e.t1;case 22:throw xb("ChnLeave",{cname:this.channelId,lts:ma.fromNumber(Date.now()),elapse:yb(n.startTime),errCode:Sr,sid:rb(n.instanceId),userId:n.context.uid},null!==(r=this.client.context.config.enableCloudProxy)&&void 0!==r&&r),new se("The channel leave failure",{code:Sr,originalError:e.t1});case 24:xb("ChnLeave",{cname:this.channelId,lts:ma.fromNumber(Date.now()),elapse:yb(n.startTime),errCode:0,sid:rb(n.instanceId),userId:n.context.uid},null!==(t=this.client.context.config.enableCloudProxy)&&void 0!==t&&t);case 25:case"end":return e.stop()}}),e,this,[[0,4],[9,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=ja(M.mark((function e(t){var n,r=this;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(On(t,Cl),"JOINED"===this.joinState){e.next=3;break}throw new aa("The channel does not join. Cannot do the operation",sB);case 3:if(this.client.connectionState!==lm.RECONNECTING){e.next=8;break}return n=Date.now(),e.next=7,new Promise((function(e,i){var o,a=(o=ja(M.mark((function o(){var a;return M.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return a=Date.now()-n,o.prev=1,o.next=4,kh({message:t,peerId:r.channelId,toPeer:!1,session:r.getSession(),errorCodes:{NOT_LOGGED_IN:Dl,TOO_OFTEN:Hr},diff:a,logger:r.logger});case 4:e(),o.next=12;break;case 7:o.prev=7,o.t0=o.catch(1),vb(o.t0)&&i(new Qb(te(r.name,"sendMessageToPeer",1e4),Bl)),Ma(o.t0)&&i(o.t0),i(new Ja("Channel message send failure",{code:ni,originalError:o.t0}));case 12:return o.prev=12,clearTimeout(s),o.finish(12);case 15:case"end":return o.stop()}}),o,null,[[1,7,12,15]])}))),function(){return o.apply(this,arguments)});r.client.internalEmitter.once("RECONNECTED",a);var s=setTimeout((function(){r.client.internalEmitter.off("RECONNECTED",a),i(new Qb(te(r.name,"sendMessageToPeer",1e4),Bl))}),9e3)}));case 7:return e.abrupt("return");case 8:if(this.client.connectionState===lm.CONNECTED){e.next=10;break}throw new aa("The client is not logged in. Cannot do the operation",Dl);case 10:return e.prev=10,e.next=13,kh({message:t,peerId:this.channelId,toPeer:!1,session:this.getSession(),errorCodes:{NOT_LOGGED_IN:Dl,TOO_OFTEN:Hr},diff:0,logger:this.logger});case 13:e.next=23;break;case 15:if(e.prev=15,e.t0=e.catch(10),!vb(e.t0)){e.next=19;break}throw new Qb(te(this.name,"sendMessage",1e4),Bl);case 19:if(!Ma(e.t0)){e.next=22;break}throw this.logError(e.t0),e.t0;case 22:throw new se("The channel message send failure",ni);case 23:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getMembers",value:function(){var e=ja(M.mark((function e(){var t,n;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.client.connectionState===lm.CONNECTED){e.next=3;break}throw new aa("The client is not logged in. Cannot do the operation",zB);case 3:if("JOINED"===this.joinState){e.next=5;break}throw new aa("The channel does not join. Cannot do the operation",yB);case 5:return t=this.getSession().requestChannelMemberList(this.channelId),e.next=8,t.pipe(Da((function(e){return e.memberInfos.map((function(e){return e.account}))}))).toPromise();case 8:return n=e.sent,this.info("Channel %s - get members success, %o",Ka(this.channelId),n.map(Ka)),e.abrupt("return",n);case 13:if(e.prev=13,e.t0=e.catch(0),!Ma(e.t0)){e.next=18;break}throw this.logError(e.t0),e.t0;case 18:throw new se("The channel members get failure",wB);case 19:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"clearChannel",value:function(){var e=ja(M.mark((function e(t){var n=this;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.emit("channelLeft",this.channelId),"JOINING"!==this.joinState){e.next=4;break}return e.next=4,this.joinPromise;case 4:this.joinState="LEFT",this.memberLeftLru.empty(),this.memberJoinedLru.empty(),this.attributesSeqLru.empty(),this.memberJoinStateLru.empty(),this.memberCount=0,t.removeListener("channelTextMessage",this.onChannelTextMessage),t.removeListener("channelRawMessage",this.onChannelRawMessage),t.removeListener("memberNotice",this.onMemberNotice),t.removeListener("channelAttributesUpdated",this.onAttributesUpdated),this.client.internalEmitter.removeListener("channelMemberCountUpdated",this.onChannelMemberCountUpdated),this.client.internalEmitter.removeListener("LOGOUT",this.onLogout),t.usedChannelIds=t.usedChannelIds.filter((function(e){return e!==n.channelId}));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),t}(Ac()),Ca(Lb.prototype,"join",[Ic],Object.getOwnPropertyDescriptor(Lb.prototype,"join"),Lb.prototype),Ca(Lb.prototype,"leave",[Ic],Object.getOwnPropertyDescriptor(Lb.prototype,"leave"),Lb.prototype),Ca(Lb.prototype,"sendMessage",[Ic],Object.getOwnPropertyDescriptor(Lb.prototype,"sendMessage"),Lb.prototype),Ca(Lb.prototype,"getMembers",[fb],Object.getOwnPropertyDescriptor(Lb.prototype,"getMembers"),Lb.prototype),Lb),U,Mb=qa.ConnectionChangeReason,la=qa.ConnectionState,Nt={DISCONNECTED:1,CONNECTING:2,CONNECTED:3,RECONNECTING:4,ABORTED:5},cF={LOGIN:1,LOGIN_SUCCESS:2,LOGIN_FAILURE:3,LOGIN_TIMEOUT:4,INTERRUPTED:5,LOGOUT:6,BANNED_BY_SERVER:7,REMOTE_LOGIN:8,TOKEN_EXPIRED:9},dF=(U=function(e){function t(e,n,i,o){ua(this,t);var a=r.call(this,n,"RtmClient",!0);return x(z(a),"connectionState",la.DISCONNECTED),x(z(a),"internalEmitter",new ya),x(z(a),"context",void 0),x(z(a),"attributes",{}),x(z(a),"loginPromise",void 0),x(z(a),"attributeDrafts",new Set),x(z(a),"session",void 0),x(z(a),"lastLoginTime",void 0),x(z(a),"reconnId",0),x(z(a),"channelAttributesCacheLru",new Sc(void 0,{maxlen:1e4})),x(z(a),"invitationManager",void 0),x(z(a),"subscribedPeerStatusCache",{}),x(z(a),"pendingPeerStatusSubCount",0),x(z(a),"peerStatusSeqLru",new Sc(void 0,{maxlen:1e4})),x(z(a),"peerUnreachableTimers",{}),x(z(a),"setParameters",void 0),x(z(a),"updateConfig",void 0),x(z(a),"blacklistedIP",{}),x(z(a),"TokenPrivilegeWillExpireHandler",(function(){a.emit("TokenPrivilegeWillExpire")})),x(z(a),"userDropHandler",(function(e){if(a.connectionState!==la.ABORTED)switch(e){case 2:a.logError("Server banned because of token is expired"),a.onConnectionStateChanged(la.ABORTED,Mb.TOKEN_EXPIRED),a.emit("TokenExpired");break;case 11:a.logError("Kicked off by remote session"),a.onConnectionStateChanged(la.ABORTED,Mb.REMOTE_LOGIN);break;case 14:case 15:case 16:a.logError("Server banned because of illegal ".concat({14:"User ID",15:"IP",16:"Channel Name"}[e])),a.onConnectionStateChanged(la.ABORTED,Mb.BANNED_BY_SERVER);break;default:a.logError("User kicked off for unknown code: ".concat(e)),a.onConnectionStateChanged(la.ABORTED,Mb.INTERRUPTED)}})),a.context=new eE(e,i,n),a.context.config=i,a.internalEmitter.setMaxListeners(512),a.setParameters=o.bind(z(a)),a.updateConfig=o.bind(z(a)),a.invitationManager=new $E((function(){return a.session}),n),a.invitationManager.on("remoteInvitationInstance",(function(e){a.emit("RemoteInvitationReceived",e)})),a.setMaxListeners(512),a.internalEmitter.setMaxListeners(512),a}Ga(t,e);var n,r=Ha(t);return cb(t,[{key:"renewToken",value:(n=ja(M.mark((function e(t){var n,r,i,o,a=this;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t&&0!==t.length){e.next=2;break}throw new Z("Invalid argument",KB);case 2:if(this.connectionState!==la.ABORTED){e.next=5;break}return e.next=5,new Promise((function(){}));case 5:if(this.connectionState===la.CONNECTED||this.connectionState===la.RECONNECTING){e.next=7;break}throw new aa("The client is not logged in",bs);case 7:if(void 0!==this.session){e.next=9;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return e.prev=9,n=this.context.token,this.context.token=t,e.next=14,this.session.connection.apClient.getApEdgeInfo$(!1).pipe(Zd((function(){return Error("No available edge address to connect")})),Oe((function(e){return e.pipe(sa((function(e){if(Ma(e))throw e})),Yd(2500),db(4))})),db(1),Hb(2e4),Ya((function(e){return vb(e)&&a.warn("renewToken timed out"),pa(e)}))).toPromise();case 14:r=e.sent,i=r.ticket,e.next=27;break;case 18:if(e.prev=18,e.t0=e.catch(9),this.context.token=n,e.t0.code!==Vr&&e.t0.code!==Wr){e.next=23;break}throw new yf("Invalid token",MB);case 23:if(e.t0.code!==qi){e.next=25;break}throw new yf("The token expired",LB);case 25:if(!vb(e.t0)){e.next=27;break}throw new Qb("Renew token timed out",Gl);case 27:o=this.session,this.session.requestUpdateEdgeTicket(i).toPromise().then((function(e){if(0!==e.code)throw new Ja(["RenewToken failure. The response code is %d",e.code],Gl);o.curLoginSockets.filter((function(e){return void 0!==e})).forEach((function(e){return e.ticket=i}))}));case 29:case"end":return e.stop()}}),e,this,[[9,18]])}))),function(e){return n.apply(this,arguments)})},{key:"queryPeersOnlineStatus",value:function(){var e=ja(M.mark((function e(t){var n,r,i=this;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===la.CONNECTED){e.next=2;break}throw new aa("The client is not logged in",JB);case 2:if(void 0!==this.session){e.next=4;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(!(!Array.isArray(t)||0===t.length||t.some((function(e){return!Sa(e)}))||256<t.length)){e.next=6;break}throw new Z("invalid arguments",as);case 6:return e.next=8,this.session.requestPeersOnlineStatus(t).toPromise();case 8:return n=e.sent,r=hd(nl(n.userInfos,"account"),(function(e){return!!e.ts})),Object.keys(r).forEach((function(e){if(e in i.subscribedPeerStatusCache&&i.subscribedPeerStatusCache[e]!==qa.PeerOnlineState.UNREACHABLE){var t=r[e]?qa.PeerOnlineState.ONLINE:qa.PeerOnlineState.OFFLINE;i.emit("PeersOnlineStatusChanged",x({},e,t)),i.subscribedPeerStatusCache[e]=t}})),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannelMemberCount",value:function(){var e=ja(M.mark((function e(t){var n,r,i,o,a,s,u,c,l;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===la.CONNECTED){e.next=2;break}throw new aa("The client is not logged in",vB);case 2:if(void 0!==this.session){e.next=4;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(t)&&t.every((function(e){return"string"==typeof e}))&&0!==t.length){e.next=6;break}throw new Z("Invalid arguments: channelIds",Jr);case 6:if(!(32<t.length)){e.next=8;break}throw new Z("getChannelMemberCount exceed limit of 32 channelIds",uB);case 8:n=0;case 9:if(!(n<t.length)){e.next=16;break}if(Sa(r=t[n])){e.next=13;break}throw new Z(["getChannelMemberCount channel id %s is invalid",r],Jr);case 13:n++,e.next=9;break;case 16:return e.next=18,this.session.requestGetChannelMemberCount(t).toPromise();case 18:for(i=e.sent,o=i.groupInfos,a={},s=0;s<o.length;s++)u=o[s],c=u.group,l=u.memberCount,Sa(c)&&"number"==typeof l&&(this.internalEmitter.emit("channelMemberCountUpdated",c,l),a[c]=l);return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setLocalUserAttributes",value:function(){var e=ja(M.mark((function e(t){var n,r;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Wf({attributes:t,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===la.CONNECTED){e.next=3;break}throw new aa("The client is not logged in",lc);case 3:if(void 0!==this.session){e.next=5;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return n=this.session.requestSetLocalUserAttributes(t).toPromise(),r={attribute:t,promise:n},this.attributeDrafts.add(r),e.prev=8,e.next=11,n;case 11:this.attributes=t,e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(8),!Ma(e.t0)){e.next=18;break}throw e.t0;case 18:throw new Z("arguments is not valid",bb);case 19:return e.prev=19,this.attributeDrafts.delete(r),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[8,14,19,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setChannelAttributes",value:function(){var e=ja(M.mark((function e(t,n){var r,i,o,a,s,u=arguments;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<u.length&&void 0!==u[2]?u[2]:{},i=r.enableNotificationToChannelMembers,o=void 0!==i&&i,Wf({attributes:n,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===la.CONNECTED){e.next=4;break}throw new aa("The client is not logged in",lc);case 4:if(void 0!==this.session){e.next=6;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return a=this.session.requestSetChannelAttributes(t,n,o).toPromise(),e.prev=7,e.next=10,a;case 10:s=hd(n,(function(e){return new Blob([e]).size})),this.channelAttributesCacheLru.set(t,s),e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(7),!Ma(e.t0)){e.next=18;break}throw e.t0;case 18:throw new Z("arguments is not valid",bb);case 19:case"end":return e.stop()}}),e,this,[[7,14]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addOrUpdateLocalUserAttributes",value:function(){var e=ja(M.mark((function e(t){var n,r,i;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=jb(jb({},this.attributes),t),Wf({attributes:t,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),Wf({attributes:n,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===la.CONNECTED){e.next=5;break}throw new aa("The client is not logged in",lc);case 5:if(void 0!==this.session){e.next=7;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return r=this.session.requestAddOrUpdateLocalUserAttributes(t).toPromise(),i={attribute:n,promise:r},this.attributeDrafts.add(i),e.prev=10,e.next=13,r;case 13:this.attributes=n,e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(10),!Ma(e.t0)){e.next=20;break}throw e.t0;case 20:throw new Z("arguments is not valid",as);case 21:return e.prev=21,this.attributeDrafts.delete(i),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[10,16,21,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addOrUpdateChannelAttributes",value:function(){var e=ja(M.mark((function e(t,n){var r,i,o,a,s,u,c,l=arguments;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<l.length&&void 0!==l[2]?l[2]:{},i=r.enableNotificationToChannelMembers,o=void 0!==i&&i,a=this.channelAttributesCacheLru.get(t,{}),s=hd(n,(function(e){return new Blob([e]).size})),u=jb(jb({},a),s),Wf({attributes:n,attrSizeMap:u,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===la.CONNECTED){e.next=7;break}throw new aa("The client is not logged in",lc);case 7:if(void 0!==this.session){e.next=9;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return c=this.session.requestAddOrUpdateChannelAttributes(t,n,o).toPromise(),e.prev=10,e.next=13,c;case 13:this.channelAttributesCacheLru.set(t,u),e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(10),!Ma(e.t0)){e.next=20;break}throw e.t0;case 20:throw new Z("arguments is not valid",bb);case 21:case"end":return e.stop()}}),e,this,[[10,16]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteLocalUserAttributesByKeys",value:function(){var e=ja(M.mark((function e(t){var n,r,i,o;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)&&0!==t.length&&!t.some((function(e){return 0===e.length}))){e.next=2;break}throw new aa("arguments is not valid",bb);case 2:if(this.connectionState===la.CONNECTED){e.next=4;break}throw new aa("The client is not logged in",lc);case 4:if(void 0!==this.session){e.next=6;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return n=this.session.requestDeleteLocalUserAttributesByKeys(t).toPromise(),r={attribute:kl(this.attributes,t),promise:n},this.attributeDrafts.add(r),e.prev=9,e.next=12,n;case 12:for(i=0;i<t.length;i++)o=t[i],delete this.attributes[o];e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(9),!Ma(e.t0)){e.next=19;break}throw e.t0;case 19:throw new Z("arguments is not valid",bb);case 20:return e.prev=20,this.attributeDrafts.delete(r),e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[9,15,20,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteChannelAttributesByKeys",value:function(){var e=ja(M.mark((function e(t,n){var r,i,o,a,s,u,c,l=arguments;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<l.length&&void 0!==l[2]?l[2]:{},i=r.enableNotificationToChannelMembers,o=void 0!==i&&i,Array.isArray(n)&&0!==n.length&&Sa(t)&&!n.some((function(e){return 0===e.length||512<e.length}))){e.next=3;break}throw new aa("arguments is not valid",bb);case 3:if(this.connectionState===la.CONNECTED){e.next=5;break}throw new aa("The client is not logged in",lc);case 5:if(void 0!==this.session){e.next=7;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return a=this.session.requestDeleteChannelAttributesByKeys(t,n,o).toPromise(),e.prev=8,e.next=11,a;case 11:if(s=this.channelAttributesCacheLru.get(t))for(u=0;u<n.length;u++)c=n[u],delete s[c];e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(8),!Ma(e.t0)){e.next=19;break}throw e.t0;case 19:throw new Z("arguments is not valid",bb);case 20:case"end":return e.stop()}}),e,this,[[8,15]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"clearLocalUserAttributes",value:function(){var e=ja(M.mark((function e(){var t,n;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===la.CONNECTED){e.next=2;break}throw new aa("The client is not logged in",lc);case 2:if(void 0!==this.session){e.next=4;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return t=this.session.requestClearLocalUserAttributes().toPromise(),n={attribute:{},promise:t},this.attributeDrafts.add(n),e.prev=7,e.next=10,t;case 10:this.attributes={},e.next=18;break;case 13:if(e.prev=13,e.t0=e.catch(7),!Ma(e.t0)){e.next=17;break}throw e.t0;case 17:throw new Z("arguments is not valid",bb);case 18:return e.prev=18,this.attributeDrafts.delete(n),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[7,13,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"clearChannelAttributes",value:function(){var e=ja(M.mark((function e(t){var n,r,i,o,a=arguments;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1<a.length&&void 0!==a[1]?a[1]:{},r=n.enableNotificationToChannelMembers,i=void 0!==r&&r,this.connectionState===la.CONNECTED){e.next=3;break}throw new aa("The client is not logged in",lc);case 3:if(void 0!==this.session){e.next=5;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return o=this.session.requestClearChannelAttributes(t,i).toPromise(),e.prev=6,e.next=9,o;case 9:this.channelAttributesCacheLru.delete(t),e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(6),!Ma(e.t0)){e.next=16;break}throw e.t0;case 16:throw new Z("arguments is not valid",bb);case 17:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserAttributes",value:function(){var e=ja(M.mark((function e(t){var n,r,i;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sa(t)){e.next=2;break}throw new Z("Not a valid user ID",bb);case 2:if(this.connectionState===la.CONNECTED){e.next=4;break}throw new aa("The client is not logged in",lc);case 4:if(void 0!==this.session){e.next=6;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return e.prev=6,e.next=9,this.session.requestGetUserAttributeKeys(t).toPromise();case 9:return n=e.sent,r=n.keys,e.next=13,this.session.requestGetUserAttributesByKeys(t,r.slice(0,512)).toPromise();case 13:i=e.sent,e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(6),!Ma(e.t0)){e.next=20;break}throw e.t0;case 20:throw new Z("arguments is not valid",bb);case 21:return e.abrupt("return",Tq(i.attributeInfos.map((function(e){return[e.key,e.value]}))));case 22:case"end":return e.stop()}}),e,this,[[6,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannelAttributes",value:function(){var e=ja(M.mark((function e(t){var n,r,i,o,a,s,u,c,l,f,h;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sa(t)){e.next=2;break}throw new Z("Not a valid channel ID",bb);case 2:if(this.connectionState===la.CONNECTED){e.next=4;break}throw new aa("The client is not logged in",lc);case 4:if(void 0!==this.session){e.next=6;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return e.prev=6,e.next=9,this.session.requestGetChannelAttributesKeys(t).toPromise();case 9:return n=e.sent,r=n.keys,e.next=13,this.session.requestGetChannelAttributesByKeys(t,r).toPromise();case 13:i=e.sent,o=i.attributeMaps,e.next=22;break;case 17:if(e.prev=17,e.t0=e.catch(6),!Ma(e.t0)){e.next=21;break}throw e.t0;case 21:throw new Z("arguments is not valid",bb);case 22:a={},s=0;case 24:if(!(s<o.length)){e.next=32;break}if(u=o[s],c=u.key,l=u.ms,f=u.value,h=u.origin,"string"==typeof c&&ma.isLong(l)&&"string"==typeof f&&Sa(h)){e.next=28;break}return e.abrupt("break",32);case 28:a[c]={value:f,lastUpdateUserId:h,lastUpdateTs:l.toNumber()};case 29:s++,e.next=24;break;case 32:return this.channelAttributesCacheLru.set(t,hd(a,(function(e){return new Blob([e.value]).size}))),e.abrupt("return",a);case 34:case"end":return e.stop()}}),e,this,[[6,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannelAttributesByKeys",value:function(){var e=ja(M.mark((function e(t,n){var r,i,o,a,s,u,c,l,f,h;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===la.CONNECTED){e.next=2;break}throw new aa("The client is not logged in",lc);case 2:if(void 0!==this.session){e.next=4;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return Hn(t,n),e.prev=5,e.next=8,this.session.requestGetChannelAttributesByKeys(t,n).toPromise();case 8:r=e.sent,i=r.attributeMaps,e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(5),!Ma(e.t0)){e.next=16;break}throw e.t0;case 16:throw new Z("arguments is not valid",bb);case 17:o={},a=this.channelAttributesCacheLru.get(t,{}),s=0;case 20:if(!(s<i.length)){e.next=29;break}if(u=i[s],c=u.key,l=u.ms,f=u.value,h=u.origin,"string"==typeof c&&ma.isLong(l)&&"string"==typeof f&&Sa(h)){e.next=24;break}return e.abrupt("break",29);case 24:a[c]=new Blob([f]).size,o[c]={value:f,lastUpdateUserId:h,lastUpdateTs:l.toNumber()};case 26:s++,e.next=20;break;case 29:return this.channelAttributesCacheLru.set(t,a),e.abrupt("return",o);case 31:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUserAttributesByKeys",value:function(){var e=ja(M.mark((function e(t,n){var r;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===la.CONNECTED){e.next=2;break}throw new aa("The client is not logged in",lc);case 2:if(void 0!==this.session){e.next=4;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return Hn(t,n),e.prev=5,e.next=8,this.session.requestGetUserAttributesByKeys(t,n).toPromise();case 8:r=e.sent,e.next=16;break;case 11:if(e.prev=11,e.t0=e.catch(5),!Ma(e.t0)){e.next=15;break}throw e.t0;case 15:throw new Z("arguments is not valid",bb);case 16:return e.abrupt("return",Tq(r.attributeInfos.map((function(e){return[e.key,e.value]}))));case 17:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=ja(M.mark((function e(t){var n,r,i,o,a;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(rn(!0),r=hh(),i=t.token,t.token===this.context.appId&&(i=void 0),xb("Session",{appId:this.context.appId,did:navigator.userAgent,elapse:yb(this.session&&this.session.startTime),index:{index1:t.uid,index2:this.context.appId,index3:"enableLogUpload=".concat(this.context.config.enableLogUpload)},installId:Mg,lts:ma.fromNumber(Date.now()),os:7,sid:rb(r),token:i||"",userId:t.uid,ver:"1.5.0",buildno:417,subVersion:17,version:4},null!==(n=this.context.config.enableCloudProxy)&&void 0!==n&&n,!0),Be(t)&&Sa(t.uid)){e.next=7;break}throw new Z("not a valid user id",pi);case 7:if("string"!=typeof i||!i){e.next=11;break}this.context.token=i,e.next=13;break;case 11:if("string"==typeof i||null==i){e.next=13;break}throw new Z('The "token" is not a valid string.',pi);case 13:return o=Date.now(),this.context.sid=rb(r),this.loginPromise=this.loginImpl({uid:t.uid,instanceId:r}),this.info("RTM Client logging in as ".concat(Ka(t.uid))),e.prev=17,e.next=20,this.loginPromise;case 20:e.next=28;break;case 22:throw e.prev=22,e.t0=e.catch(17),Ma(e.t0)&&xb("Link",{ackedServerIp:"",destServerIp:"",ec:e.t0.code||1,sc:e.t0.serverCode,elapse:yb(this.session&&this.session.startTime),lts:ma.fromNumber(Date.now()),responseTime:Date.now()-o,sid:rb(r),userId:t.uid},null!==(a=this.context.config.enableCloudProxy)&&void 0!==a&&a),this.context.token=void 0,this.context.socketUseProxy=!1,e.t0;case 28:return e.prev=28,this.loginPromise=void 0,e.finish(28);case 31:this.context.socketUseProxy&&this.emit("FallbackProxyConnected"),rn(!1);case 33:case"end":return e.stop()}}),e,this,[[17,22,28,31]])})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=ja(M.mark((function e(){var t;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loginPromise){e.next=3;break}return e.next=3,this.loginPromise;case 3:if(this.connectionState!==la.DISCONNECTED){e.next=6;break}throw this.logError("Already in logout state"),new aa("Logout failure. The client has already been logged out",Xr);case 6:if(this.internalEmitter.emit("LOGOUT"),this.connectionState!==la.ABORTED){e.next=11;break}return this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'),this.onConnectionStateChanged(la.DISCONNECTED,Mb.LOGOUT),e.abrupt("return");case 11:if(void 0!==this.session){e.next=14;break}return this.onConnectionStateChanged(la.DISCONNECTED,Mb.LOGOUT),e.abrupt("return");case 14:return xb("Logout",{elapse:yb(this.session.startTime),lts:ma.fromNumber(Date.now()),sid:rb(this.session.instanceId),userId:this.context.uid},null!==(t=this.context.config.enableCloudProxy)&&void 0!==t&&t),e.next=17,this.session.logoutHandler();case 17:this.onConnectionStateChanged(la.DISCONNECTED,Mb.LOGOUT),this.log("Log out success");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logoutSync",value:function(){var e,t=this;if(this.connectionState===la.DISCONNECTED)throw this.logError("Already in logout state"),new aa("Logout failure. The client has already been logged out",Xr);this.connectionState===la.ABORTED?this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'):void 0!==this.session&&(xb("Logout",{elapse:yb(this.session.startTime),lts:ma.fromNumber(Date.now()),sid:rb(this.session.instanceId),userId:this.context.uid},null!==(e=this.context.config.enableCloudProxy)&&void 0!==e&&e),this.session.logoutHandler().then((function(){t.log("Log out success")}))),this.onConnectionStateChanged(la.DISCONNECTED,Mb.LOGOUT)}},{key:"sendMessageToPeer",value:function(){var e=ja(M.mark((function e(t,n){var r,i=this;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(On(t,Xf),this.connectionState!==la.RECONNECTING){e.next=4;break}return r=Date.now(),e.abrupt("return",new Promise((function(e,o){var a,s=(a=ja(M.mark((function a(){var s;return M.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(void 0!==i.session){a.next=2;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 2:return s=Date.now()-r,a.prev=3,a.t0=e,a.next=7,kh({message:t,peerId:n,toPeer:!0,session:i.session,errorCodes:{NOT_LOGGED_IN:Fl,TOO_OFTEN:Zr},diff:s,logger:i.logger});case 7:a.t1=a.sent,(0,a.t0)(a.t1),a.next=16;break;case 11:a.prev=11,a.t2=a.catch(3),vb(a.t2)&&o(new Qb(te(i.name,"sendMessageToPeer",1e4),El)),Ma(a.t2)&&o(a.t2),o(new Ja("Peer-to-peer message send failure",{code:Yr,originalError:a.t2}));case 16:return a.prev=16,clearTimeout(u),a.finish(16);case 19:case"end":return a.stop()}}),a,null,[[3,11,16,19]])}))),function(){return a.apply(this,arguments)});i.internalEmitter.once("RECONNECTED",s);var u=setTimeout((function(){i.internalEmitter.off("RECONNECTED",s),o(new Qb(te(i.name,"sendMessageToPeer",1e4),El))}),9e3)})));case 4:if(this.connectionState===la.CONNECTED){e.next=6;break}throw new aa("Failed to send the peer-to-peer message. The client is not logged in",Fl);case 6:if(void 0!==this.session){e.next=8;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 8:return e.prev=8,e.next=11,kh({message:t,peerId:n,toPeer:!0,session:this.session,errorCodes:{NOT_LOGGED_IN:Fl,TOO_OFTEN:Zr},diff:0,logger:this.logger});case 11:return e.abrupt("return",e.sent);case 14:if(e.prev=14,e.t0=e.catch(8),!vb(e.t0)){e.next=18;break}throw new Qb(te(this.name,"sendMessageToPeer",1e4),El);case 18:if(!Ma(e.t0)){e.next=20;break}throw e.t0;case 20:throw new Ja("Peer-to-peer message send failure",{code:Yr,originalError:e.t0});case 21:case"end":return e.stop()}}),e,this,[[8,14]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createChannel",value:function(e){var t=this;if(!Sa(e))throw new Z(["The %s in the arguments is invalid",Object.keys({channelId:e})[0]],tB);return new bF(e,(function(){return t.session}),this,this.logger)}},{key:"createLocalInvitation",value:function(e){if(!Sa(e))throw new Z(["The %s in the arguments is invalid",Object.keys({calleeId:e})[0]],Tc);return this.invitationManager.genLocalInvitation(e)}},{key:"subscribePeersOnlineStatus",value:function(){var e=ja(M.mark((function e(t){var n,r,i,o,a,s,u,c,l,f,h,p,d,b=this;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===la.CONNECTED){e.next=2;break}throw new aa("The client is not logged in",Hl);case 2:if(void 0!==this.session){e.next=4;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(t)&&0!==t.length){e.next=6;break}throw new Z("Invalid arguments: peerIds",Og);case 6:n=0;case 7:if(!(n<t.length)){e.next=14;break}if(Sa(r=t[n])){e.next=11;break}throw new Z(["subscribePeersOnlineStatus peer id %s is invalid",r],Og);case 11:n++,e.next=7;break;case 14:if(!(512<(i=t&&t.length?$k(t):[]).length+Object.keys(this.subscribedPeerStatusCache).length+this.pendingPeerStatusSubCount)){e.next=17;break}throw new dc("Subscribed peers overflows",ds);case 17:return this.pendingPeerStatusSubCount+=i.length,e.next=20,this.session.requestSubscribePeersOnlineStatus(i).toPromise();case 20:o=e.sent,a=o.errors,this.pendingPeerStatusSubCount-=i.length,s=[],u=[],c=0;case 26:if(!(c<a.length)){e.next=34;break}if(l=a[c],f=l.code,"string"==typeof(h=l.account)){e.next=30;break}throw new Ja("Returned account is invalid",cs);case 30:0!==f&&s.push(h);case 31:c++,e.next=26;break;case 34:for(p=0;p<i.length;p++)d=i[p],s.includes(d)||(u.push(d),this.subscribedPeerStatusCache[d]=void 0);if(this.session.requestPeersOnlineStatus(u).pipe(Da((function(e){return hd(nl(e.userInfos,"account"),(function(e){return!!e.ts}))}))).subscribe((function(e){e=hd(e,(function(e,t){return e=e?qa.PeerOnlineState.ONLINE:qa.PeerOnlineState.OFFLINE,b.subscribedPeerStatusCache[t]=e})),b.emit("PeersOnlineStatusChanged",e)})),0===s.length){e.next=38;break}throw new Ja("Subscription failed",cs);case 38:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unsubscribePeersOnlineStatus",value:function(){var e=ja(M.mark((function e(t){var n,r,i,o,a;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===la.CONNECTED){e.next=2;break}throw new aa("The client is not logged in",Hl);case 2:if(void 0!==this.session){e.next=4;break}throw new ib({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(t)&&0!==t.length){e.next=6;break}throw new Z("Invalid arguments: peerIds",Og);case 6:n=0;case 7:if(!(n<t.length)){e.next=14;break}if(Sa(r=t[n])){e.next=11;break}throw new Z(["subscribePeersOnlineStatus peer id %s is invalid",r],Og);case 11:n++,e.next=7;break;case 14:if(!(512<t.length)){e.next=16;break}throw new dc("Unsubscribed peers overflows",ds);case 16:for(i=t&&t.length?$k(t):[],this.session.requestUnsubscribePeersOnlineStatus(i),o=0;o<i.length;o++)a=i[o],delete this.subscribedPeerStatusCache[a];case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryPeersBySubscriptionOption",value:function(){var e=ja(M.mark((function e(t){return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===la.CONNECTED){e.next=2;break}throw new aa("The client is not logged in",Hl);case 2:if(t!==qa.PeerSubscriptionOption.ONLINE_STATUS){e.next=4;break}return e.abrupt("return",Object.keys(this.subscribedPeerStatusCache));case 4:throw new Z("Subscription option not supported",Og);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createMessage",value:function(e){return e}},{key:"loginImpl",value:function(){var e=ja(M.mark((function e(t){var n,r,i,o,a,s,u,c,l=this;return M.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.uid,r=t.instanceId,i=t.forceLoginTime,o=void 0===i?0:i,a=r,!(void 0!==this.lastLoginTime&&500>Date.now()-this.lastLoginTime)){e.next=4;break}throw new wD(["The frequency of login exceeded the limit of %d queries per second",2],HB);case 4:if(this.connectionState===la.DISCONNECTED||0!==o){e.next=6;break}throw new aa("The SDK is either logging in or has logged in the Agora RTM system",FB);case 6:e.prev=6,this.context.uid=n,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(6),new Z(["The %s in the arguments is invalid",Object.keys({uid:n})[0]],pi);case 13:return 0===o&&this.onConnectionStateChanged(la.CONNECTING,Mb.LOGIN),(s=new Us(this.context,this.logger,!1)).blacklistedIP=this.blacklistedIP,this.session=u=new Lt(this.context,s,a,this.logger),c=function(){l.connectionState===la.CONNECTED&&(l.onConnectionStateChanged(la.RECONNECTING,Mb.INTERRUPTED),l.session)&&l.session.once("userJoined",(function(){l.onConnectionStateChanged(la.CONNECTED,Mb.LOGIN_SUCCESS)}))},u.on("connectionLost",c),u.on("tokenExpired",(function(){l.emit("TokenExpired")})),u.on("TokenPrivilegeWillExpire",this.TokenPrivilegeWillExpireHandler),u.once("userDrop",this.userDropHandler),this.session.on("peerTextMessage",(function(e){l.emit("MessageFromPeer",{text:e.text,messageType:qa.MessageType.TEXT},e.peerId,e.properties)})),this.session.on("peerRawMessage",(function(e){l.emit("MessageFromPeer",{rawMessage:e.raw,description:e.desc,messageType:qa.MessageType.RAW},e.peerId,e.properties)})),u.on("instanceChanged",(function(e){return a=e})),u.on("peerOnlineStatusChanged",(function(e){var t=e.instance.toString()+e.state,n=l.peerStatusSeqLru.get(t);!n||e.seq.greaterThan(n)?(l.peerStatusSeqLru.set(t,e.seq),e.state!==l.subscribedPeerStatusCache[e.peerId]&&l.emit("PeersOnlineStatusChanged",x({},e.peerId,e.state)),l.subscribedPeerStatusCache[e.peerId]=e.state,clearTimeout(l.peerUnreachableTimers[t]),e.state===qa.PeerOnlineState.UNREACHABLE&&(l.peerUnreachableTimers[t]=setTimeout((function(){l.subscribedPeerStatusCache[e.peerId]===qa.PeerOnlineState.UNREACHABLE&&(l.subscribedPeerStatusCache[e.peerId]=qa.PeerOnlineState.ONLINE,l.emit("PeersOnlineStatusChanged",x({},e.peerId,qa.PeerOnlineState.ONLINE)))}),3e4))):l.log("peerOnlineStatusChanged dedup for %s, %d",t,e.seq.toNumber())})),u.on("invitationMessage",this.invitationManager.invitationMessageHandler.bind(this.invitationManager)),u.on("channelAttributesUpdated",(function(e){var t=e.channelId;e=e.attributeMaps;for(var n={},r=0;r<e.length;r++){var i=e[r],o=i.key,a=i.ms,s=i.value;if(i=i.origin,"string"!=typeof o||!ma.isLong(a)||"string"!=typeof s||!Sa(i))break;n[o]=new Blob([s]).size}l.channelAttributesCacheLru.set(t,n)})),u.on("userJoined",(function(e){if(0!==Object.keys(l.attributes).length){if(void 0===l.session)return;l.session.requestSetLocalUserAttributes(l.attributes,e).toPromise()}if(0!==l.attributeDrafts.size)for(var t=function(t,n){var r=(t=n[t]).attribute;t.promise.then((function(){void 0!==l.session&&l.session.requestSetLocalUserAttributes(r,e).toPromise()}))},n=0,r=Array.from(l.attributeDrafts);n<r.length;n++)t(n,r);0!==Object.keys(l.subscribedPeerStatusCache).length&&u.requestSubscribePeersOnlineStatus(Object.keys(l.subscribedPeerStatusCache))})),u.on("banEdgeIP",(function(e){l.banIP(e)})),this.lastLoginTime=Date.now(),e.prev=32,e.next=35,u.loginHandler().toPromise();case 35:e.next=53;break;case 37:if(e.prev=37,e.t1=e.catch(32),!("loginRespTimeout"===e.t1.name&&2>o)){e.next=46;break}return u.removeAllListeners(),e.next=43,this.loginImpl({uid:n,instanceId:r,forceLoginTime:o+1});case 43:return e.abrupt("return");case 46:if(!vb(e.t1)){e.next=49;break}throw this.onConnectionStateChanged(la.DISCONNECTED,Mb.LOGIN_TIMEOUT),new Qb(te(this.name,"login",12e3),GB);case 49:if(this.onConnectionStateChanged(la.DISCONNECTED,Mb.LOGIN_FAILURE),!Ma(e.t1)){e.next=52;break}throw e.t1;case 52:throw new Ja("Login failure",{code:Ur,originalError:e.t1});case 53:this.onConnectionStateChanged(la.CONNECTED,Mb.LOGIN_SUCCESS);case 54:case"end":return e.stop()}}),e,this,[[6,10],[32,37]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onConnectionStateChanged",value:function(e,t){var n,r=this;e===la.RECONNECTING&&(this.reconnId+=1),xb("ConnectionStateChange",{elapse:yb(this.session&&this.session.startTime),lts:ma.fromNumber(Date.now()),newState:Nt[e],oldState:Nt[this.connectionState],reason:cF[t],sid:rb(this.session&&this.session.instanceId||ma.fromNumber(0)),userId:this.context.uid,reconnId:this.reconnId},null!==(n=this.context.config.enableCloudProxy)&&void 0!==n&&n),this.connectionState===la.RECONNECTING&&e===la.CONNECTED&&(0!==Object.keys(this.subscribedPeerStatusCache).length&&void 0!==this.session&&this.session.requestPeersOnlineStatus(Object.keys(this.subscribedPeerStatusCache)).pipe(Da((function(e){return hd(nl(e.userInfos,"account"),(function(e){return!!e.ts}))}))).subscribe((function(e){e=hd(e,(function(e,t){return e=e?qa.PeerOnlineState.ONLINE:qa.PeerOnlineState.OFFLINE,r.subscribedPeerStatusCache[t]=e})),r.emit("PeersOnlineStatusChanged",e)})),this.internalEmitter.emit("RECONNECTED")),this.connectionState=e,e!==la.ABORTED&&e!==la.DISCONNECTED||(this.pendingPeerStatusSubCount=this.reconnId=0,this.attributes={},this.session&&(this.session.removeAllListeners(),this.session.msgDedupLru.empty(),this.session.dialogueSequenceLru.empty(),this.session.dialPendingMsgSubjectMap.clear()),this.channelAttributesCacheLru.empty(),this.peerStatusSeqLru.empty(),this.peerUnreachableTimers={},this.subscribedPeerStatusCache={},this.attributeDrafts.clear(),this.context.token=void 0),this.emit("ConnectionStateChanged",e,t)}},{key:"banIP",value:function(e){var t;this.log("ip banned",e);var n=null!==(t=this.blacklistedIP[e])&&void 0!==t?t:0;this.blacklistedIP[e]=n+1}}]),t}(Ac()),Ca(U.prototype,"renewToken",[fb],Object.getOwnPropertyDescriptor(U.prototype,"renewToken"),U.prototype),Ca(U.prototype,"queryPeersOnlineStatus",[fb],Object.getOwnPropertyDescriptor(U.prototype,"queryPeersOnlineStatus"),U.prototype),Ca(U.prototype,"getChannelMemberCount",[fb],Object.getOwnPropertyDescriptor(U.prototype,"getChannelMemberCount"),U.prototype),Ca(U.prototype,"setLocalUserAttributes",[fb],Object.getOwnPropertyDescriptor(U.prototype,"setLocalUserAttributes"),U.prototype),Ca(U.prototype,"setChannelAttributes",[fb],Object.getOwnPropertyDescriptor(U.prototype,"setChannelAttributes"),U.prototype),Ca(U.prototype,"addOrUpdateLocalUserAttributes",[fb],Object.getOwnPropertyDescriptor(U.prototype,"addOrUpdateLocalUserAttributes"),U.prototype),Ca(U.prototype,"addOrUpdateChannelAttributes",[fb],Object.getOwnPropertyDescriptor(U.prototype,"addOrUpdateChannelAttributes"),U.prototype),Ca(U.prototype,"deleteLocalUserAttributesByKeys",[fb],Object.getOwnPropertyDescriptor(U.prototype,"deleteLocalUserAttributesByKeys"),U.prototype),Ca(U.prototype,"deleteChannelAttributesByKeys",[fb],Object.getOwnPropertyDescriptor(U.prototype,"deleteChannelAttributesByKeys"),U.prototype),Ca(U.prototype,"clearLocalUserAttributes",[Ic],Object.getOwnPropertyDescriptor(U.prototype,"clearLocalUserAttributes"),U.prototype),Ca(U.prototype,"clearChannelAttributes",[fb],Object.getOwnPropertyDescriptor(U.prototype,"clearChannelAttributes"),U.prototype),Ca(U.prototype,"getUserAttributes",[fb],Object.getOwnPropertyDescriptor(U.prototype,"getUserAttributes"),U.prototype),Ca(U.prototype,"getChannelAttributes",[fb],Object.getOwnPropertyDescriptor(U.prototype,"getChannelAttributes"),U.prototype),Ca(U.prototype,"getChannelAttributesByKeys",[fb],Object.getOwnPropertyDescriptor(U.prototype,"getChannelAttributesByKeys"),U.prototype),Ca(U.prototype,"getUserAttributesByKeys",[fb],Object.getOwnPropertyDescriptor(U.prototype,"getUserAttributesByKeys"),U.prototype),Ca(U.prototype,"login",[Ic],Object.getOwnPropertyDescriptor(U.prototype,"login"),U.prototype),Ca(U.prototype,"logout",[Ic],Object.getOwnPropertyDescriptor(U.prototype,"logout"),U.prototype),Ca(U.prototype,"logoutSync",[Ic],Object.getOwnPropertyDescriptor(U.prototype,"logoutSync"),U.prototype),Ca(U.prototype,"sendMessageToPeer",[fb],Object.getOwnPropertyDescriptor(U.prototype,"sendMessageToPeer"),U.prototype),Ca(U.prototype,"createChannel",[fb],Object.getOwnPropertyDescriptor(U.prototype,"createChannel"),U.prototype),Ca(U.prototype,"createLocalInvitation",[fb],Object.getOwnPropertyDescriptor(U.prototype,"createLocalInvitation"),U.prototype),Ca(U.prototype,"subscribePeersOnlineStatus",[fb],Object.getOwnPropertyDescriptor(U.prototype,"subscribePeersOnlineStatus"),U.prototype),Ca(U.prototype,"unsubscribePeersOnlineStatus",[fb],Object.getOwnPropertyDescriptor(U.prototype,"unsubscribePeersOnlineStatus"),U.prototype),Ca(U.prototype,"queryPeersBySubscriptionOption",[fb],Object.getOwnPropertyDescriptor(U.prototype,"queryPeersBySubscriptionOption"),U.prototype),Ca(U.prototype,"createMessage",[Ic],Object.getOwnPropertyDescriptor(U.prototype,"createMessage"),U.prototype),U),mm,nm,om,pm,Ot=null===(mm=/Chrome\/([0-9.]+)/.exec(null===(om=window)||void 0===om||null===(pm=om.navigator)||void 0===pm?void 0:pm.userAgent))||void 0===mm||null===(nm=mm[1])||void 0===nm?void 0:nm.split(".")[0];if(Ot&&88<=parseInt(Ot,10)&&!Ae()){var qm,xe=document.createElement("video"),ye=document.createElement("canvas");xe.setAttribute("style","display:none"),xe.setAttribute("muted",""),xe.muted=!0,xe.setAttribute("autoplay",""),xe.autoplay=!0,xe.setAttribute("playsinline",""),ye.setAttribute("style","display:none"),ye.setAttribute("width","1"),ye.setAttribute("height","1"),null===(qm=ye.getContext("2d"))||void 0===qm||qm.fillRect(0,0,1,1),xe.srcObject=null==ye?void 0:ye.captureStream()}var Pt={LOG_FILTER_OFF:{error:!1,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_ERROR:{error:!0,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_WARNING:{error:!0,warn:!0,info:!1,track:!1,debug:!1},LOG_FILTER_INFO:{error:!0,warn:!0,info:!0,track:!1,debug:!1},LOG_FILTER_DEBUG:{error:!0,warn:!0,info:!0,track:!0,debug:!0}},Qt={enableLogUpload:!1,logFilter:Pt.LOG_FILTER_INFO,enableCloudProxy:!1},ue=jb(jb({createInstance:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length?arguments[2]:void 0;if(!/^[\dA-Za-z]{32}$/.test(e))throw new Z(["The %s in the arguments is invalid",Object.keys({appId:e})[0]],Ir);var r=Object.keys(t).filter((function(e){return!(e in Qt)}));if(0!==r.length)throw new Z("Invalid RTM config: ".concat(r.join(", ")),Ir);var i=jb(jb({},Qt),t);if(void 0!==n&&(!Array.isArray(n)||0===n.length))throw new Z("Invalid area config");if(null!=n){if(!n.every((function(e){return e in qa.LegacyAreaCode})))throw new Z("Invalid area codes: ".concat(n.filter((function(e){return!(e in qa)})).join(", ")));ca=Ue(n.map((function(e){return ED[e]})))}n=Nl=Va.__global_unique_id__=(Va.__global_unique_id__||0)+1;var o=ID(i);r=JD(i);var a=KD(i),s=LD(n,i),u=Os(n,i),c=u("RTM:DEBUG","<Entry> ");return Hs.rtmConfig=i,o("The Agora RTM Web SDK version is %s","1.5.0"),t.enableCloudProxy&&o("RTM cloud proxy enabled"),t.enableLogUpload&&o("Log upload enabled"),ca&&c("Area is set to %s",Array.from(ca.CODES).map((function(e){return $f(R).find((function(t){return R[t]===e}))})).join(", ")),c("Creating an RtmClient instance"),c('The Git commit ID is "'.concat("v1.5.0-0-g83bd874d",'"')),c("The App ID is %s",Pn(e,4,10,"*".repeat(6))),o("The process ID is %s",Mg),c("The build is %s","v1.5.0-0-g83bd874d"),c("NODE_ENV is %s","production"),new dF(e,{genLogger:u,genTracker:s,info:o,warn:r,logError:a,loggerId:n},i,(function(e){for(var t=0,n=$f(e);t<n.length;t++){var r=n[t];try{var a=e[r];null!=a&&(e.enableCloudProxy&&o("RTM cloud proxy enabled"),e.enableLogUpload&&o("Log upload enabled"),i[r]=a)}catch(e){throw new Z(["The %s in the arguments is invalid",r],void 0)}}}))},BUILD:"v1.5.0-0-g83bd874d",VERSION:"1.5.0",END_CALL_PREFIX:"AgoraRTMLegacyEndcallCompatibleMessagePrefix",processId:Mg,ConnectionChangeReason:qa.ConnectionChangeReason,ConnectionState:qa.ConnectionState,LocalInvitationFailureReason:qa.LocalInvitationFailureReason,LocalInvitationState:qa.LocalInvitationState,RemoteInvitationFailureReason:qa.RemoteInvitationFailureReason,RemoteInvitationState:qa.RemoteInvitationState,MessageType:qa.MessageType,PeerOnlineState:qa.PeerOnlineState,PeerSubscriptionOption:qa.PeerSubscriptionOption},Pt),{},{setParameter:function(e,t){Object.keys(xc).includes(e)&&(xc[e]=t)},getParameter:function(e){return xc[e]},setArea:function(e){var t=e.areaCodes;if(e=e.excludedArea,!Array.isArray(t)||0===t.length||!t.every((function(e){return e in qa.AreaCode})))throw new Z("Invalid area config");if(void 0!==e&&e===qa.AreaCode.GLOBAL)throw new Z("Excluded area cannot be global");if(void 0===e)ca=Ue(t.map((function(e){return R[e]})));else{if(t.includes(e))throw new Z("Excluded area cannot be in areaCodes");if(!(e in R))throw new Z("Invalid excludedArea:",e);ca=yv({areas:t.map((function(e){return R[e]})),excludedArea:R[e]})}}});return ue}));
